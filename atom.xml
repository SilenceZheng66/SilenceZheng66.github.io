<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>SilenceZheng66-BLOG</title>
  
  <subtitle>log</subtitle>
  <link href="http://silencezheng.top/atom.xml" rel="self"/>
  
  <link href="http://silencezheng.top/"/>
  <updated>2023-08-08T15:28:55.814Z</updated>
  <id>http://silencezheng.top/</id>
  
  <author>
    <name>SilenceZheng66</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Pyinstalleré€†å‘åˆä½“éªŒ</title>
    <link href="http://silencezheng.top/2023/08/08/article114/"/>
    <id>http://silencezheng.top/2023/08/08/article114/</id>
    <published>2023-08-08T15:28:09.000Z</published>
    <updated>2023-08-08T15:28:55.814Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å†™äº†ä¸ªPythonå°å·¥å…·ï¼Œçªç„¶æƒ³åˆ°é˜²é€†å‘çš„é—®é¢˜ï¼Œå†™ç¯‡å°æ–‡å®è·µä¸€ä¸‹ã€‚</p><span id="more"></span><h2 id="ç”¨PyInstalleræ‰“åŒ…ç¨‹åº"><a href="#ç”¨PyInstalleræ‰“åŒ…ç¨‹åº" class="headerlink" title="ç”¨PyInstalleræ‰“åŒ…ç¨‹åº"></a>ç”¨PyInstalleræ‰“åŒ…ç¨‹åº</h2><p>å¯¹æœ‰å›¾å½¢ç•Œé¢çš„ç¨‹åºï¼Œæœ€ç®€å•çš„æ‰“åŒ…å°±æ˜¯<code>pyinstaller -F --noconsole xxx.py</code>ã€‚</p><h2 id="åç¼–è¯‘è¯¥ç¨‹åº"><a href="#åç¼–è¯‘è¯¥ç¨‹åº" class="headerlink" title="åç¼–è¯‘è¯¥ç¨‹åº"></a>åç¼–è¯‘è¯¥ç¨‹åº</h2><p>ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„å·¥å…·æ˜¯<a href="https://github.com/WithSecureLabs/python-exe-unpacker">pyinstxtractor</a>ã€‚</p><p>å¯¹äºWindowsä¸­æ‰“åŒ…çš„Pythonåº”ç”¨ï¼ˆpython3.9ï¼Œpyinstaller5.x+ï¼‰ï¼Œå¯ä»¥ç›´æ¥æå–ã€‚ä½†å¯¹äºåŒé…ç½®ä¸‹MacOSä¸­æ‰“åŒ…çš„åº”ç”¨ä¸èƒ½æå–ã€‚ä¸‹é¢ç®€å•æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ã€‚</p><p>é¦–å…ˆä¸‹è½½é¡¹ç›®ä»£ç ï¼Œå°†å¾…æå–å¯æ‰§è¡Œæ–‡ä»¶ç½®äºé¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä»¥æˆ‘åç¼–è¯‘çš„é¡¹ç›®<code>replacer.exe</code>ä¸ºä¾‹ï¼Œè¿è¡Œ<code>python python_exe_unpack.py -i replacer.exe</code>ã€‚</p><p>è¿è¡Œåæ ¹ç›®å½•ä¸‹ä¼šå‡ºç°<code>unpacked</code>ç›®å½•ï¼Œå…¶ä¸­ä¸ºæŠ½å–å‡ºçš„<code>pyc</code>æ–‡ä»¶ã€‚æ‰¾åˆ°å…¶ä¸­çš„ç¨‹åºå…¥å£æ–‡ä»¶ï¼Œé€šå¸¸ä¸å¯æ‰§è¡Œæ–‡ä»¶åå­—ç›¸åŒï¼Œæˆ–ä¸º<code>main</code>ç­‰ï¼Œä½†ä¹Ÿå¾ˆå¯èƒ½ä¸ç¬¦åˆè¿™ä¸€è§„å¾‹ï¼Œæ‰€ä»¥éœ€è¦è‡ªè¡Œç¡®å®šï¼Œè¿™é‡Œæˆ‘çš„ç¨‹åºå…¥å£å°±æ˜¯<code>replace</code>ã€‚ä¿®æ”¹æŠ½å–å‡ºçš„å…¥å£æ–‡ä»¶åï¼Œå¢åŠ åç¼€ä¸º <code>replace.pyc</code>ã€‚</p><p>ç„¶åæ‰§è¡Œ<code>uncompyle6 replacer.pyc&gt;replacer.py</code>ï¼Œåç¼–è¯‘<code>pyc</code>æ–‡ä»¶ä¸ºæºä»£ç ã€‚è¿™ä¸€æ­¥ä½ å¾ˆå¯èƒ½åœ¨åç¼–è¯‘å‡ºçš„æ–‡ä»¶ä¸­å‘ç°ç±»ä¼¼<code>Unknown magic number 227 in replacer.pyc</code>çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºä¸åŒPythonç‰ˆæœ¬çš„<code>pyc</code>æ–‡ä»¶å‰ç¼€<code>Magic Number</code>ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„<code>Magic Number</code>ã€‚ä¸€ç§ç®€å•çš„åŠæ³•æ˜¯æŠŠæŠ½å–å‡ºçš„<code>struct</code>æ–‡ä»¶ï¼Œä¹Ÿä¿®æ”¹ä¸º<code>struct.pyc</code>å¹¶å¯¹å…¶è¿›è¡Œåç¼–è¯‘ï¼Œå¦‚æœèƒ½åç¼–è¯‘æˆåŠŸï¼Œåˆ™å°†å…¶æ–‡ä»¶å‰ç¼€åº”ç”¨åˆ°<code>replace.pyc</code>ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">od -c struct.pyc</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š</span></span><br><span class="line">0000000    3  \r  \r  \n   p   y   i   0 001 001  \0  \0 343  \0  \0  \0</span><br><span class="line">0000020   \0  \0  \0  \0  \0  \0  \0  \0  \0  \b  \0  \0  \0   @  \0  \0</span><br><span class="line">0000040   \0   s   8  \0  \0  \0   d  \0   d 001   d 002   d 003   d 004</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å†åè§‚<code>replacer.pyc</code>ï¼Œæ˜æ˜¾ç¼ºå°‘å‰ç¼€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">od -c replacer.pyc</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š</span></span><br><span class="line">0000000  343  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0</span><br><span class="line">0000020   \0 004  \0  \0  \0   @  \0  \0  \0   s 350  \0  \0  \0   d  \0</span><br><span class="line">0000040    d 001   l  \0   Z  \0   d  \0   d 001   l 001   Z 001   d  \0</span><br></pre></td></tr></table></figure><p>äºæ˜¯æˆ‘ä»¬ç»™<code>replacer.pyc</code>åŠ ä¸Šåˆé€‚çš„<code>Magic Number</code>æ–‡ä»¶å‰ç¼€ï¼Œåœ¨è¿™é‡Œæ˜¯<code>3  \r  \r  \n   p   y   i   0 001 001  \0  \0</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim -b replacer.pyc</span><br><span class="line"><span class="comment"># å‘½ä»¤æ¨¡å¼è¾“å…¥</span></span><br><span class="line">:%!xxd</span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå·¦ä¾§æ˜¯16è¿›åˆ¶ï¼Œå³ä¾§æ˜¯åŸæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># VIMæŠŠè¿™äº›å½“åšæ™®é€šçš„å­—ç¬¦ä¸²å¯¹å¾…ï¼Œæ‰€ä»¥ï¼Œä¿®æ”¹äº†å·¦ä¾§çš„16è¿›åˆ¶çš„å­—ç¬¦åå³ä¾§çš„å­—ç¬¦å¹¶ä¸ä¼šè·Ÿç€æ”¹å˜ï¼Œåä¹‹äº¦ç„¶ã€‚</span></span><br><span class="line"><span class="comment"># æ³¨æ„ä¿®æ”¹å®Œæˆå,ä¸è¦ä¿å­˜,è¦å†ç”¨ </span></span><br><span class="line">:%!xxd -r</span><br><span class="line"><span class="comment"># åˆ‡æ¢æˆæ–‡æœ¬çŠ¶æ€æ ¼å¼å†ä¿å­˜.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment"># æ‰¾åˆ°èµ·å§‹ä½ç½®ï¼Œä¾‹å¦‚è¿™é‡Œæ˜¯e300</span></span><br><span class="line"><span class="comment"># ç„¶ååŒæ ·æ–¹å¼æ‰“å¼€ xxx.pycï¼ŒæŠŠèµ·å§‹ä½ç½®ä¹‹å‰çš„å†…å®¹å¤åˆ¶åˆ°replacer.pycä¸­å·¦ä¾§ã€‚</span></span><br><span class="line"><span class="comment"># ç„¶å :%!xxd -r åwqä¿å­˜ã€‚</span></span><br></pre></td></tr></table></figure><p>ä½†ç¬”è€…çš„MacOS13è¿›è¡Œå¦‚ä¸Šæ“ä½œåä¾ç„¶æ— æ³•è§£æï¼ŒæŠ¥é”™<code>struct.error: unpack requires a buffer of 2 bytes</code>ï¼Œæ¢ç”¨Windowsåè§£å†³ï¼ŒæˆåŠŸåç¼–è¯‘å‡ºäº†<code>replacer</code>çš„æºç ã€‚</p><p>PSï¼šæ·»åŠ å‰ç¼€åæŠ¥é”™ï¼š<code>Ill-formed bytecode file replacer.pyc &lt;class &#39;ValueError&#39;&gt;; bad marshal data (unknown type code)</code>é€šå¸¸ä¹Ÿæ˜¯ç”±äº<code>Magic Number</code>ä¸å¯¹ï¼Œå¯¹äºpython3.8åŠä»¥ä¸Šç‰ˆæœ¬æ‰“åŒ…çš„å¯æ‰§è¡Œæ–‡ä»¶åç¼–è¯‘ä¼¼ä¹éœ€è¦ä½¿ç”¨pycdcï¼Œè¿˜æ²¡éªŒè¯ã€‚ç¬”è€…æµ‹è¯•äº†3.6ã€3.8å’Œ3.9æ‰“åŒ…çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œ3.8å’Œ3.9å‡æ— æ³•é€šè¿‡ä¸Šè¿°æ–¹æ³•åç¼–è¯‘ï¼ŒçŒœæµ‹æ˜¯3.8åç»­æ›´æ–°å¯¼è‡´ã€‚</p><p>PPSï¼šä¸Šè¿°<code>.pyc</code>åç¼–è¯‘å·¥å…·çš„ä½œè€…ä¹Ÿæœ‰ç‚¹éš¾é¡¶å•Š<a href="https://github.com/rocky/python-uncompyle6/issues/316">ğŸ˜†</a>ï¼Œå¦å¤–Pyinstallerçš„<a href="https://pyinstaller.org/en/stable/advanced-topics.html#inspecting-executables">å®˜æ–¹æ–‡æ¡£</a>æœ‰æ—¶é—´ä¹Ÿåº”è¯¥è¯»ä¸€ä¸‹ã€‚</p><h2 id="åœ¨æ‰“åŒ…æ—¶åŠ å¯†ç¨‹åº"><a href="#åœ¨æ‰“åŒ…æ—¶åŠ å¯†ç¨‹åº" class="headerlink" title="åœ¨æ‰“åŒ…æ—¶åŠ å¯†ç¨‹åº"></a>åœ¨æ‰“åŒ…æ—¶åŠ å¯†ç¨‹åº</h2><p>åœ¨<code>pyinstaller</code>æ‰“åŒ…æ—¶è¿›è¡ŒåŠ å¯†ï¼Œåªéœ€è¦æ·»åŠ å‚æ•°<code>--key</code>å³å¯ï¼Œä¾‹å¦‚<code>pyinstaller -F --noconsole --key 12345 xxx.py</code>ã€‚</p><p>Windowsä¸Šä½¿ç”¨è¿™ä¸ªå‚æ•°éœ€è¦å®‰è£…<code>tinyaes</code>ï¼ˆæˆ–<code>pycrypto</code>ï¼‰ï¼Œè¿™ä¸ªåº“éœ€è¦<code>Microsoft Visual C++</code>ï¼Œè¿˜è¦å»å®‰è£…<code>Microsoft Visual C++ Build Tools</code>ã€‚</p><h2 id="åç¼–è¯‘åŠ å¯†çš„ç¨‹åºï¼ˆæœªå®è·µï¼‰"><a href="#åç¼–è¯‘åŠ å¯†çš„ç¨‹åºï¼ˆæœªå®è·µï¼‰" class="headerlink" title="åç¼–è¯‘åŠ å¯†çš„ç¨‹åºï¼ˆæœªå®è·µï¼‰"></a>åç¼–è¯‘åŠ å¯†çš„ç¨‹åºï¼ˆæœªå®è·µï¼‰</h2><p>ç”¨ä¸Šé¢çš„æ–¹æ³•åŠ å¯†åï¼Œ<code>PYZ-00.pyz_extracted</code>ä¸­çš„æ–‡ä»¶å°±è¢«åŠ å¯†äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ä»…èƒ½åç¼–è¯‘å‡ºç¨‹åºå…¥å£çš„æºç ã€‚</p><h2 id="ç”¨CythonåŠ å¯†ç¨‹åº"><a href="#ç”¨CythonåŠ å¯†ç¨‹åº" class="headerlink" title="ç”¨CythonåŠ å¯†ç¨‹åº"></a>ç”¨CythonåŠ å¯†ç¨‹åº</h2><p>å¾…è¡¥å……ï¼Œç”¨Macç£•ç£•ç»Šç»Šï¼Œä¸§å¤±å…´è¶£äº†ï½</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://zhuanlan.zhihu.com/p/109266820">https://zhuanlan.zhihu.com/p/109266820</a><br>[2] <a href="https://blog.csdn.net/as604049322/article/details/119834495">https://blog.csdn.net/as604049322/article/details/119834495</a><br>[3] <a href="https://pyinstaller.org/en/stable/advanced-topics.html#inspecting-archives">https://pyinstaller.org/en/stable/advanced-topics.html#inspecting-archives</a><br>[4] <a href="https://pyinstaller.org/en/stable/advanced-topics.html#inspecting-executables">https://pyinstaller.org/en/stable/advanced-topics.html#inspecting-executables</a><br>[5] <a href="https://github.com/WithSecureLabs/python-exe-unpacker">https://github.com/WithSecureLabs/python-exe-unpacker</a><br>[6] <a href="https://blog.csdn.net/qq_15969343/article/details/120001351">https://blog.csdn.net/qq_15969343/article/details/120001351</a><br>[7] <a href="https://github.com/rocky/python-decompile3">https://github.com/rocky/python-decompile3</a><br>[8] <a href="https://github.com/rocky/python-uncompyle6/">https://github.com/rocky/python-uncompyle6/</a><br>[9] <a href="https://blog.csdn.net/Zheng__Huang/article/details/112380221">https://blog.csdn.net/Zheng__Huang/article/details/112380221</a><br>[10] <a href="https://blog.csdn.net/weixin_44222568/article/details/111672799">https://blog.csdn.net/weixin_44222568/article/details/111672799</a><br>[11] <a href="https://www.cnblogs.com/Here-is-SG/p/15885799.html">https://www.cnblogs.com/Here-is-SG/p/15885799.html</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å†™äº†ä¸ªPythonå°å·¥å…·ï¼Œçªç„¶æƒ³åˆ°é˜²é€†å‘çš„é—®é¢˜ï¼Œå†™ç¯‡å°æ–‡å®è·µä¸€ä¸‹ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Python" scheme="http://silencezheng.top/tags/Python/"/>
    
    <category term="é€†å‘" scheme="http://silencezheng.top/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>EqualsAndHashCodeæ³¨è§£ä½¿ç”¨æ³¨æ„</title>
    <link href="http://silencezheng.top/2023/08/06/article113/"/>
    <id>http://silencezheng.top/2023/08/06/article113/</id>
    <published>2023-08-06T11:16:30.000Z</published>
    <updated>2023-08-06T11:18:43.342Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ´¾ç”Ÿç±»ä¸­@EqualsAndHashCodeæ³¨è§£ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹ã€‚</p><p>å…¶å®å°±æ˜¯æ´¾ç”Ÿç±»ä»€ä¹ˆæ—¶å€™éœ€è¦æ˜¾ç¤ºæŒ‡å®š<code>@EqualsAndHashCode(callSuper = true)</code>çš„é—®é¢˜ã€‚<br><span id="more"></span></p><h2 id="é‡å†™equalsè¦é‡å†™hashCode"><a href="#é‡å†™equalsè¦é‡å†™hashCode" class="headerlink" title="é‡å†™equalsè¦é‡å†™hashCode"></a>é‡å†™equalsè¦é‡å†™hashCode</h2><p>åœ¨ Java ä¸­ï¼Œ<code>hashCode()</code> æ–¹æ³•ç”¨äºè®¡ç®—å¯¹è±¡çš„å“ˆå¸Œç ï¼Œè€Œå“ˆå¸Œç åœ¨æ•£åˆ—æ•°æ®ç»“æ„ä¸­ç”¨äºç¡®å®šå¯¹è±¡çš„å­˜å‚¨ä½ç½®ã€‚å½“ä½¿ç”¨æ•£åˆ—æ•°æ®ç»“æ„å­˜å‚¨å¯¹è±¡æ—¶ï¼Œé¦–å…ˆä¼šæ ¹æ®å¯¹è±¡çš„å“ˆå¸Œç æ¥ç¡®å®šå­˜å‚¨ä½ç½®ï¼Œç„¶åä½¿ç”¨ <code>equals()</code> æ–¹æ³•æ¥æ£€æŸ¥æ˜¯å¦æœ‰ç¢°æ’ï¼ˆå³ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡æœ‰ç›¸åŒçš„å“ˆå¸Œç ï¼‰ã€‚å¦‚æœ <code>hashCode()</code> å’Œ <code>equals()</code> æ–¹æ³•ä¸ä¸€è‡´ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li><p>åœ¨æ•£åˆ—æ•°æ®ç»“æ„ä¸­æŸ¥æ‰¾å¯¹è±¡æ—¶ï¼Œå¯èƒ½æ— æ³•æ‰¾åˆ°é¢„æœŸçš„å¯¹è±¡ï¼Œå› ä¸º <code>hashCode()</code> ä¸åŒå¯¼è‡´å¯¹è±¡å­˜å‚¨åœ¨ä¸åŒçš„ä½ç½®ã€‚</p></li><li><p>å½“ä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®ï¼ˆkeyï¼‰å­˜å‚¨åœ¨ <code>HashMap</code> æˆ– <code>Hashtable</code> ä¸­æ—¶ï¼Œç”±äºå“ˆå¸Œç ä¸ä¸€è‡´ï¼Œå¯èƒ½æ— æ³•æ­£ç¡®åœ°æŸ¥æ‰¾æˆ–åˆ é™¤å¯¹åº”çš„å€¼ï¼ˆvalueï¼‰ã€‚</p></li><li><p>åœ¨ä½¿ç”¨ <code>HashSet</code> å­˜å‚¨å¯¹è±¡æ—¶ï¼Œå¯èƒ½ä¼šå…è®¸é‡å¤çš„å¯¹è±¡è¿›å…¥é›†åˆï¼Œå› ä¸º <code>HashSet</code> ä½¿ç”¨å“ˆå¸Œç æ¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œè€Œå“ˆå¸Œç ä¸åŒæ„å‘³ç€å¯¹è±¡ä¸åŒï¼Œå³ä½¿å®ƒä»¬çš„ <code>equals()</code> æ–¹æ³•è¿”å› <code>true</code>ã€‚</p></li></ol><p>ä¸ºäº†é¿å…è¿™äº›é—®é¢˜ï¼Œåœ¨é‡å†™ <code>equals()</code> æ–¹æ³•æ—¶åŒæ—¶é‡å†™ <code>hashCode()</code> æ–¹æ³•ï¼Œå¹¶ä¸”è¦ç¡®ä¿ä¸¤ä¸ªæ–¹æ³•åœ¨æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰æ—¶ä¸€è‡´ã€‚åœ¨é‡å†™ <code>hashCode()</code> æ–¹æ³•æ—¶ï¼Œåº”è¯¥ç¡®ä¿ç›¸ç­‰çš„å¯¹è±¡è¿”å›ç›¸åŒçš„å“ˆå¸Œç ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¯¹è±¡åœ¨æ•£åˆ—æ•°æ®ç»“æ„ä¸­èƒ½å¤Ÿæ­£ç¡®å­˜å‚¨å’Œæ£€ç´¢ã€‚</p><h2 id="EqualsAndHashCodeæ³¨è§£çš„callSuperå±æ€§"><a href="#EqualsAndHashCodeæ³¨è§£çš„callSuperå±æ€§" class="headerlink" title="@EqualsAndHashCodeæ³¨è§£çš„callSuperå±æ€§"></a>@EqualsAndHashCodeæ³¨è§£çš„callSuperå±æ€§</h2><p><code>@EqualsAndHashCode</code> æ˜¯ Lombok æ³¨è§£ä¸­çš„ä¸€ä¸ªï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆ <code>equals()</code> å’Œ <code>hashCode()</code> æ–¹æ³•ã€‚å…¶ä¸­ï¼Œ<code>callSuper</code> å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºæŒ‡å®šæ˜¯å¦åœ¨ç”Ÿæˆçš„ <code>equals()</code> å’Œ <code>hashCode()</code> æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„å¯¹åº”æ–¹æ³•ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>callSuper</code> å±æ€§çš„å€¼ä¸º <code>false</code>ï¼Œå³ä¸è°ƒç”¨çˆ¶ç±»çš„ <code>equals()</code> å’Œ <code>hashCode()</code> æ–¹æ³•ã€‚è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»å¹¶ä½¿ç”¨ <code>@EqualsAndHashCode</code> æ³¨è§£æ¥ç”Ÿæˆæ–¹æ³•ï¼Œå®ƒåªä¼šè€ƒè™‘è‡ªå·±çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä»çˆ¶ç±»ç»§æ‰¿çš„æˆå‘˜å˜é‡ã€‚</p><p>å½“ <code>callSuper</code> å±æ€§çš„å€¼ä¸º <code>true</code> æ—¶ï¼ŒLombok ä¼šåœ¨ç”Ÿæˆçš„ <code>equals()</code> å’Œ <code>hashCode()</code> æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„å¯¹åº”æ–¹æ³•ã€‚è¿™æ ·åšå¯ä»¥ç¡®ä¿åœ¨æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œé™¤äº†è€ƒè™‘å­ç±»è‡ªå·±çš„æˆå‘˜å˜é‡å¤–ï¼Œè¿˜ä¼šè€ƒè™‘çˆ¶ç±»çš„æˆå‘˜å˜é‡ã€‚è¿™å¯¹äºåŒ…å«ç»§æ‰¿å…³ç³»çš„ç±»ç»“æ„æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒä¿è¯äº†åœ¨æ¯”è¾ƒå¯¹è±¡æ—¶è€ƒè™‘äº†æ‰€æœ‰ç»§æ‰¿é“¾ä¸Šçš„æˆå‘˜å˜é‡ã€‚</p><h2 id="æ´¾ç”Ÿç±»éœ€è¦æ˜¾ç¤ºæŒ‡å®š-EqualsAndHashCode-callSuper-true"><a href="#æ´¾ç”Ÿç±»éœ€è¦æ˜¾ç¤ºæŒ‡å®š-EqualsAndHashCode-callSuper-true" class="headerlink" title="æ´¾ç”Ÿç±»éœ€è¦æ˜¾ç¤ºæŒ‡å®š@EqualsAndHashCode(callSuper = true)"></a>æ´¾ç”Ÿç±»éœ€è¦æ˜¾ç¤ºæŒ‡å®š@EqualsAndHashCode(callSuper = true)</h2><p>ç°åœ¨æ¥è§£é‡Šä¸ºä»€ä¹ˆåœ¨æ´¾ç”Ÿç±»ä¸Šå·²ç»æœ‰ <code>@Data</code> æ³¨è§£æ—¶ï¼Œä»ç„¶éœ€è¦åŠ å…¥ <code>@EqualsAndHashCode(callSuper = true)</code> æ³¨è§£ï¼š</p><ol><li><p>å¦‚æœåœ¨æ´¾ç”Ÿç±»ä¸Šä»…ä½¿ç”¨ <code>@Data</code> æ³¨è§£è€Œæ²¡æœ‰ <code>@EqualsAndHashCode</code> æ³¨è§£ï¼Œé‚£ä¹ˆç”Ÿæˆçš„ <code>equals()</code> å’Œ <code>hashCode()</code> æ–¹æ³•åªä¼šè€ƒè™‘æ´¾ç”Ÿç±»è‡ªå·±çš„æˆå‘˜å˜é‡ï¼Œè€Œä¸ä¼šè€ƒè™‘ä»çˆ¶ç±»ç»§æ‰¿çš„æˆå‘˜å˜é‡ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´åœ¨æ¯”è¾ƒå¯¹è±¡æ—¶å¿½ç•¥äº†æ‰€åŒ…å«çš„çˆ¶ç±»å±æ€§ï¼Œä»è€Œå‡ºç°é”™è¯¯çš„ç»“æœã€‚</p></li><li><p>å¦‚æœåœ¨æ´¾ç”Ÿç±»ä¸ŠåŒæ—¶ä½¿ç”¨ <code>@Data</code> å’Œ <code>@EqualsAndHashCode(callSuper = true)</code> æ³¨è§£ï¼Œé‚£ä¹ˆç”Ÿæˆçš„ <code>equals()</code> å’Œ <code>hashCode()</code> æ–¹æ³•ä¼šè€ƒè™‘æ´¾ç”Ÿç±»è‡ªå·±çš„æˆå‘˜å˜é‡ï¼ŒåŒæ—¶ä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„å¯¹åº”æ–¹æ³•ï¼Œç¡®ä¿äº†ç»§æ‰¿é“¾ä¸Šæ‰€æœ‰æˆå‘˜å˜é‡éƒ½ä¼šè¢«è€ƒè™‘åœ¨å†…ã€‚</p></li></ol><p>ç»¼ä¸Šï¼Œå½“æ´¾ç”Ÿç±»éœ€è¦è€ƒè™‘ç»§æ‰¿è‡ªçˆ¶ç±»çš„æˆå‘˜å˜é‡æ—¶ï¼Œåº”è¯¥åœ¨æ´¾ç”Ÿç±»ä¸Šä½¿ç”¨ <code>@EqualsAndHashCode(callSuper = true)</code> æ³¨è§£ã€‚è€Œå¦‚æœæ´¾ç”Ÿç±»åªéœ€è¦è€ƒè™‘è‡ªå·±çš„æˆå‘˜å˜é‡ï¼Œä¸æ¶‰åŠç»§æ‰¿å…³ç³»ï¼Œé‚£ä¹ˆå¯ä»¥ä»…ä½¿ç”¨ <code>@Data</code> æ³¨è§£è€Œä¸æ·»åŠ  <code>@EqualsAndHashCode</code> æ³¨è§£ã€‚</p><h2 id="Lombokå…¨å±€é…ç½®callSuper"><a href="#Lombokå…¨å±€é…ç½®callSuper" class="headerlink" title="Lombokå…¨å±€é…ç½®callSuper"></a>Lombokå…¨å±€é…ç½®callSuper</h2><p>åœ¨ Lombok ä¸­ï¼Œå…¨å±€é…ç½® <code>callSuper</code> å±æ€§å¯ä»¥é€šè¿‡ä½¿ç”¨é…ç½®æ–‡ä»¶æˆ–åœ¨æ³¨è§£å¤„ç†å™¨çš„å‘½ä»¤è¡Œå‚æ•°ä¸­è®¾ç½®ã€‚è¿™æ ·å¯ä»¥ä¸ºæ•´ä¸ªé¡¹ç›®ä¸­çš„æ‰€æœ‰ç±»ç»Ÿä¸€é…ç½® <code>callSuper</code> å±æ€§çš„é»˜è®¤å€¼ã€‚</p><p>åœ¨é¡¹ç›®ä¸­é…ç½® Lombok çš„å…¨å±€å±æ€§æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨ <code>lombok.config</code> æ–‡ä»¶ï¼š</li></ol><p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆé€šå¸¸å¯ä»¥æ”¾åœ¨<code>src/main/java</code>ä¸‹ï¼‰ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>lombok.config</code> çš„æ–‡ä»¶ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜è¯¥é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªæ ¹é…ç½®æ–‡ä»¶ï¼Œä»è¯¥é…ç½®æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å¼€å§‹æ‰«æ</span></span><br><span class="line"><span class="attr">config.stopBubbling</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment"># å…¨å±€é…ç½® equalsAndHashCode çš„ callSuper å±æ€§ä¸ºtrue</span></span><br><span class="line"><span class="attr">lombok.equalsAndHashCode.callSuper</span>=call</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæ‰€æœ‰ä½¿ç”¨ <code>@EqualsAndHashCode</code> æ³¨è§£çš„ç±»éƒ½ä¼šè‡ªåŠ¨è®¾ç½® <code>callSuper</code> å±æ€§ä¸º <code>true</code>ï¼Œå³åœ¨ç”Ÿæˆçš„ <code>equals()</code> å’Œ <code>hashCode()</code> æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„å¯¹åº”æ–¹æ³•ã€‚</p><ol><li>ä½¿ç”¨æ³¨è§£å¤„ç†å™¨çš„å‘½ä»¤è¡Œå‚æ•°ï¼š</li></ol><p>åœ¨æ„å»ºå·¥å…·ä¸­é…ç½®æ³¨è§£å¤„ç†å™¨çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œå°† <code>lombok.equalsAndHashCode.callSuper</code> è®¾ç½®ä¸º <code>true</code>ã€‚å…·ä½“æ–¹æ³•æ ¹æ®ä½¿ç”¨çš„æ„å»ºå·¥å…·æœ‰æ‰€ä¸åŒï¼š</p><ul><li>å¯¹äº Mavenï¼Œå¯ä»¥åœ¨ <code>pom.xml</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArg</span>&gt;</span>-Alombok.equalsAndHashCode.callSuper=true<span class="tag">&lt;/<span class="name">compilerArg</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„æ›¿æ¢ <code>$&#123;lombok.version&#125;</code> ä¸ºä½ ä½¿ç”¨çš„ Lombok ç‰ˆæœ¬ã€‚</p><ul><li>å¯¹äº Gradleï¼Œå¯ä»¥åœ¨ <code>build.gradle</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼ˆä¸ä¸€å®šå¯¹ï¼‰ï¼š</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    annotationProcessor <span class="string">&quot;org.projectlombok:lombok:$&#123;lombokVersion&#125;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks.withType(JavaCompile) &#123;</span><br><span class="line">    <span class="keyword">options</span>.compilerArgs &lt;&lt; <span class="string">&quot;-Alombok.equalsAndHashCode.callSuper=true&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ›¿æ¢ <code>lombokVersion</code> ä¸ºä½ ä½¿ç”¨çš„ Lombok ç‰ˆæœ¬ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://zhuanlan.zhihu.com/p/460297314">https://zhuanlan.zhihu.com/p/460297314</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æ´¾ç”Ÿç±»ä¸­@EqualsAndHashCodeæ³¨è§£ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®å°±æ˜¯æ´¾ç”Ÿç±»ä»€ä¹ˆæ—¶å€™éœ€è¦æ˜¾ç¤ºæŒ‡å®š&lt;code&gt;@EqualsAndHashCode(callSuper = true)&lt;/code&gt;çš„é—®é¢˜ã€‚&lt;br&gt;</summary>
    
    
    
    
    <category term="Java" scheme="http://silencezheng.top/tags/Java/"/>
    
    <category term="Lombok" scheme="http://silencezheng.top/tags/Lombok/"/>
    
  </entry>
  
  <entry>
    <title>RestTemplate--SpringBootæ¥å£è°ƒç”¨æ•´åˆ</title>
    <link href="http://silencezheng.top/2023/08/06/article112/"/>
    <id>http://silencezheng.top/2023/08/06/article112/</id>
    <published>2023-08-06T10:48:12.000Z</published>
    <updated>2023-08-06T10:56:05.545Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Spring Bootæ•´åˆRestTemplateå®ç°æ¥å£è°ƒç”¨å…¥é—¨ã€‚</p><span id="more"></span><h2 id="ä»€ä¹ˆæ˜¯RestTemplate"><a href="#ä»€ä¹ˆæ˜¯RestTemplate" class="headerlink" title="ä»€ä¹ˆæ˜¯RestTemplate"></a>ä»€ä¹ˆæ˜¯RestTemplate</h2><p><code>RestTemplate</code>æ˜¯Springæ¡†æ¶ä¸­æä¾›çš„ç”¨äºä»¥åŒæ­¥æ–¹å¼å‘é€HTTPè¯·æ±‚å’Œå¤„ç†HTTPå“åº”çš„ç±»ã€‚å®ƒæ˜¯ä¸€ä¸ªç”¨äºè®¿é—®RESTfulæœåŠ¡çš„æ¨¡æ¿ç±»ï¼Œç®€åŒ–äº†åœ¨Javaåº”ç”¨ç¨‹åºä¸­è¿›è¡ŒHTTPé€šä¿¡çš„è¿‡ç¨‹ã€‚</p><p><code>RestTemplate</code>æä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•æ¥æ‰§è¡ŒHTTPè¯·æ±‚ï¼Œä¾‹å¦‚GETã€POSTã€PUTã€DELETEç­‰ï¼Œå¹¶èƒ½å¤Ÿè‡ªåŠ¨å°†HTTPå“åº”è½¬æ¢ä¸ºJavaå¯¹è±¡ï¼ˆå¦‚JSONè½¬æ¢ä¸ºPOJOï¼‰ã€‚å®ƒæ”¯æŒå„ç§HTTPåè®®ï¼Œå¦‚HTTPã€HTTPSï¼Œå¹¶ä¸”å¯ä»¥ä¸å…¶ä»–Springæ¡†æ¶ç»„ä»¶ï¼ˆå¦‚Spring MVCå’ŒSpring Bootï¼‰æ— ç¼é›†æˆã€‚</p><p>åº•å±‚å®ç°ä¸Šï¼Œ<code>RestTemplate</code>é»˜è®¤æ„é€ å‡½æ•°ä½¿ç”¨<code>java.net.HttpURLConnection</code>æ‰§è¡Œè¯·æ±‚ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å®ç°<code>ClientHttpRequestFactory</code>æ¥å£æ¥åˆ‡æ¢åˆ°ä¸åŒçš„HTTPåº“ã€‚å†…ç½®æ”¯æŒä»¥ä¸‹åº“ï¼š</p><ul><li>Apache HttpComponents</li><li>Netty</li><li>OkHttp</li></ul><h2 id="RestTemplateæä¾›çš„æ–¹æ³•"><a href="#RestTemplateæä¾›çš„æ–¹æ³•" class="headerlink" title="RestTemplateæä¾›çš„æ–¹æ³•"></a>RestTemplateæä¾›çš„æ–¹æ³•</h2><p>RestTemplate æä¾›é«˜åº¦å°è£…çš„æ¥å£ã€‚</p><div class="table-container"><table><thead><tr><th>æ–¹æ³•å</th><th>æè¿°</th></tr></thead><tbody><tr><td>getForObject</td><td>é€šè¿‡GETè¯·æ±‚è·å–èµ„æºçš„è¡¨ç¤ºã€‚</td></tr><tr><td>getForEntity</td><td>é€šè¿‡GETè¯·æ±‚è·å–èµ„æºçš„<code>ResponseEntity</code>ï¼ˆåŒ…å«çŠ¶æ€ã€å“åº”å¤´å’Œå“åº”ä½“ï¼‰ã€‚</td></tr><tr><td>headForHeaders</td><td>é€šè¿‡HEADè¯·æ±‚è·å–èµ„æºçš„æ‰€æœ‰å¤´ä¿¡æ¯ã€‚</td></tr><tr><td>postForLocation</td><td>é€šè¿‡POSTè¯·æ±‚åˆ›å»ºæ–°èµ„æºï¼Œå¹¶ä»å“åº”ä¸­è¿”å›Locationå¤´ä¿¡æ¯ã€‚</td></tr><tr><td>postForObject</td><td>é€šè¿‡POSTè¯·æ±‚åˆ›å»ºæ–°èµ„æºï¼Œå¹¶ä»å“åº”ä¸­è¿”å›èµ„æºçš„è¡¨ç¤ºã€‚</td></tr><tr><td>postForEntity</td><td>é€šè¿‡POSTè¯·æ±‚åˆ›å»ºæ–°èµ„æºï¼Œå¹¶ä»å“åº”ä¸­è¿”å›èµ„æºçš„<code>ResponseEntity</code>ï¼ˆåŒ…å«çŠ¶æ€ã€å“åº”å¤´å’Œå“åº”ä½“ï¼‰ã€‚</td></tr><tr><td>put</td><td>é€šè¿‡PUTè¯·æ±‚åˆ›å»ºæˆ–æ›´æ–°èµ„æºã€‚</td></tr><tr><td>patchForObject</td><td>é€šè¿‡PATCHè¯·æ±‚æ›´æ–°èµ„æºï¼Œå¹¶ä»å“åº”ä¸­è¿”å›èµ„æºçš„è¡¨ç¤ºã€‚è¯·æ³¨æ„ï¼ŒJDK HttpURLConnectionä¸æ”¯æŒPATCHï¼Œä½†Apache HttpComponentså’Œå…¶ä»–åº“æ”¯æŒã€‚</td></tr><tr><td>delete</td><td>é€šè¿‡DELETEè¯·æ±‚åˆ é™¤æŒ‡å®šURIçš„èµ„æºã€‚</td></tr><tr><td>optionsForAllow</td><td>é€šè¿‡OPTIONSè¯·æ±‚è·å–èµ„æºå…è®¸çš„HTTPæ–¹æ³•ã€‚</td></tr><tr><td>exchange</td><td>é€šç”¨çš„ï¼ˆçµæ´»ä½†ä¸å±€é™äºç‰¹å®šç”¨é€”ï¼‰è¯·æ±‚æ–¹æ³•ï¼Œæä¾›é¢å¤–çš„çµæ´»æ€§ã€‚å®ƒæ¥å—<code>RequestEntity</code>ä½œä¸ºè¾“å…¥ï¼Œå…¶ä¸­åŒ…å«HTTPæ–¹æ³•ã€URLã€å¤´ä¿¡æ¯å’Œè¯·æ±‚ä½“ï¼Œå¹¶è¿”å›<code>ResponseEntity</code>ã€‚</td></tr><tr><td>execute</td><td>æœ€é€šç”¨çš„æ‰§è¡Œè¯·æ±‚çš„æ–¹å¼ï¼Œå®Œå…¨æ§åˆ¶è¯·æ±‚å‡†å¤‡å’Œå“åº”æå–ï¼Œé€šè¿‡å›è°ƒæ¥å£å®ç°ã€‚</td></tr></tbody></table></div><h2 id="Springbootæ•´åˆRestTemplate"><a href="#Springbootæ•´åˆRestTemplate" class="headerlink" title="Springbootæ•´åˆRestTemplate"></a>Springbootæ•´åˆRestTemplate</h2><p>åˆ†åˆ«é‡‡ç”¨é»˜è®¤æ–¹å¼å’ŒApache HttpComponentsè¿›è¡Œå®è·µã€‚</p><h3 id="é»˜è®¤æ–¹å¼"><a href="#é»˜è®¤æ–¹å¼" class="headerlink" title="é»˜è®¤æ–¹å¼"></a>é»˜è®¤æ–¹å¼</h3><p>ä»…éœ€è¦ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- author: SilenceZheng66 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ·»åŠ é…ç½®ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestTemplateConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨æ§åˆ¶å™¨ä¸­åŠ å…¥<code>restTemplate</code>ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate;</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨Serviceä¸­åŠ å…¥ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ServiceImpl</span><span class="params">(RestTemplate restTemplate)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.restTemplate = restTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç¼–å†™ç®€å•çš„æ¥å£è®¿é—®ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">makeHttpGetRequest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String url = <span class="string">&quot;https://api.example.com/data&quot;</span>;</span><br><span class="line">    ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(url, String.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (response.getStatusCode().is2xxSuccessful()) &#123;</span><br><span class="line">        String responseBody = response.getBody();</span><br><span class="line">        <span class="comment">// å¤„ç†å“åº”æ•°æ®</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†é”™è¯¯å“åº”</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Apache-HttpComponentså‘é€è¯·æ±‚"><a href="#Apache-HttpComponentså‘é€è¯·æ±‚" class="headerlink" title="Apache HttpComponentså‘é€è¯·æ±‚"></a>Apache HttpComponentså‘é€è¯·æ±‚</h3><p>Apache HttpComponentsæ˜¯ä¸€ä¸ªå¼€æºçš„Java HTTPåº“ï¼Œç”¨äºå¤„ç†HTTPè¯·æ±‚å’Œå“åº”ã€‚å®ƒæ˜¯Apacheè½¯ä»¶åŸºé‡‘ä¼šä¸‹çš„ä¸€ä¸ªé¡¹ç›®ï¼Œæä¾›äº†ä¸€ç»„å¯é‡ç”¨çš„ç»„ä»¶ï¼Œå¯ä»¥è½»æ¾åœ°åœ¨Javaåº”ç”¨ç¨‹åºä¸­è¿›è¡ŒHTTPé€šä¿¡ã€‚</p><p>Apache HttpComponentsç”±ä¸¤ä¸ªå­é¡¹ç›®ç»„æˆï¼š</p><ol><li><p>HttpClientï¼šè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„HTTPå®¢æˆ·ç«¯åº“ï¼Œç”¨äºå‘é€HTTPè¯·æ±‚å’Œå¤„ç†HTTPå“åº”ã€‚å®ƒæä¾›äº†ä¸€ç»„ç®€å•è€Œå¼ºå¤§çš„APIï¼Œå¯ä»¥æ‰§è¡Œå„ç§HTTPæ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEç­‰ï¼‰ï¼Œè®¾ç½®è¯·æ±‚å¤´ï¼Œå¤„ç†å“åº”ï¼Œå¤„ç†Cookiesç­‰ã€‚</p></li><li><p>HttpCoreï¼šè¿™æ˜¯ä¸€ä¸ªæ ¸å¿ƒHTTPå¤„ç†åº“ï¼Œä¸ºHTTPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æä¾›äº†ä½çº§åˆ«çš„HTTPæ”¯æŒã€‚å®ƒå®šä¹‰äº†HTTPåè®®çš„åŸºæœ¬å…ƒç´ ï¼Œå¦‚è¯·æ±‚ã€å“åº”ã€å¤´éƒ¨ã€å®ä½“ç­‰ï¼Œä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å®ç°æä¾›äº†åŸºç¡€åŠŸèƒ½ã€‚</p></li></ol><p>æ·»åŠ HttpClientä¾èµ–ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- author: SilenceZheng66 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­å†™å…¥å‚æ•°ï¼š<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http_pool:</span></span><br><span class="line">  <span class="attr">max_total:</span> <span class="number">200</span></span><br><span class="line">  <span class="attr">default_max_per_route:</span> <span class="number">100</span></span><br><span class="line">  <span class="attr">connect_timeout:</span> <span class="number">5000</span></span><br><span class="line">  <span class="attr">connection_request_timeout:</span> <span class="number">1000</span></span><br><span class="line">  <span class="attr">socket_timeout:</span> <span class="number">65000</span></span><br><span class="line">  <span class="attr">validate_after_inactivity:</span> <span class="number">2000</span></span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºHTTPå‚æ•°ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpValues</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;http_pool.max_total&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxTotal;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;http_pool.default_max_per_route&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxPerRoute;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;http_pool.connect_timeout&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> connTimeOut;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;http_pool.connection_request_timeout&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> connReqTimeOut;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;http_pool.socket_timeout&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> socketTimeout;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;http_pool.validate_after_inactivity&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> inactivity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºé…ç½®ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestTemplateConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> HttpValues appValues;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate(httpRequestFactory());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ ClientHttpRequestFactory Beanã€‚</span></span><br><span class="line"><span class="comment">     * ClientHttpRequestFactory æ˜¯ Spring æä¾›çš„ç”¨äºåˆ›å»º ClientHttpRequest çš„å·¥å‚æ¥å£ã€‚</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œä½¿ç”¨äº†åŸºäº Apache HttpComponents çš„ HttpComponentsClientHttpRequestFactory å®ç°ã€‚</span></span><br><span class="line"><span class="comment">     * HttpComponentsClientHttpRequestFactory ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ HttpClient å¯¹è±¡æ¥å‘é€ HTTP è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›ä¸€ä¸ª ClientHttpRequestFactory å¯¹è±¡ï¼Œç”¨äºåˆ›å»º ClientHttpRequestã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ClientHttpRequestFactory <span class="title">httpRequestFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ HttpComponentsClientHttpRequestFactory å¯¹è±¡ï¼Œå¹¶ä¼ å…¥è‡ªå®šä¹‰çš„ HttpClientã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HttpComponentsClientHttpRequestFactory(httpClient());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ HttpClient Beanã€‚</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ–¹æ³•ä½¿ç”¨äº†è¿æ¥æ± æ¥ç®¡ç† HTTP è¿æ¥ï¼Œæé«˜äº†æ€§èƒ½å’Œæ•ˆç‡ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›ä¸€ä¸ª HttpClient å¯¹è±¡ï¼Œå¯ä»¥ç”¨äºå‘é€ HTTP è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HttpClient <span class="title">httpClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Registryï¼Œç”¨äºç®¡ç†ä¸åŒåè®®çš„è¿æ¥å·¥å‚ã€‚</span></span><br><span class="line">        Registry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()</span><br><span class="line">                <span class="comment">// æ³¨å†Œ HTTP åè®®çš„è¿æ¥å·¥å‚ï¼Œä½¿ç”¨é»˜è®¤çš„ PlainConnectionSocketFactoryã€‚</span></span><br><span class="line">                .register(<span class="string">&quot;http&quot;</span>, PlainConnectionSocketFactory.getSocketFactory())</span><br><span class="line">                <span class="comment">// æ³¨å†Œ HTTPS åè®®çš„è¿æ¥å·¥å‚ï¼Œä½¿ç”¨é»˜è®¤çš„ SSLConnectionSocketFactoryã€‚</span></span><br><span class="line">                .register(<span class="string">&quot;https&quot;</span>, SSLConnectionSocketFactory.getSocketFactory())</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªè¿æ¥æ± ç®¡ç†å™¨ï¼Œç”¨äºç®¡ç†è¿æ¥çš„å¤ç”¨å’Œå›æ”¶ã€‚</span></span><br><span class="line">        PoolingHttpClientConnectionManager connectionManager = <span class="keyword">new</span> PoolingHttpClientConnectionManager(registry);</span><br><span class="line">        <span class="comment">// è®¾ç½®è¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°ã€‚</span></span><br><span class="line">        connectionManager.setMaxTotal(appValues.getMaxTotal());</span><br><span class="line">        <span class="comment">// è®¾ç½®æ¯ä¸ªè·¯ç”±çš„æœ€å¤§è¿æ¥æ•°ã€‚</span></span><br><span class="line">        connectionManager.setDefaultMaxPerRoute(appValues.getMaxPerRoute());</span><br><span class="line">        <span class="comment">// è®¾ç½®è¿æ¥ç©ºé—²å¤šé•¿æ—¶é—´åè¿›è¡ŒéªŒè¯ï¼Œé¿å…ç©ºé—²è¿æ¥è¿‡å¤šå ç”¨èµ„æºã€‚</span></span><br><span class="line">        connectionManager.setValidateAfterInactivity(appValues.getInactivity());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªè¯·æ±‚é…ç½®å¯¹è±¡ï¼Œç”¨äºè®¾ç½®è¿æ¥è¶…æ—¶å’Œè¯»å†™è¶…æ—¶ç­‰å‚æ•°ã€‚</span></span><br><span class="line">        RequestConfig requestConfig = RequestConfig.custom()</span><br><span class="line">                <span class="comment">// æœåŠ¡å™¨è¿”å›æ•°æ®çš„æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´å°†æŠ›å‡º read timeout å¼‚å¸¸ã€‚</span></span><br><span class="line">                .setSocketTimeout(appValues.getSocketTimeout())</span><br><span class="line">                <span class="comment">// è¿æ¥ä¸ŠæœåŠ¡å™¨çš„æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´å°†æŠ›å‡º connect timeout å¼‚å¸¸ã€‚</span></span><br><span class="line">                .setConnectTimeout(appValues.getConnTimeOut())</span><br><span class="line">                <span class="comment">// ä»è¿æ¥æ± ä¸­è·å–è¿æ¥çš„è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´å°†æŠ›å‡º ConnectionPoolTimeoutException å¼‚å¸¸ã€‚</span></span><br><span class="line">                .setConnectionRequestTimeout(appValues.getConnReqTimeOut())</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ HttpClientBuilder åˆ›å»ºä¸€ä¸ª HttpClient å¯¹è±¡ï¼Œå¹¶è®¾ç½®è¿æ¥æ± ç®¡ç†å™¨å’Œè¯·æ±‚é…ç½®ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> HttpClientBuilder.create()</span><br><span class="line">                .setDefaultRequestConfig(requestConfig)</span><br><span class="line">                .setConnectionManager(connectionManager)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨ç¤ºä¾‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/students/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;Students&gt; <span class="title">getStudentById</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> </span>&#123;</span><br><span class="line">    Students student = studentsService.getById(id);</span><br><span class="line">    <span class="keyword">if</span> (student != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ‰¾åˆ°å­¦ç”Ÿï¼Œè¿”å›çŠ¶æ€ç 200 OKå’Œå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(student);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæœªæ‰¾åˆ°å­¦ç”Ÿï¼Œè¿”å›çŠ¶æ€ç 404 NOT FOUND</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.notFound().build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/rest/get/students+1/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">restGetTest</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span></span>&#123;</span><br><span class="line">    String url = <span class="string">&quot;http://localhost:48081/students/&quot;</span> + String.valueOf(id+<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// è¿™é‡Œåº”è¯¥åŠ å…¥å¼‚å¸¸å¤„ç†</span></span><br><span class="line">    ResponseEntity&lt;Students&gt; response = restTemplate.getForEntity(url, Students.class);</span><br><span class="line">    <span class="comment">// è·å–å“åº”</span></span><br><span class="line">    <span class="keyword">if</span> (response.getStatusCode().is2xxSuccessful()) &#123;</span><br><span class="line">        Students responseBody = response.getBody();</span><br><span class="line">        <span class="keyword">if</span> (responseBody!=<span class="keyword">null</span>) <span class="keyword">return</span> ResponseEntity.ok(responseBody.toString());</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> ResponseEntity.status(HttpStatus.NOT_FOUND).body(<span class="string">&quot;Not Found&quot;</span>);</span><br><span class="line">        <span class="comment">// å¤„ç†å“åº”æ•°æ®</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†é”™è¯¯å“åº”</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(<span class="string">&quot;Bad Request&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯¹äºå¸¦è·¯å¾„å‚æ•°çš„URLï¼Œå¯ä»¥ç”¨è¿™ç§æ–¹å¼ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line">String url = <span class="string">&quot;http://localhost:48081/students/&#123;1&#125;&quot;</span>;</span><br><span class="line">ResponseEntity&lt;Students&gt; response = restTemplate.getForEntity(url, Students.class, id+<span class="number">1</span>);</span><br></pre></td></tr></table></figure></p><p>å¯¹äºæ·»åŠ è¯·æ±‚å¤´ã€Cookieã€æ–‡ä»¶ä¸Šä¼ ç­‰ç­‰æ›´å¤šç”¨æ³•ï¼Œåœ¨ä½¿ç”¨æ—¶æŸ¥é˜…ã€ç§¯ç´¯å³å¯ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://docs.spring.io/spring-framework/docs/5.1.9.RELEASE/spring-framework-reference/integration.html#rest-resttemplate">https://docs.spring.io/spring-framework/docs/5.1.9.RELEASE/spring-framework-reference/integration.html#rest-resttemplate</a><br>[2] <a href="https://zhuanlan.zhihu.com/p/258121569">https://zhuanlan.zhihu.com/p/258121569</a><br>[3] <a href="https://www.cnblogs.com/javazhiyin/p/9851775.html">https://www.cnblogs.com/javazhiyin/p/9851775.html</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Spring Bootæ•´åˆRestTemplateå®ç°æ¥å£è°ƒç”¨å…¥é—¨ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="http://silencezheng.top/tags/Java/"/>
    
    <category term="Spring" scheme="http://silencezheng.top/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>MinIOéƒ¨ç½²--SpringBootæ–‡ä»¶å­˜å‚¨æ•´åˆ</title>
    <link href="http://silencezheng.top/2023/07/23/article111/"/>
    <id>http://silencezheng.top/2023/07/23/article111/</id>
    <published>2023-07-23T14:36:32.000Z</published>
    <updated>2023-08-06T10:56:18.244Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>MinIOå¯¹è±¡å­˜å‚¨æœåŠ¡å¼€å‘æœºéƒ¨ç½²ä¸Spring Booté¡¹ç›®æ•´åˆå…¥é—¨ã€‚<br><span id="more"></span></p><h2 id="MinIO"><a href="#MinIO" class="headerlink" title="MinIO"></a>MinIO</h2><blockquote><p>MinIO æ˜¯ä¸€ä¸ªåŸºäº Go å®ç°çš„é«˜æ€§èƒ½ã€å…¼å®¹ S3 åè®®çš„å¯¹è±¡å­˜å‚¨ã€‚å®ƒé‡‡ç”¨ GNU AGPL v3 å¼€æºåè®®ï¼Œé¡¹ç›®åœ°å€æ˜¯ <a href="https://github.com/minio/minioï¼Œå®˜ç½‘æ˜¯">https://github.com/minio/minioï¼Œå®˜ç½‘æ˜¯</a> <a href="https://min.ioã€‚">https://min.ioã€‚</a></p><p>å®ƒé€‚åˆå­˜å‚¨æµ·é‡çš„éç»“æ„åŒ–çš„æ•°æ®ï¼Œä¾‹å¦‚è¯´å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å¸¸è§æ–‡ä»¶ï¼Œå¤‡ä»½æ•°æ®ã€å®¹å™¨ã€è™šæ‹Ÿæœºé•œåƒç­‰ç­‰ï¼Œå°åˆ° 1 KBï¼Œå¤§åˆ° 5 TB éƒ½å¯ä»¥æ”¯æŒã€‚</p></blockquote><h2 id="MinIOçš„è¿è¡Œæ¨¡å¼"><a href="#MinIOçš„è¿è¡Œæ¨¡å¼" class="headerlink" title="MinIOçš„è¿è¡Œæ¨¡å¼"></a>MinIOçš„è¿è¡Œæ¨¡å¼</h2><p>MinIO æ”¯æŒä¸‰ç§éƒ¨ç½²æ‹“æ‰‘ç»“æ„ï¼š</p><ol><li><p>å•èŠ‚ç‚¹å•é©±åŠ¨<br>Single-Node Single-Driveï¼Œä¹Ÿå¯ç§°ä¸ºSNSD æˆ– â€œStandaloneâ€ã€‚</p><p>æŒ‡å…·æœ‰å•ä¸ªå­˜å‚¨å·æˆ–æ–‡ä»¶å¤¹çš„å•ä¸ª MinIO æœåŠ¡å™¨ã€‚ SNSDéƒ¨ç½²æä¾›æ•…éšœè½¬ç§»ä¿æŠ¤ã€‚é©±åŠ¨å™¨çº§å¯é æ€§å’Œæ•…éšœè½¬ç§»å–å†³äºåº•å±‚å­˜å‚¨å·ã€‚SNSDéƒ¨ç½²æœ€é€‚åˆä½¿ç”¨ MinIO è¿›è¡Œå¯¹è±¡å­˜å‚¨çš„åº”ç”¨ç¨‹åºçš„è¯„ä¼°å’Œåˆå§‹å¼€å‘ã€‚</p></li><li><p>å•èŠ‚ç‚¹å¤šé©±åŠ¨<br>Single-Node Multi-Driveï¼Œä¹Ÿå¯ç§°ä¸ºSNMD æˆ– â€œStandalone Multi-Driveâ€ã€‚</p><p>æŒ‡å…·æœ‰å››ä¸ªæˆ–æ›´å¤šå­˜å‚¨å·çš„å•ä¸ª MinIO æœåŠ¡å™¨ã€‚ SNMDéƒ¨ç½²ä»…æä¾›é©±åŠ¨å™¨çº§å¯é æ€§å’Œæ•…éšœè½¬ç§»ã€‚</p></li><li><p>å¤šèŠ‚ç‚¹å¤šé©±åŠ¨<br>Multi-Node Multi-Driveï¼Œä¹Ÿå¯ç§°ä¸ºMNMD æˆ– â€œDistributedâ€ã€‚</p><p>æŒ‡åˆ†å¸ƒå¼ MinIO æœåŠ¡å™¨ï¼Œæ‰€æœ‰æœåŠ¡å™¨ä¸Šè‡³å°‘æœ‰å››ä¸ªé©±åŠ¨å™¨ã€‚åˆ†å¸ƒå¼MNMDæ‹“æ‰‘æ”¯æŒå…·æœ‰é©±åŠ¨å™¨å’ŒèŠ‚ç‚¹çº§å¯ç”¨æ€§å’Œå¼¹æ€§çš„ç”Ÿäº§çº§å¯¹è±¡å­˜å‚¨ã€‚</p></li></ol><p>ä½œä¸ºå…¥é—¨éƒ¨ç½²ï¼Œä¸‹é¢ä»…å±•ç¤ºSNSDéƒ¨ç½²ã€‚</p><h2 id="å®‰è£…éƒ¨ç½²"><a href="#å®‰è£…éƒ¨ç½²" class="headerlink" title="å®‰è£…éƒ¨ç½²"></a>å®‰è£…éƒ¨ç½²</h2><p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://min.io/download">https://min.io/download</a></p><p>ä»…è€ƒè™‘å¼€å‘ç¯å¢ƒï¼Œç”¨Dockeréƒ¨ç½²æ˜¯æœ€æ–¹ä¾¿çš„ï¼Œä¸‹é¢æ˜¯éƒ¨ç½²è¿‡ç¨‹ã€‚</p><p>Dockeréƒ¨ç½²ï¼ˆMacOS arm64ï¼‰ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹minioé•œåƒ</span></span><br><span class="line">docker search minio</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹‰å–é•œåƒ</span></span><br><span class="line">docker pull minio/minio</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæœ¬åœ°è·¯å¾„</span></span><br><span class="line">mkdir myminio myminio/config myminio/data</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶</span></span><br><span class="line">touch myminio/config/config.env</span><br><span class="line"></span><br><span class="line"><span class="comment"># config.envå†™å…¥å†…å®¹å¦‚ä¸‹</span></span><br><span class="line"><span class="comment"># è®¾ç½® MinIO æœåŠ¡å™¨çš„rootè´¦å·ï¼Œæ­¤ç”¨æˆ·å…·æœ‰å¯¹éƒ¨ç½²ä¸­çš„ä»»ä½•èµ„æºæ‰§è¡Œ S3 å’Œç®¡ç† API æ“ä½œçš„ä¸å—é™åˆ¶çš„æƒé™ã€‚</span></span><br><span class="line">MINIO_ROOT_USER=myminioadmin</span><br><span class="line"><span class="comment"># è‡³å°‘8ä½</span></span><br><span class="line">MINIO_ROOT_PASSWORD=minio-secret-key-change-me</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç”¨äº MinIO æœåŠ¡å™¨çš„å­˜å‚¨è·¯å¾„ã€‚</span></span><br><span class="line">MINIO_VOLUMES=<span class="string">&quot;/mnt/data&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MINIO_SERVER_URLè®¾ç½®æœ¬åœ°æœºå™¨çš„ä¸»æœºåä»¥ç”¨äº MinIO æœåŠ¡å™¨</span></span><br><span class="line"><span class="comment"># å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œï¼Œå¹¶å°†è¯¥å€¼æ›¿æ¢ä¸ºæœ¬åœ°æœºå™¨çš„æ­£ç¡®ä¸»æœºåå’Œ MinIO æœåŠ¡å™¨çš„ç«¯å£ï¼ˆé»˜è®¤ä¸º 9000ï¼‰</span></span><br><span class="line"><span class="comment">#MINIO_SERVER_URL=&quot;http://minio.example.net:9000&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker run -dt                                  \</span><br><span class="line">  -p 9000:9000 -p 9090:9090                     \</span><br><span class="line">  -v /path/to/myminio/data:/mnt/data            \</span><br><span class="line">  -v /path/to/myminio/config:/etc               \</span><br><span class="line">  -e <span class="string">&quot;MINIO_CONFIG_ENV_FILE=/etc/config.env&quot;</span>    \</span><br><span class="line">  --name <span class="string">&quot;myminio&quot;</span>                              \</span><br><span class="line">  minio/minio server --console-address <span class="string">&quot;:9090&quot;</span></span><br></pre></td></tr></table></figure></p><p>MinIOä¸­é»˜è®¤é…ç½®9000ç«¯å£æ˜¯ç”¨äºè®¿é—®MinIOçš„å¯¹è±¡å­˜å‚¨æœåŠ¡çš„APIç«¯å£ï¼Œé€šè¿‡è¯¥ç«¯å£å¯ä»¥æ‰§è¡Œå„ç§å¯¹è±¡å­˜å‚¨ç›¸å…³çš„æ“ä½œã€‚è€Œ9090ç«¯å£æ˜¯ç”¨äºè®¿é—®MinIOçš„ç®¡ç†ç•Œé¢ï¼Œé€šè¿‡è¯¥ç«¯å£å¯ä»¥ç™»å½•å¹¶æ‰§è¡ŒMinIOå®ä¾‹çš„ç®¡ç†æ“ä½œã€‚</p><h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><p>è¿è¡Œå®¹å™¨æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡MinIOçš„ç®¡ç†ç•Œé¢è¿›è¡Œç®€å•é…ç½®ï¼Œè®¿é—® <a href="http://localhost:9090">http://localhost:9090</a> è¿›å…¥ç®¡ç†ç•Œé¢ã€‚</p><p><img src="/assets/post_img/article111/shouye.png" alt="é¦–é¡µ"></p><p>ç„¶åæ–°å»ºå­˜å‚¨æ¡¶ï¼Œç”¨äºæ–‡ä»¶ä¸Šä¼ ã€‚ç‚¹å‡»æ¡¶ï¼Œé€‰æ‹©<code>Anonymoous</code>åˆ›å»ºä¸€æ¡Prefixä¸º<code>/</code>ï¼ŒAccessä¸º<code>readonly</code>çš„åŒ¿åè®¿é—®è§„åˆ™ã€‚</p><p><img src="/assets/post_img/article111/mybucket.png" alt="è§„åˆ™"></p><p>è¿™æ ·é…ç½®ä»¥åï¼Œæ–‡ä»¶è®¿é—®åœ°å€çš„æ ¼å¼ä¸º<code>http://localhost:9000/mybucket/&#123;filename&#125;</code>ã€‚</p><p>å¦å¤–ï¼ŒMinIO Client (mc) æ˜¯ MinIO æä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºè®¿é—® MinIO Serverã€‚å®ƒçš„å‘½ä»¤è®¾è®¡çš„éå¸¸æ£’ï¼Œå’Œæˆ‘ä»¬åœ¨ä½¿ç”¨ lsã€catã€cpã€mirrorã€diffã€find ç­‰ Unix å‘½ä»¤åŸºæœ¬æ¥è¿‘ï¼Œä¸»è¦å¦‚ä¸‹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span>       åˆ—å‡ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹</span><br><span class="line">mb       åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶æˆ–ä¸€ä¸ªæ–‡ä»¶å¤¹</span><br><span class="line"><span class="built_in">cat</span>      æ˜¾ç¤ºæ–‡ä»¶å’Œå¯¹è±¡å†…å®¹</span><br><span class="line">pipe     å°†ä¸€ä¸ª STDIN é‡å®šå‘åˆ°ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ–‡ä»¶æˆ–è€… STDOUT</span><br><span class="line">share    ç”Ÿæˆç”¨äºå…±äº«çš„ URL</span><br><span class="line"><span class="built_in">cp</span>       æ‹·è´æ–‡ä»¶å’Œå¯¹è±¡</span><br><span class="line">mirror   ç»™å­˜å‚¨æ¡¶å’Œæ–‡ä»¶å¤¹åšé•œåƒ</span><br><span class="line">find     åŸºäºå‚æ•°æŸ¥æ‰¾æ–‡ä»¶</span><br><span class="line"><span class="built_in">diff</span>     å¯¹ä¸¤ä¸ªæ–‡ä»¶å¤¹æˆ–è€…å­˜å‚¨æ¡¶æ¯”è¾ƒå·®å¼‚</span><br><span class="line"><span class="built_in">rm</span>       åˆ é™¤æ–‡ä»¶å’Œå¯¹è±¡</span><br><span class="line">events   ç®¡ç†å¯¹è±¡é€šçŸ¥</span><br><span class="line">watch    ç›‘å¬æ–‡ä»¶å’Œå¯¹è±¡çš„äº‹ä»¶</span><br><span class="line">policy   ç®¡ç†è®¿é—®ç­–ç•¥</span><br><span class="line">session  ä¸º <span class="built_in">cp</span> å‘½ä»¤ç®¡ç†ä¿å­˜çš„ä¼šè¯</span><br><span class="line">config   ç®¡ç† mc é…ç½®æ–‡ä»¶</span><br><span class="line">update   æ£€æŸ¥è½¯ä»¶æ›´æ–°</span><br><span class="line">version  è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ä¸¾ä¾‹ï¼šåˆ—å‡ºæœ‰å“ªäº›å­˜å‚¨æ¡¶</span></span><br><span class="line">mc <span class="built_in">ls</span></span><br></pre></td></tr></table></figure><h2 id="æ•´åˆSpring-Booté¡¹ç›®"><a href="#æ•´åˆSpring-Booté¡¹ç›®" class="headerlink" title="æ•´åˆSpring Booté¡¹ç›®"></a>æ•´åˆSpring Booté¡¹ç›®</h2><p>ä¸‹é¢åœ¨Spring Booté¡¹ç›®å¼•å…¥MinIOç›¸å…³ä¾èµ–å®ç°æ–‡ä»¶çš„ä¸Šä¼ ä¸åˆ é™¤çš„åŠŸèƒ½ã€‚</p><p>å¼•å…¥ä¾èµ–å¦‚ä¸‹ã€‚<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MinIO å®¢æˆ·ç«¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.minio<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>minio<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ–°å»º <code>MinIOConfiguration</code> é…ç½®ç±»ï¼Œåˆ›å»º <code>MinioClient Bean</code>ï¼Œå¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.minio.MinioClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MinIOConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MinioClient <span class="title">minioClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Minio é…ç½®ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œå®šä¹‰åˆ° application.yml é…ç½®æ–‡ä»¶ä¸­</span></span><br><span class="line">        String endpoint = <span class="string">&quot;http://localhost:9000&quot;</span>;</span><br><span class="line">        String accessKey = <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">        String secretKey = <span class="string">&quot;password&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»º MinioClient å®¢æˆ·ç«¯</span></span><br><span class="line">        <span class="keyword">return</span> MinioClient.builder()</span><br><span class="line">                .endpoint(endpoint)</span><br><span class="line">                .credentials(accessKey, secretKey)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–°å»º <code>MinIOFileController</code> ç±»ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ ä¸åˆ é™¤çš„ RESTful API æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/minio&quot;)</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;MinIOæ–‡ä»¶æ“ä½œæ¥å£&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MinIOFileController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MinioClient minioClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Minio é…ç½®ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œå®šä¹‰åˆ° application.yml é…ç½®æ–‡ä»¶ä¸­</span></span><br><span class="line">    <span class="keyword">private</span> String endpoint = <span class="string">&quot;http://127.0.0.1:9000&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String bucket = <span class="string">&quot;mybucket&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸Šä¼ </span></span><br><span class="line">        String path = UUID.randomUUID().toString(); <span class="comment">// æ–‡ä»¶åï¼Œä½¿ç”¨ UUID éšæœº</span></span><br><span class="line">        minioClient.putObject(PutObjectArgs.builder()</span><br><span class="line">                .bucket(bucket) <span class="comment">// å­˜å‚¨æ¡¶</span></span><br><span class="line">                .object(path) <span class="comment">// æ–‡ä»¶å</span></span><br><span class="line">                .stream(file.getInputStream(), file.getSize(), -<span class="number">1</span>) <span class="comment">// æ–‡ä»¶å†…å®¹</span></span><br><span class="line">                .contentType(file.getContentType()) <span class="comment">// æ–‡ä»¶ç±»å‹</span></span><br><span class="line">                .build());</span><br><span class="line">        <span class="comment">// æ‹¼æ¥è·¯å¾„</span></span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">&quot;%s/%s/%s&quot;</span>, endpoint, bucket, path);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="meta">@RequestParam(&quot;path&quot;)</span> String path)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        minioClient.removeObject(RemoveObjectArgs.builder()</span><br><span class="line">                .bucket(bucket) <span class="comment">// å­˜å‚¨æ¡¶</span></span><br><span class="line">                .object(path) <span class="comment">// æ–‡ä»¶å</span></span><br><span class="line">                .build());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å¼€Swaggerç•Œé¢å°±å¯ä»¥è¿›è¡Œæ¥å£æµ‹è¯•äº†ï¼Œä¸Šä¼ è¿”å›ç»“æœç¤ºä¾‹å¦‚ä¸‹ã€‚<br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http</span>://<span class="number">127.0.0.1:9000</span>/mybucket/a<span class="number">72</span>a<span class="number">02</span>c<span class="number">5</span>-<span class="number">4</span>dff-<span class="number">44</span>d<span class="number">8</span>-<span class="number">841</span>b-ad<span class="number">5</span>a<span class="number">3</span>b<span class="number">4</span>c<span class="number">5</span>b<span class="number">71</span></span><br></pre></td></tr></table></figure></p><p>ç›´æ¥æµè§ˆå™¨è¾“å…¥åœ°å€å°±å¯ä»¥çœ‹åˆ°ï¼Œæˆ–è€…åœ¨ç®¡ç†ç•Œé¢æŸ¥çœ‹ã€‚</p><p><img src="/assets/post_img/article111/upload.png" alt="ä¸Šä¼ "></p><p>åˆ é™¤æ—¶ï¼Œä»¥æ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°è¾“å…¥å³å¯ï¼Œå¦‚<code>a72a02c5-4dff-44d8-841b-ad5a3b4c5b71</code>ã€‚</p><h2 id="ä¸Šä¼ å¤§æ–‡ä»¶"><a href="#ä¸Šä¼ å¤§æ–‡ä»¶" class="headerlink" title="ä¸Šä¼ å¤§æ–‡ä»¶"></a>ä¸Šä¼ å¤§æ–‡ä»¶</h2><p>å¦‚æœæœ‰ä¸Šä¼ å¤§æ–‡ä»¶çš„éœ€æ±‚ï¼Œåœ¨æ²¡æœ‰é…ç½®ç±»çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½®ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">servlet:</span></span><br><span class="line">      <span class="attr">multipart:</span></span><br><span class="line">        <span class="attr">max-file-size:</span> <span class="string">500MB</span></span><br><span class="line">        <span class="attr">max-request-size:</span> <span class="string">500MB</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://min.io/docs/minio/container/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html">https://min.io/docs/minio/container/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html</a><br>[2] <a href="https://www.iocoder.cn/Spring-Boot/MinIO/?yudao">https://www.iocoder.cn/Spring-Boot/MinIO/?yudao</a><br>[3] <a href="https://blog.csdn.net/BThinker/article/details/125412751">https://blog.csdn.net/BThinker/article/details/125412751</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;MinIOå¯¹è±¡å­˜å‚¨æœåŠ¡å¼€å‘æœºéƒ¨ç½²ä¸Spring Booté¡¹ç›®æ•´åˆå…¥é—¨ã€‚&lt;br&gt;</summary>
    
    
    
    
    <category term="Java" scheme="http://silencezheng.top/tags/Java/"/>
    
    <category term="Spring" scheme="http://silencezheng.top/tags/Spring/"/>
    
    <category term="MinIO" scheme="http://silencezheng.top/tags/MinIO/"/>
    
  </entry>
  
  <entry>
    <title>Gitæ¢è¡Œç¬¦è­¦å‘Šæ’æŸ¥è®°å½•</title>
    <link href="http://silencezheng.top/2023/07/22/article110/"/>
    <id>http://silencezheng.top/2023/07/22/article110/</id>
    <published>2023-07-22T13:26:10.000Z</published>
    <updated>2023-07-22T13:28:10.348Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½¿ç”¨Gitä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™æç¤º<code>warning: in the working copy of &#39;xxx&#39;, CRLF will be replaced by LF the next time Git touches it</code><br><span id="more"></span></p><h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><p><code>warning: in the working copy of &#39;xxx&#39;, CRLF will be replaced by LF the next time Git touches it</code>è¡¨ç¤ºGitæ£€æµ‹åˆ°åœ¨å½“å‰ä»£ç åº“ä¸­å­˜åœ¨ä¸åŒçš„æ¢è¡Œç¬¦é£æ ¼ï¼Œå®ƒæŒ‡å‡ºGitåœ¨ä¸‹æ¬¡å¤„ç†æ–‡ä»¶æ—¶å°†æ›¿æ¢CRLFï¼ˆå›è½¦+æ¢è¡Œï¼‰æ¢è¡Œç¬¦ä¸ºLFï¼ˆä»…æ¢è¡Œï¼‰æ¢è¡Œç¬¦ã€‚</p><p>æˆ‘æ˜¯åœ¨ä½¿ç”¨Hexoä¸Šä¼ æ—¶å‡ºç°è¯¥é—®é¢˜çš„ï¼Œç›¸å…³æ–‡ä»¶ä¸ºæ–‡ç« å¯¹åº”çš„index.htmlï¼Œå› æ­¤å¯èƒ½æ˜¯hexoç”Ÿæˆäº†CRLFæ¢è¡Œçš„htmlæ–‡ä»¶å¯¼è‡´ã€‚</p><h2 id="æ£€æŸ¥é—®é¢˜æ–‡ä»¶"><a href="#æ£€æŸ¥é—®é¢˜æ–‡ä»¶" class="headerlink" title="æ£€æŸ¥é—®é¢˜æ–‡ä»¶"></a>æ£€æŸ¥é—®é¢˜æ–‡ä»¶</h2><p><code>hexo clean</code> åé‡æ–°ç”Ÿæˆé¡µé¢ï¼Œæ£€æŸ¥é—®é¢˜é¡µé¢å¦‚ä¸‹ï¼Œæœªå‘ç°é—®é¢˜ï¼Œéƒ½æ˜¯LFæ¢è¡Œçš„æ–‡ä»¶ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">% od -c index.html</span><br><span class="line"></span><br><span class="line">0000000    &lt;   !   D   O   C   T   Y   P   E       h   t   m   l   &gt;  \n</span><br><span class="line">0000020    &lt;   h   t   m   l   &gt;  \n   &lt;   h   e   a   d   &gt;  \n        </span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><h2 id="æ£€æŸ¥Gité…ç½®"><a href="#æ£€æŸ¥Gité…ç½®" class="headerlink" title="æ£€æŸ¥Gité…ç½®"></a>æ£€æŸ¥Gité…ç½®</h2><p>å…ˆåœ¨égitç›®å½•ä¸‹æ£€æŸ¥äº†å…¨å±€é…ç½®<code>git config --list</code>å¦‚ä¸‹ï¼ŒæŒ‰é“ç†æ¥è¯´æ²¡ä»€ä¹ˆé—®é¢˜ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">core.autocrlf=input</span><br></pre></td></tr></table></figure><blockquote><p><code>core.autocrlf</code>æ˜¯Gitä¸­çš„ä¸€ä¸ªé…ç½®é€‰é¡¹ï¼Œç”¨äºå¤„ç†è·¨å¹³å°å¼€å‘æ—¶çš„æ¢è¡Œç¬¦é—®é¢˜ã€‚å®ƒç”¨äºæŒ‡å®šGitåœ¨æäº¤å’Œæ£€å‡ºæ–‡ä»¶æ—¶æ˜¯å¦è‡ªåŠ¨è½¬æ¢æ¢è¡Œç¬¦çš„è¡Œä¸ºã€‚å¯¹äºå¤šå¹³å°åä½œçš„é¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯åœ¨Windowså’Œç±»Unixç³»ç»Ÿï¼ˆå¦‚MacOSå’ŒLinuxï¼‰ä¹‹é—´è¿›è¡Œå¼€å‘æ—¶ï¼Œé…ç½®<code>core.autocrlf</code>å¯ä»¥ç¡®ä¿æ¢è¡Œç¬¦çš„ä¸€è‡´æ€§ï¼Œé¿å…åœ¨ç‰ˆæœ¬æ§åˆ¶æ—¶é¢‘ç¹æ›´æ”¹æ¢è¡Œç¬¦å¯¼è‡´çš„å†²çªã€‚</p><p><code>core.autocrlf</code>æœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼š</p><ol><li><code>true</code>ï¼šè¡¨ç¤ºGitä¼šåœ¨æäº¤æ—¶å°†CRLFï¼ˆå›è½¦+æ¢è¡Œï¼‰è½¬æ¢ä¸ºLFï¼ˆä»…æ¢è¡Œï¼‰ï¼Œåœ¨æ£€å‡ºæ—¶å°†LFè½¬æ¢ä¸ºCRLFã€‚é€‚ç”¨äºWindowså¼€å‘è€…åœ¨ä¸ç±»Unixç³»ç»Ÿçš„å¼€å‘è€…åˆä½œæ—¶ä½¿ç”¨ã€‚</li><li><code>false</code>ï¼šè¡¨ç¤ºGitä¸ä¼šè‡ªåŠ¨è½¬æ¢æ¢è¡Œç¬¦ã€‚é€‚ç”¨äºåœ¨Unixç±»ç³»ç»Ÿä¸Šå¼€å‘ï¼Œæˆ–è€…ç¡®ä¿æ–‡ä»¶çš„æ¢è¡Œç¬¦ä¿æŒä¸å˜æ—¶ä½¿ç”¨ã€‚</li><li><code>input</code>ï¼šè¡¨ç¤ºGitä¼šåœ¨æäº¤æ—¶å°†CRLFè½¬æ¢ä¸ºLFï¼Œåœ¨æ£€å‡ºæ—¶ä¸åšä»»ä½•è½¬æ¢ã€‚é€‚ç”¨äºåœ¨Windowsä¸Šå¼€å‘ï¼Œä½†åœ¨ç‰ˆæœ¬åº“ä¸­ä¿ç•™LFæ¢è¡Œç¬¦çš„é¡¹ç›®ã€‚</li></ol></blockquote><p>åˆåˆ°hexoæ ¹ç›®å½•ä¸‹çš„<code>.deploy_git</code>æŸ¥çœ‹äº†ï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œè¿™ä¸ªé…ç½®åº”è¯¥ä¸ä¼šå‡ºä»€ä¹ˆé—®é¢˜ã€‚</p><h2 id="æ£€æŸ¥Gitå†å²æäº¤"><a href="#æ£€æŸ¥Gitå†å²æäº¤" class="headerlink" title="æ£€æŸ¥Gitå†å²æäº¤"></a>æ£€æŸ¥Gitå†å²æäº¤</h2><p>åˆç»§ç»­äº†è§£äº†ä¸€ä¸‹ï¼Œä¼¼ä¹å†å²æäº¤ä¸­å‡ºç°è¿‡CRLFæ¢è¡Œçš„æ–‡ä»¶ä¹Ÿä¼šæ˜¾ç¤ºè¯¥è­¦å‘Šï¼Œäºæ˜¯å»æŸ¥çœ‹å†å²æäº¤è®°å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> -p -- filename</span><br></pre></td></tr></table></figure><p>ç¿»çœ‹è®°å½•ï¼Œå‡ºç°çº¢è‰²<code>^M</code>åˆ™æ˜¯åŒ…å«CRLFçš„åœ°æ–¹ï¼Œçœ‹åˆ°ä¹‹å‰åœ¨Windowsç”µè„‘ä¸Šé…ç½®çš„Gitalkæ’ä»¶æ˜¯CRLFæ ¼å¼çš„ã€‚</p><p>é‚ä¿®æ”¹ï¼Œè§£å†³ã€‚å…¶å®ç¬¬ä¸€æ­¥å°±èƒ½è§£å†³äº†ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™å¿˜è®°ç›´æ¥æœ<code>\r</code>äº†â€¦</p><h2 id="CRå’ŒLF"><a href="#CRå’ŒLF" class="headerlink" title="CRå’ŒLF"></a>CRå’ŒLF</h2><p>CRï¼ˆCarriage Returnï¼‰å’ŒLFï¼ˆLine Feedï¼‰æ˜¯ä¸¤ä¸ªæ§åˆ¶å­—ç¬¦ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºæ–‡æœ¬æ–‡ä»¶ä¸­çš„è¡Œå°¾ã€‚</p><ol><li><p><strong>CRï¼ˆCarriage Returnï¼‰</strong>ï¼š</p><ul><li>åœ¨ASCIIç ä¸­ï¼ŒCRçš„å€¼ä¸ºåè¿›åˆ¶13æˆ–åå…­è¿›åˆ¶0x0Dã€‚</li><li>CRé€šå¸¸è¡¨ç¤ºä¸º<code>\r</code>ã€‚</li><li>åœ¨æ—©æœŸçš„æ‰“å­—æœºå’Œç»ˆç«¯è®¾å¤‡ä¸­ï¼ŒCRç”¨äºå°†æ‰“å°å¤´æˆ–å…‰æ ‡ç§»åŠ¨åˆ°è¡Œçš„å¼€å¤´ï¼Œä»¥ä¾¿åœ¨æ–°çš„æ–‡æœ¬è¾“å…¥å¼€å§‹æ—¶è¦†ç›–ä¹‹å‰çš„å†…å®¹ã€‚</li><li>åœ¨è®¡ç®—æœºæ–‡æœ¬ä¸­ï¼ŒCRé€šå¸¸ç”¨äºè¡¨ç¤ºè¡Œå°¾ï¼Œå³åœ¨CRä¹‹åçš„å†…å®¹å°†ä»æ–°çš„ä¸€è¡Œå¼€å§‹ã€‚åœ¨æŸäº›æ“ä½œç³»ç»Ÿä¸­ï¼ˆå¦‚Mac OS 9åŠä¹‹å‰ç‰ˆæœ¬ï¼‰ï¼ŒCRè¢«ç”¨ä½œè¡Œå°¾ç¬¦ã€‚</li></ul></li><li><p><strong>LFï¼ˆLine Feedï¼‰</strong>ï¼š</p><ul><li>åœ¨ASCIIç ä¸­ï¼ŒLFçš„å€¼ä¸ºåè¿›åˆ¶10æˆ–åå…­è¿›åˆ¶0x0Aã€‚</li><li>LFé€šå¸¸è¡¨ç¤ºä¸º<code>\n</code>ã€‚</li><li>LFåœ¨è®¡ç®—æœºæ–‡æœ¬ä¸­å¹¿æ³›ç”¨äºè¡¨ç¤ºè¡Œå°¾ï¼Œå³åœ¨LFä¹‹åçš„å†…å®¹å°†ä»æ–°çš„ä¸€è¡Œå¼€å§‹ã€‚åœ¨Unixã€Linuxå’Œç°ä»£Mac OSç­‰æ“ä½œç³»ç»Ÿä¸­ï¼ŒLFé€šå¸¸è¢«ç”¨ä½œè¡Œå°¾ç¬¦ã€‚</li></ul></li></ol><p>åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œå¯¹äºæ–‡æœ¬æ–‡ä»¶çš„è¡Œå°¾è¡¨ç¤ºæ–¹å¼å¯èƒ½ä¸åŒï¼š</p><ul><li>Unix/Linux/MacOSä½¿ç”¨LFï¼ˆ<code>\n</code>ï¼‰ä½œä¸ºè¡Œå°¾ç¬¦ã€‚</li><li>Windowsä½¿ç”¨CRLFï¼ˆ<code>\r\n</code>   ï¼‰ä½œä¸ºè¡Œå°¾ç¬¦ã€‚</li></ul><p>åœ¨è·¨å¹³å°å¼€å‘æˆ–å¤„ç†æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œæ³¨æ„è¡Œå°¾ç¬¦çš„å·®å¼‚å¯èƒ½æ˜¯å¾ˆé‡è¦çš„ã€‚ç°ä»£çš„æ–‡æœ¬ç¼–è¾‘å™¨å’Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé€šå¸¸èƒ½å¤Ÿè¯†åˆ«å’Œå¤„ç†ä¸åŒè¡Œå°¾ç¬¦çš„æ–‡ä»¶ã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨Gitä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™æç¤º&lt;code&gt;warning: in the working copy of &amp;#39;xxx&amp;#39;, CRLF will be replaced by LF the next time Git touches it&lt;/code&gt;&lt;br&gt;</summary>
    
    
    
    
    <category term="Git" scheme="http://silencezheng.top/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Lombokå¸¸ç”¨æ³¨è§£</title>
    <link href="http://silencezheng.top/2023/07/22/article109/"/>
    <id>http://silencezheng.top/2023/07/22/article109/</id>
    <published>2023-07-22T11:24:40.000Z</published>
    <updated>2023-07-22T11:25:51.378Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ•´ç†ä¸€äº›Lombokçš„å¸¸ç”¨æ³¨è§£å’Œæ³¨æ„äº‹é¡¹ï¼ˆå‡ ä¹åŒ…å«æ‰€æœ‰ä¸»æµæ³¨è§£äº†ï¼‰ã€‚</p><span id="more"></span><blockquote><p>Lombokæ˜¯é€šè¿‡åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œå­—èŠ‚ç å¢å¼ºå®ç°çš„ï¼Œå®ƒåˆ©ç”¨Javaçš„æ³¨è§£å¤„ç†å™¨æœºåˆ¶ï¼Œæ ¹æ®æ³¨è§£ç”Ÿæˆç›¸åº”çš„ä»£ç ï¼Œå¯ä»¥å¤§å¹…å‡å°‘ Java ä»£ç çš„å†—ä½™å’Œé‡å¤ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p></blockquote><h2 id="Data"><a href="#Data" class="headerlink" title="@Data"></a>@Data</h2><p><code>@Data</code> æ˜¯ Lombok æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…å«äº†ä»¥ä¸‹æ³¨è§£çš„åŠŸèƒ½ï¼š</p><ol><li><code>@Getter</code>ï¼šç”Ÿæˆå±æ€§çš„ getter æ–¹æ³•ã€‚</li><li><code>@Setter</code>ï¼šç”Ÿæˆå±æ€§çš„ setter æ–¹æ³•ã€‚</li><li><code>@ToString</code>ï¼šç”Ÿæˆ toString æ–¹æ³•ï¼Œç”¨äºè¾“å‡ºå¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li><li><code>@EqualsAndHashCode</code>ï¼šç”Ÿæˆ equals å’Œ hashCode æ–¹æ³•ï¼Œç”¨äºå¯¹è±¡çš„æ¯”è¾ƒå’Œå“ˆå¸Œè®¡ç®—ã€‚</li></ol><p>ä½¿ç”¨ <code>@Data</code> æ³¨è§£å¯ä»¥ç®€åŒ– POJO ç±»çš„ç¼–å†™ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>@Data</code> æ³¨è§£çš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥è‡ªJavaç¼–è¯‘å™¨ï¼Œéšå¼æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥è‡ª @Getter</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥è‡ª @Setter</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥è‡ª @EqualsAndHashCode</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> LombokTest)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            LombokTest other = (LombokTest)o;</span><br><span class="line">            <span class="keyword">if</span> (!other.canEqual(<span class="keyword">this</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.getId() != other.getId()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Object <span class="keyword">this</span>$name = <span class="keyword">this</span>.getName();</span><br><span class="line">                Object other$name = other.getName();</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>$name == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (other$name != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="keyword">this</span>$name.equals(other$name)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">canEqual</span><span class="params">(Object other)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> other <span class="keyword">instanceof</span> LombokTest;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> PRIME = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">        result = result * <span class="number">59</span> + <span class="keyword">this</span>.getId();</span><br><span class="line">        Object $name = <span class="keyword">this</span>.getName();</span><br><span class="line">        result = result * <span class="number">59</span> + ($name == <span class="keyword">null</span> ? <span class="number">43</span> : $name.hashCode());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥è‡ª @ToString</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;LombokTest(id=&quot;</span> + <span class="keyword">this</span>.getId() + <span class="string">&quot;, name=&quot;</span> + <span class="keyword">this</span>.getName() + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>@Data</code> æ³¨è§£ä¼šç”Ÿæˆæ‰€æœ‰å±æ€§çš„ getter å’Œ setter æ–¹æ³•ï¼Œå¦‚æœéœ€è¦å¯¹æŸäº›å±æ€§è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–æ³¨è§£ï¼Œå¯¹æŒ‡å®šçš„å±æ€§è¿›è¡Œå®šåˆ¶åŒ–é…ç½®ã€‚</p><h2 id="NoArgsConstructor"><a href="#NoArgsConstructor" class="headerlink" title="@NoArgsConstructor"></a>@NoArgsConstructor</h2><p><code>@NoArgsConstructor</code> æ˜¯ Lombok æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆæ— å‚æ„é€ å‡½æ•°ã€‚å®ƒå¯ä»¥ç”¨åœ¨ç±»ä¸Šï¼Œè¡¨ç¤ºä¸ºè¯¥ç±»ç”Ÿæˆä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ã€‚å¦‚æœç±»å·²ç»åŒ…å«äº†å…¶ä»–æœ‰å‚æ„é€ å‡½æ•°ï¼Œä½¿ç”¨ <code>@NoArgsConstructor</code> ä¸ä¼šè¦†ç›–å·²æœ‰çš„æ„é€ å‡½æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>@NoArgsConstructor</code> æ³¨è§£çš„ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">(<span class="keyword">int</span> id, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">(<span class="keyword">int</span> id, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="AllArgsConstructor"><a href="#AllArgsConstructor" class="headerlink" title="@AllArgsConstructor"></a>@AllArgsConstructor</h2><p><code>@AllArgsConstructor</code> æ˜¯ Lombok æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨ç”ŸæˆåŒ…å«æ‰€æœ‰å±æ€§çš„æ„é€ å‡½æ•°ã€‚å®ƒå¯ä»¥ç”¨åœ¨ç±»ä¸Šï¼Œè¡¨ç¤ºä¸ºè¯¥ç±»ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å±æ€§çš„æ„é€ å‡½æ•°ã€‚æ³¨æ„æ­¤æ—¶ç±»ä¸­ä¸å¯ä»¥åŒ…å«å…¨å‚æ„é€ å‡½æ•°ä»£ç ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>@AllArgsConstructor</code> æ³¨è§£çš„ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">(<span class="keyword">int</span> id, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Builder"><a href="#Builder" class="headerlink" title="@Builder"></a>@Builder</h2><p><code>@Builder</code> æ˜¯ Lombok æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆæ„å»ºå™¨æ¨¡å¼ç›¸å…³çš„ä»£ç ã€‚å®ƒå¯ä»¥ç”¨åœ¨ç±»ä¸Šï¼Œè¡¨ç¤ºä¸ºè¯¥ç±»ç”Ÿæˆä¸€ä¸ªæ„å»ºå™¨ï¼Œç”¨äºç®€åŒ–åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚ä½¿ç”¨æ„å»ºå™¨æ¨¡å¼å¯ä»¥é¿å…è¿‡å¤šçš„æ„é€ å‡½æ•°é‡è½½ï¼Œå¹¶æä¾›æ›´çµæ´»çš„å¯¹è±¡åˆ›å»ºæ–¹å¼ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>@Builder</code> æ³¨è§£çš„ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lombokè‡ªåŠ¨äº§ç”Ÿ</span></span><br><span class="line">    LombokTest(<span class="keyword">int</span> id, String name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LombokTestBuilder <span class="title">builder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LombokTestBuilder();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTestBuilder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        LombokTestBuilder() &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> LombokTestBuilder <span class="title">id</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.id = id;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> LombokTestBuilder <span class="title">name</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> LombokTest <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> LombokTest(<span class="keyword">this</span>.id, <span class="keyword">this</span>.name);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;LombokTest.LombokTestBuilder(id=&quot;</span> + <span class="keyword">this</span>.id + <span class="string">&quot;, name=&quot;</span> + <span class="keyword">this</span>.name + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ„é€ å™¨æ¨¡å¼åˆ›å»ºå¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line">LombokTest lombokTest = LombokTest.builder().id(<span class="number">1</span>).name(<span class="string">&quot;lombok&quot;</span>).build(); <span class="comment">// åˆ›å»ºLombokTestå¯¹è±¡</span></span><br><span class="line">System.out.println(LombokTest.builder().id(<span class="number">1</span>).name(<span class="string">&quot;lombok&quot;</span>)); <span class="comment">// LombokTest.LombokTestBuilder(id=1, name=lombok)</span></span><br></pre></td></tr></table></figure><h2 id="NonNull"><a href="#NonNull" class="headerlink" title="@NonNull"></a>@NonNull</h2><p>å°†<code>@NonNull</code>æ³¨è§£æ”¾åœ¨å±æ€§ä¸Šï¼Œè¡¨ç¤ºè¯¥å±æ€§ä¸èƒ½ä¸º<code>null</code>ï¼Œå¦åˆ™ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡º<code>NullPointerException</code>ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>@NonNull</code> æ³¨è§£çš„ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="meta">@NonNull</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½†æ³¨æ„è¿™é‡Œå°† <code>@NonNull</code> æ³¨è§£ç”¨äº<code>primitive</code>æ˜¯æ— æ„ä¹‰çš„ï¼ŒåŸå§‹ç±»å‹æœ¬èº«å°±ä¸èƒ½æ˜¯<code>null</code>ã€‚</p><h2 id="RequiredArgsConstructor"><a href="#RequiredArgsConstructor" class="headerlink" title="@RequiredArgsConstructor"></a>@RequiredArgsConstructor</h2><p>å°†<code>@RequiredArgsConstructor</code>æ³¨è§£æ”¾åœ¨ç±»ä¸Šï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰æ ‡è®°äº†<code>@NonNull</code>æ³¨è§£çš„å±æ€§çš„æ„é€ å‡½æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>@RequiredArgsConstructor</code> æ³¨è§£çš„ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">private</span> String aString;</span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">private</span> Double aDouble;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LombokTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="meta">@NonNull</span> String aString;</span><br><span class="line">    <span class="keyword">private</span> <span class="meta">@NonNull</span> Double aDouble;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LombokTest</span><span class="params">(<span class="meta">@NonNull</span> String aString, <span class="meta">@NonNull</span> Double aDouble)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (aString == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">&quot;aString is marked non-null but is null&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aDouble == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">&quot;aDouble is marked non-null but is null&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.aString = aString;</span><br><span class="line">            <span class="keyword">this</span>.aDouble = aDouble;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="SneakyThrows"><a href="#SneakyThrows" class="headerlink" title="@SneakyThrows"></a>@SneakyThrows</h2><p>å°†<code>@SneakyThrows</code>æ³¨è§£æ”¾åœ¨æ–¹æ³•ä¸Šï¼Œå®ƒä¼šè‡ªåŠ¨å°†å—æ£€å¼‚å¸¸è½¬æ¢ä¸ºéå—æ£€å¼‚å¸¸æŠ›å‡ºï¼Œé¿å…åœ¨ä»£ç ä¸­æ˜¾å¼åœ°å¤„ç†å—æ£€å¼‚å¸¸ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>@RequiredArgsConstructor</code> æ³¨è§£çš„ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line">    <span class="meta">@SneakyThrows</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡ŒæŠ›å‡ºäº†ä¸€ä¸ªå—æ£€å¼‚å¸¸ï¼Œä½†æ˜¯ä¸éœ€è¦æ˜¾å¼åœ°å¤„ç†å®ƒ</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;This is a checked exception&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;This is a checked exception&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable var2) &#123;</span><br><span class="line">            <span class="keyword">throw</span> var2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä¸ä½¿ç”¨è¯¥æ³¨è§£ï¼Œé€šå¸¸æˆ‘ä»¬éœ€è¦å¦‚æ­¤å¤„ç†ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡ŒæŠ›å‡ºäº†ä¸€ä¸ªå—æ£€å¼‚å¸¸ï¼Œéœ€è¦æ˜¾å¼åœ°å¤„ç†å®ƒ</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;This is a checked exception&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Example example = <span class="keyword">new</span> Example();</span><br><span class="line">        example.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å…³äºå—æ£€å¼‚å¸¸å’Œéå—æ£€å¼‚å¸¸ï¼š</p><blockquote><p><code>java.lang.Throwable</code>æ˜¯Javaä¸­æ‰€æœ‰é”™è¯¯å’Œå¼‚å¸¸çš„æ ¹ç±»ã€‚å®ƒæ˜¯ä¸€ä¸ªç±»å±‚æ¬¡ç»“æ„çš„é¡¶å±‚ç±»ï¼Œè¡¨ç¤ºå¯ä»¥è¢«æŠ›å‡ºçš„ä»»ä½•é—®é¢˜ï¼ŒåŒ…æ‹¬é”™è¯¯ï¼ˆ<code>Error</code>ï¼‰å’Œå¼‚å¸¸ï¼ˆ<code>Exception</code>ï¼‰ã€‚</p><p><code>Throwable</code>ç±»åŒ…å«ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„å­ç±»ï¼š</p><ol><li><p><code>Error</code>: è¡¨ç¤ºä¸¥é‡çš„ç³»ç»Ÿé”™è¯¯ï¼Œé€šå¸¸ç”±Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰æŠ¥å‘Šï¼Œä¾‹å¦‚<code>OutOfMemoryError</code>ã€<code>StackOverflowError</code>ç­‰ã€‚<code>Error</code>ç±»çš„å®ä¾‹é€šå¸¸è¡¨ç¤ºä¸å¯æ¢å¤çš„é”™è¯¯æƒ…å†µï¼Œåº”ç”¨ç¨‹åºé€šå¸¸ä¸åº”è¯¥æ•è·å’Œå¤„ç†<code>Error</code>ã€‚</p></li><li><p><code>Exception</code>: è¡¨ç¤ºå¯è¢«æ•è·å’Œå¤„ç†çš„å¼‚å¸¸ã€‚<code>Exception</code>ç±»åˆåˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li><p>å—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰ï¼šç»§æ‰¿è‡ª<code>Exception</code>çš„å­ç±»ï¼Œä½†ä¸ç»§æ‰¿è‡ª<code>RuntimeException</code>çš„å¼‚å¸¸ã€‚å—æ£€å¼‚å¸¸åœ¨æ–¹æ³•ç­¾åä¸­å¿…é¡»æ˜¾å¼åœ°å£°æ˜ï¼Œæˆ–è€…åœ¨æ–¹æ³•å†…éƒ¨æ•è·å’Œå¤„ç†ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ä¾‹å¦‚ï¼Œ<code>IOException</code>ã€<code>SQLException</code>ç­‰å±äºå—æ£€å¼‚å¸¸ã€‚</p></li><li><p>éå—æ£€å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰ï¼šç»§æ‰¿è‡ª<code>RuntimeException</code>çš„å¼‚å¸¸ã€‚éå—æ£€å¼‚å¸¸ä¸éœ€è¦åœ¨æ–¹æ³•ç­¾åä¸­æ˜¾å¼åœ°å£°æ˜ï¼Œä¹Ÿå¯ä»¥ä¸åœ¨æ–¹æ³•å†…éƒ¨æ•è·å’Œå¤„ç†ã€‚é€šå¸¸æ˜¯ç”±ç¨‹åºç¼–ç¨‹é”™è¯¯å¼•èµ·çš„ï¼Œä¾‹å¦‚<code>NullPointerException</code>ã€<code>ArrayIndexOutOfBoundsException</code>ç­‰ã€‚</p></li></ul></li></ol><p><code>Throwable</code>ç±»å®šä¹‰äº†ä»¥ä¸‹ä¸€äº›é‡è¦çš„æ–¹æ³•ï¼š</p><ul><li><code>getMessage()</code>: è·å–å…³äºå¼‚å¸¸çš„è¯¦ç»†ä¿¡æ¯ã€‚</li><li><code>toString()</code>: è¿”å›å¼‚å¸¸çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼ŒåŒ…æ‹¬å¼‚å¸¸çš„ç±»åå’Œè¯¦ç»†ä¿¡æ¯ã€‚</li><li><code>printStackTrace()</code>: åœ¨æ§åˆ¶å°æ‰“å°å¼‚å¸¸çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯å®šä½ã€‚</li><li><code>getCause()</code>: è·å–å¯¼è‡´å½“å‰å¼‚å¸¸çš„åŸå› ï¼ˆå³å¯¼è‡´å½“å‰å¼‚å¸¸æŠ›å‡ºçš„å…¶ä»–å¼‚å¸¸ï¼‰ã€‚</li></ul><p><code>Throwable</code>ç±»çš„å­ç±»å¯ä»¥é€šè¿‡ç»§æ‰¿å®ƒçš„æ–¹æ³•å’Œæ·»åŠ è‡ªå·±çš„æ–¹æ³•æ¥å®šä¹‰ç‰¹å®šç±»å‹çš„é”™è¯¯å’Œå¼‚å¸¸ã€‚</p></blockquote><h2 id="å…¶ä»–ä¸€äº›æ³¨è§£"><a href="#å…¶ä»–ä¸€äº›æ³¨è§£" class="headerlink" title="å…¶ä»–ä¸€äº›æ³¨è§£"></a>å…¶ä»–ä¸€äº›æ³¨è§£</h2><p><code>@Cleanup</code>ï¼šå°†<code>@Cleanup</code>æ³¨è§£æ”¾åœ¨éœ€è¦è¿›è¡Œèµ„æºå…³é—­çš„å±æ€§ä¸Šï¼Œå®ƒä¼šè‡ªåŠ¨ç”Ÿæˆèµ„æºçš„å…³é—­ä»£ç ï¼Œç”¨äºç®€åŒ–èµ„æºç®¡ç†ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå®ç°<code>java.io.Closeable</code>æ¥å£çš„èµ„æºã€‚</p><p><code>@Getter(lazy = true)</code>ï¼šå°†<code>@Getter(lazy = true)</code>æ³¨è§£æ”¾åœ¨å±æ€§ä¸Šï¼Œå®ƒä¼šç”Ÿæˆå±æ€§çš„æ‡’åŠ è½½ getter æ–¹æ³•ï¼Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶æ‰ä¼šè®¡ç®—å¹¶è¿”å›å±æ€§çš„å€¼ã€‚</p><p>è¿˜æœ‰ä¸€äº›æ—¥å¿—ç›¸å…³çš„æ³¨è§£ï¼Œç­‰å†™Javaæ—¥å¿—æ¡†æ¶æ—¶å†ä¸€å¹¶å†™äº†å§ã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æ•´ç†ä¸€äº›Lombokçš„å¸¸ç”¨æ³¨è§£å’Œæ³¨æ„äº‹é¡¹ï¼ˆå‡ ä¹åŒ…å«æ‰€æœ‰ä¸»æµæ³¨è§£äº†ï¼‰ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="http://silencezheng.top/tags/Java/"/>
    
    <category term="Lombok" scheme="http://silencezheng.top/tags/Lombok/"/>
    
  </entry>
  
  <entry>
    <title>Nginxä½¿ç”¨å…¥é—¨</title>
    <link href="http://silencezheng.top/2023/07/14/article108/"/>
    <id>http://silencezheng.top/2023/07/14/article108/</id>
    <published>2023-07-14T15:43:40.000Z</published>
    <updated>2023-07-15T06:01:45.045Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Nginxä½¿ç”¨å…¥é—¨ï¼Œè®©ä½ çš„é—²ç½®äº‘æœåŠ¡å™¨ç”¨èµ·æ¥ï½</p><span id="more"></span><h2 id="Nginxèƒ½å¹²ä»€ä¹ˆï¼Ÿ"><a href="#Nginxèƒ½å¹²ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Nginxèƒ½å¹²ä»€ä¹ˆï¼Ÿ"></a>Nginxèƒ½å¹²ä»€ä¹ˆï¼Ÿ</h2><p>Nginxæ˜¯ä¸€æ¬¾å¼€æºçš„é«˜æ€§èƒ½WebæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå…·æœ‰ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š</p><ol><li><p><strong>WebæœåŠ¡å™¨</strong>ï¼šNginxå¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„WebæœåŠ¡å™¨æ¥æä¾›é™æ€å†…å®¹å’ŒåŠ¨æ€å†…å®¹çš„æœåŠ¡ã€‚å®ƒæ”¯æŒå¤„ç†HTTPã€HTTPSã€HTTP/2å’ŒWebSocketç­‰åè®®ï¼Œå…·æœ‰é«˜å¹¶å‘å¤„ç†èƒ½åŠ›å’Œä½èµ„æºæ¶ˆè€—ã€‚</p></li><li><p><strong>åå‘ä»£ç†</strong>ï¼šNginxä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚å¹¶å°†å…¶è½¬å‘åˆ°åç«¯çš„å¤šä¸ªæœåŠ¡å™¨ï¼Œèµ·åˆ°è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨æ€§çš„ä½œç”¨ã€‚å®ƒèƒ½å¤Ÿæ™ºèƒ½åœ°åˆ†é…è¯·æ±‚è´Ÿè½½ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p></li><li><p><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šNginxèƒ½å¤Ÿåœ¨å¤šä¸ªåç«¯æœåŠ¡å™¨ä¹‹é—´åˆ†å‘è¯·æ±‚ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚é€šè¿‡æ™ºèƒ½åœ°å°†è¯·æ±‚åˆ†é…ç»™ä¸åŒçš„æœåŠ¡å™¨ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ã€‚</p></li><li><p><strong>HTTPç¼“å­˜</strong>ï¼šNginxæ”¯æŒå¯¹é™æ€å’ŒåŠ¨æ€å†…å®¹è¿›è¡Œç¼“å­˜ï¼Œå‡å°‘å¯¹åç«¯æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œæé«˜å“åº”é€Ÿåº¦å’Œååé‡ã€‚å®ƒå¯ä»¥æ ¹æ®è®¾ç½®çš„ç¼“å­˜è§„åˆ™ï¼Œç¼“å­˜ç»å¸¸è®¿é—®çš„å†…å®¹ï¼Œå¹¶æä¾›å¿«é€Ÿçš„å“åº”ã€‚</p></li><li><p><strong>å®‰å…¨æ€§</strong>ï¼šNginxå…·æœ‰å†…ç½®çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚åå‘ä»£ç†é˜²å¾¡ï¼ˆReverse Proxy Defenseï¼‰å’Œè¯·æ±‚é™åˆ¶ï¼ˆRate Limitingï¼‰ï¼Œä»¥ä¿æŠ¤ç½‘ç«™å…å—æ¶æ„è¯·æ±‚å’ŒDDoSæ”»å‡»ã€‚</p></li><li><p><strong>SSL/TLSåŠ å¯†</strong>ï¼šNginxæ”¯æŒSSL/TLSåè®®ï¼Œå¯ä»¥è¿›è¡Œå®‰å…¨çš„åŠ å¯†é€šä¿¡ï¼Œå¹¶æä¾›HTTPSåè®®çš„æ”¯æŒã€‚å®ƒå¯ä»¥é…ç½®å’Œç®¡ç†è¯ä¹¦ï¼Œå®ç°å®‰å…¨çš„æ•°æ®ä¼ è¾“ã€‚</p></li><li><p><strong>åŠ¨æ€æ¨¡å—</strong>ï¼šNginxæ”¯æŒæ¨¡å—åŒ–çš„æ¶æ„ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ ç¬¬ä¸‰æ–¹æ¨¡å—æ‰©å±•å…¶åŠŸèƒ½ã€‚è¿™ä½¿å¾—Nginxå…·æœ‰æ›´å¤šçš„æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œå®šåˆ¶å’Œé…ç½®ã€‚</p></li></ol><p>æœ¬æ–‡å…ˆä»æœ€å¸¸ç”¨çš„WebæœåŠ¡å™¨å¼€å§‹ã€‚</p><h2 id="åŸºäºDockeréƒ¨ç½²Nginx"><a href="#åŸºäºDockeréƒ¨ç½²Nginx" class="headerlink" title="åŸºäºDockeréƒ¨ç½²Nginx"></a>åŸºäºDockeréƒ¨ç½²Nginx</h2><p>é€šè¿‡Dockeréƒ¨ç½²Nginxå¯¹äºæˆ‘ä»¬çš„å­¦ä¹ æ›´æ–¹ä¾¿ï¼Œä¹Ÿæä¾›äº†æ›´å¥½çš„éš”ç¦»æ€§ã€‚ä¸‹é¢æ˜¯é€šè¿‡dockerå¯åŠ¨Nginxçš„å¤§è‡´æ“ä½œæµç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‹‰å–é•œåƒ</span></span><br><span class="line">docker pull nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</span></span><br><span class="line">mkdir /path/to/mynginx/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹é…ç½®æ–‡ä»¶</span></span><br><span class="line">touch /path/to/mynginx/config/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™å…¥å†…å®¹</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker run -d --name mynginx -p local_port:container_port \</span><br><span class="line"><span class="comment"># æŒ‚è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">-v /path/to/mynginx/config/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line"><span class="comment"># æŒ‚è½½ç›®æ ‡ç›®å½•</span></span><br><span class="line">-v /path/to/projects:/usr/share/nginx/html \</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµè§ˆå™¨è®¿é—®</span></span><br><span class="line">http://ip:port/target</span><br></pre></td></tr></table></figure><h2 id="WebæœåŠ¡å™¨åº”ç”¨ä¸¾ä¾‹"><a href="#WebæœåŠ¡å™¨åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="WebæœåŠ¡å™¨åº”ç”¨ä¸¾ä¾‹"></a>WebæœåŠ¡å™¨åº”ç”¨ä¸¾ä¾‹</h2><p>ä¸‹é¢ï¼ŒåŸºäºä¸Šè¿°åŸºæœ¬æµç¨‹ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€äº›WebæœåŠ¡å™¨çš„å®ä¾‹ã€‚</p><p>çœç•¥æ‹‰å–é•œåƒï½</p><h3 id="1-å›¾åºŠ"><a href="#1-å›¾åºŠ" class="headerlink" title="1. å›¾åºŠ"></a>1. å›¾åºŠ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</span></span><br><span class="line">mkdir /path/to/mynginx/img_host/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹é…ç½®æ–‡ä»¶</span></span><br><span class="line">touch /path/to/mynginx/img_host/config/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™å…¥å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    worker_processes 1; <span class="comment"># åº”è¯¥ä½¿ç”¨å¤šå°‘ä¸ªworkerè¿›ç¨‹æ¥å¤„ç†è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># äº‹ä»¶å¤„ç†å™¨é…ç½®</span></span><br><span class="line">    events &#123;</span><br><span class="line">        worker_connections 1024; <span class="comment"># æ¯ä¸ªworkerè¿›ç¨‹å¯ä»¥å¤„ç†çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¨å±€HTTPæœåŠ¡å™¨é…ç½®</span></span><br><span class="line">    http &#123;</span><br><span class="line">        include mime.types;</span><br><span class="line">        default_type application/octet-stream; <span class="comment"># é»˜è®¤çš„MIMEç±»å‹</span></span><br><span class="line">        sendfile on; <span class="comment"># å¯ä»¥ç›´æ¥å°†æ–‡ä»¶ä»ç£ç›˜å¤åˆ¶åˆ°ç½‘ç»œå¥—æ¥å­—</span></span><br><span class="line">        keepalive_timeout  65; <span class="comment"># ç©ºé—²çš„æŒä¹…è¿æ¥å°†åœ¨65ç§’åå…³é—­</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># images server</span></span><br><span class="line">        server &#123;</span><br><span class="line">            listen       82;</span><br><span class="line">            server_name  ip_or_domain;</span><br><span class="line"></span><br><span class="line">            location /images/ &#123;</span><br><span class="line">                <span class="built_in">alias</span> /home/images/; <span class="comment"># è¡¨ç¤ºå°†URLä¸­çš„ /images/æ›¿æ¢ä¸ºçš„å®é™…è·¯å¾„</span></span><br><span class="line">                expires max; <span class="comment"># å¯¹è¿™äº›å›¾ç‰‡æ–‡ä»¶çš„ç¼“å­˜è¿‡æœŸæ—¶é—´ä¸ºæœ€å¤§å€¼ï¼Œå³æ°¸ä¸è¿‡æœŸã€‚</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker run -d --name mynginx -p 82:82 \</span><br><span class="line">-v /path/to/mynginx/img_host/config/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">-v /path/to/images/:/home/images/ \</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµè§ˆå™¨è®¿é—®</span></span><br><span class="line">http://ip:82/images/pic.jpg</span><br></pre></td></tr></table></figure><h3 id="2-æ–‡ä»¶æœåŠ¡å™¨"><a href="#2-æ–‡ä»¶æœåŠ¡å™¨" class="headerlink" title="2. æ–‡ä»¶æœåŠ¡å™¨"></a>2. æ–‡ä»¶æœåŠ¡å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</span></span><br><span class="line">mkdir /path/to/mynginx/file_server/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹é…ç½®æ–‡ä»¶</span></span><br><span class="line">touch /path/to/mynginx/file_server/config/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™å…¥å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    worker_processes 1; <span class="comment"># åº”è¯¥ä½¿ç”¨å¤šå°‘ä¸ªworkerè¿›ç¨‹æ¥å¤„ç†è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># äº‹ä»¶å¤„ç†å™¨é…ç½®</span></span><br><span class="line">    events &#123;</span><br><span class="line">        worker_connections 1024; <span class="comment"># æ¯ä¸ªworkerè¿›ç¨‹å¯ä»¥å¤„ç†çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¨å±€HTTPæœåŠ¡å™¨é…ç½®</span></span><br><span class="line">    http &#123;</span><br><span class="line">        server &#123;</span><br><span class="line">            listen 82;  <span class="comment"># ç›‘å¬çš„ç«¯å£å·</span></span><br><span class="line">            server_name ip_or_domain;  <span class="comment"># æœåŠ¡å™¨åŸŸåæˆ–IPåœ°å€</span></span><br><span class="line"></span><br><span class="line">            location / &#123; <span class="comment"># è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œåˆ†é…å…¶ä»–å‰ç¼€æ—¶ï¼Œé‡‡ç”¨rootçš„è·¯å¾„åè¦åŠ ä¸Šè¯¥å‰ç¼€ï¼Œå»ºè®®ç”¨alias</span></span><br><span class="line">                root /path/to/files/;  <span class="comment"># æ–‡ä»¶æ ¹ç›®å½•çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">                <span class="comment"># or alias /path/to/files/, ç›´æ¥ä» ip:82/ å¯è¿›å…¥</span></span><br><span class="line">                autoindex on;  <span class="comment"># å¯ç”¨ç›®å½•åˆ—è¡¨åŠŸèƒ½</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker run -d --name mynginx -p 82:82 \</span><br><span class="line">-v /path/to/mynginx/file_server/config/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">-v /path/to/files/:/path/to/files/ \</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµè§ˆå™¨è®¿é—®</span></span><br><span class="line">http://ip:82/path/to/files/</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ol><li>ä½¿ç”¨aliasæ—¶ç›®å½•ååé¢ä¸€å®šè¦åŠ <code>/</code>ã€‚</li><li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨<code>location /</code>ä¸­é…ç½®rootï¼Œåœ¨<code>location /other</code>ä¸­é…ç½®aliasã€‚</li></ol><h3 id="3-Webåº”ç”¨éƒ¨ç½²"><a href="#3-Webåº”ç”¨éƒ¨ç½²" class="headerlink" title="3. Webåº”ç”¨éƒ¨ç½²"></a>3. Webåº”ç”¨éƒ¨ç½²</h3><p>ä¸€æ ·çš„é€»è¾‘ï¼Œè¿™é‡Œåªæä¾›ä¸€ä¸ªé…ç½®æ–‡ä»¶å‚è€ƒï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">worker_processes 1;</span><br><span class="line">error_log /var/<span class="built_in">log</span>/nginx/error.log;</span><br><span class="line">pid /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="comment"># äº‹ä»¶å¤„ç†å™¨é…ç½®</span></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTPæœåŠ¡å™¨é…ç½®</span></span><br><span class="line">http &#123;</span><br><span class="line">    include mime.types;</span><br><span class="line">    default_type application/octet-stream;</span><br><span class="line">    sendfile on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_min_length 1k;     <span class="comment"># è®¾ç½®å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°</span></span><br><span class="line">    gzip_buffers 4 16k;     <span class="comment"># ç”¨æ¥å­˜å‚¨ gzip çš„å‹ç¼©ç»“æœ</span></span><br><span class="line">    gzip_http_version 1.1;  <span class="comment"># è¯†åˆ« HTTP åè®®ç‰ˆæœ¬</span></span><br><span class="line">    gzip_comp_level 2;      <span class="comment"># è®¾ç½® gzip çš„å‹ç¼©æ¯” 1-9ã€‚1 å‹ç¼©æ¯”æœ€å°ä½†æœ€å¿«ï¼Œè€Œ 9 ç›¸å</span></span><br><span class="line">    gzip_types gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript; <span class="comment"># æŒ‡å®šå‹ç¼©ç±»å‹</span></span><br><span class="line">    gzip_proxied any;       <span class="comment"># æ— è®ºåç«¯æœåŠ¡å™¨çš„ headers å¤´è¿”å›ä»€ä¹ˆä¿¡æ¯ï¼Œéƒ½æ— æ¡ä»¶å¯ç”¨å‹ç¼©</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‰ç«¯é™æ€æ–‡ä»¶æœåŠ¡å™¨</span></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name example.com;</span><br><span class="line"></span><br><span class="line">        root /path/to/frontend/dist;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åç«¯APIä»£ç†</span></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name api.example.com;</span><br><span class="line"></span><br><span class="line">        location /api/ &#123;</span><br><span class="line">            proxy_pass http://ip:port/api/; <span class="comment">## proxy_pass éœ€è¦è®¾ç½®ä¸ºåç«¯é¡¹ç›®æ‰€åœ¨æœåŠ¡å™¨çš„ IP</span></span><br><span class="line">            <span class="comment"># è®¾ç½®ä»£ç†è¯·æ±‚çš„å¤´ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨è½¬å‘è¯·æ±‚æ—¶ä¼ é€’ç»™åç«¯æœåŠ¡å™¨</span></span><br><span class="line">            proxy_set_header Host <span class="variable">$http_host</span>; <span class="comment"># è®¾ç½®ä»£ç†è¯·æ±‚çš„Hostå¤´ï¼Œå°†å…¶è®¾ç½®ä¸ºä¸å®¢æˆ·ç«¯è¯·æ±‚ä¸­çš„Hostå¤´ä¸€è‡´</span></span><br><span class="line">            proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>; <span class="comment"># å°†å®¢æˆ·ç«¯çœŸå®IPåœ°å€ä½œä¸ºX-Real-IPå¤´å‘é€ç»™åç«¯æœåŠ¡å™¨</span></span><br><span class="line">            proxy_set_header REMOTE-HOST <span class="variable">$remote_addr</span>; <span class="comment"># å°†å®¢æˆ·ç«¯IPåœ°å€ä½œä¸ºREMOTE-HOSTå¤´å‘é€ç»™åç«¯æœåŠ¡å™¨</span></span><br><span class="line">            proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>; <span class="comment"># å°†å®¢æˆ·ç«¯IPåœ°å€æ·»åŠ åˆ°X-Forwarded-Forå¤´ä¸­ï¼Œä»¥ä¾¿åç«¯æœåŠ¡å™¨å¯ä»¥äº†è§£è¯·æ±‚çš„çœŸå®å®¢æˆ·ç«¯IPåœ°å€ã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Nginxä½¿ç”¨å…¥é—¨ï¼Œè®©ä½ çš„é—²ç½®äº‘æœåŠ¡å™¨ç”¨èµ·æ¥ï½&lt;/p&gt;</summary>
    
    
    
    
    <category term="Nginx" scheme="http://silencezheng.top/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>Gitä»£ç åˆå¹¶</title>
    <link href="http://silencezheng.top/2023/07/01/article107/"/>
    <id>http://silencezheng.top/2023/07/01/article107/</id>
    <published>2023-07-01T11:40:45.000Z</published>
    <updated>2023-07-15T09:42:26.934Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿‘æœŸæœ‰å¤šç«¯åŠå…¬çš„éœ€æ±‚ï¼Œå®æ“ä¸€ä¸‹ä»£ç åˆå¹¶ã€‚</p><p>ç»“åˆIDEAçš„Gitå·¥å…·æ›´åŠ æ–¹ä¾¿ã€‚<br><span id="more"></span></p><h2 id="æœ¬åœ°ä»“åº“åˆå¹¶"><a href="#æœ¬åœ°ä»“åº“åˆå¹¶" class="headerlink" title="æœ¬åœ°ä»“åº“åˆå¹¶"></a>æœ¬åœ°ä»“åº“åˆå¹¶</h2><p>è¦åˆå¹¶ä¸¤ä¸ª<strong>æœ¬åœ°</strong>çš„ Git ä»“åº“ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š</p><p>1ã€ è¿›å…¥ç¬¬ä¸€ä¸ªä»“åº“çš„ç›®å½•ã€‚</p><p>2ã€ æ·»åŠ ç¬¬äºŒä¸ªä»“åº“ä¸ºè¿œç¨‹ä»“åº“ï¼ˆä»“åº“åå¯ä»¥å–ä»»æ„ï¼Œä¸å½“å‰ä»“åº“æœ‰åŒºåˆ†å³å¯ï¼‰ï¼š<br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote add &lt;è¿œç¨‹ä»“åº“åç§°&gt; &lt;ç¬¬äºŒä¸ªä»“åº“çš„è·¯å¾„&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š git remote add another /path/to/another</span></span><br></pre></td></tr></table></figure></p><p>3ã€ ä»è¿œç¨‹ä»“åº“è·å–æ‰€æœ‰æœ€æ–°çš„æäº¤å†å²å’Œåˆ†æ”¯ä¿¡æ¯ï¼š<br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all</span><br></pre></td></tr></table></figure></p><p>4ã€ æŸ¥çœ‹è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ï¼š<br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure></p><p>5ã€ å°†è¿œç¨‹ä»“åº“çš„ä»£ç åˆå¹¶åˆ°æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯ï¼š<br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git merge &lt;è¿œç¨‹ä»“åº“åç§°&gt;/&lt;åˆ†æ”¯åç§°&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š git merge another/&lt;brach&gt;</span></span><br></pre></td></tr></table></figure></p><p>   è¿™å°†æŠŠç¬¬äºŒä¸ªä»“åº“çš„ä»£ç å˜æ›´åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚å½“ç„¶ï¼Œè¿™ä¸€æ­¥å¯ä»¥ç”¨IDEæä¾›çš„Gité¢æ¿è¿›è¡Œæ“ä½œã€‚</p><p>6ã€ è§£å†³å¯èƒ½å‡ºç°çš„å†²çªï¼š<br>   å¦‚æœä¸¤ä¸ªä»“åº“ä¹‹é—´å­˜åœ¨å†²çªï¼Œä½ éœ€è¦æ‰‹åŠ¨è§£å†³å†²çªã€‚Git ä¼šåœ¨ä»£ç åˆå¹¶è¿‡ç¨‹ä¸­æ ‡è®°å†²çªçš„éƒ¨åˆ†ï¼Œä½ å¯ä»¥ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ç›¸åº”çš„æ–‡ä»¶å¹¶æ‰‹åŠ¨ç¼–è¾‘ä»¥è§£å†³å†²çªã€‚å¯ä»¥ç”¨IDEæä¾›çš„Gité¢æ¿è¿›è¡Œæ“ä½œï¼Œæ›´åŠ æ–¹ä¾¿ã€‚</p><p>7ã€ æäº¤åˆå¹¶åçš„ä»£ç å˜æ›´ï¼š<br>   <figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;<span class="keyword">Merge</span> another <span class="keyword">into</span> origin<span class="string">&quot;</span></span><br></pre></td></tr></table></figure></p><p>   è¿™å°†æäº¤åˆå¹¶åçš„ä»£ç å˜æ›´ã€‚</p><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œå¯ä»¥å°†ä¸¤ä¸ªæœ¬åœ°çš„ Git ä»“åº“è¿›è¡Œåˆå¹¶ã€‚è¯·ç¡®ä¿åœ¨æ“ä½œå‰å¤‡ä»½ä»“åº“æ•°æ®ï¼Œä»¥å…æ„å¤–ä¸¢å¤±ä»£ç ã€‚</p><h2 id="è¿œç«¯ä»“åº“åˆå¹¶"><a href="#è¿œç«¯ä»“åº“åˆå¹¶" class="headerlink" title="è¿œç«¯ä»“åº“åˆå¹¶"></a>è¿œç«¯ä»“åº“åˆå¹¶</h2><p>ä¸€æ ·çš„æ–¹å¼ï¼Œåªæ˜¯è¿œç«¯ä»“åº“å¯èƒ½æœ‰å›ºå®šçš„ä»“åº“åï¼ŒæŠŠæœ¬åœ°åœ°å€æ›¿æ¢ä¸ºurlå³å¯ã€‚</p><h2 id="Pull"><a href="#Pull" class="headerlink" title="Pull"></a>Pull</h2><p>Pullæ“ä½œç­‰äºFetch + Mergeï¼Œå¦‚æœå·²ç»ç¡®è®¤è¿‡è¿œç«¯åˆ†æ”¯ä¿¡æ¯ï¼Œå¯ä»¥ç›´æ¥Pullå¯¹åº”åˆ†æ”¯ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git pull &lt;è¿œç¨‹ä»“åº“åç§°&gt; &lt;åˆ†æ”¯åç§°&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š git pull another &lt;brach&gt;</span></span><br></pre></td></tr></table></figure><br>è¿™å°†ä»è¿œç«¯ä»“åº“ä¸­è·å–æœ€æ–°çš„ä»£ç å˜æ›´å¹¶åˆå¹¶åˆ°æœ¬åœ°å½“å‰åˆ†æ”¯ã€‚</p><p>å¦‚æœå‡ºç°åˆ†æ­§ï¼Œå¯èƒ½ä¼šæŠ¥é”™ï¼š<code>fatal: Need to specify how to reconcile divergent branches.</code>ï¼Œæ­¤æ—¶éœ€è¦è§£å†³å†²çªæˆ–ç¡®è®¤åˆå¹¶ç­–ç•¥ã€‚</p><h2 id="å°†è¿œç¨‹åˆ†æ”¯æ·»åŠ åˆ°æœ¬åœ°å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°åˆ†æ”¯"><a href="#å°†è¿œç¨‹åˆ†æ”¯æ·»åŠ åˆ°æœ¬åœ°å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°åˆ†æ”¯" class="headerlink" title="å°†è¿œç¨‹åˆ†æ”¯æ·»åŠ åˆ°æœ¬åœ°å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°åˆ†æ”¯"></a>å°†è¿œç¨‹åˆ†æ”¯æ·»åŠ åˆ°æœ¬åœ°å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°åˆ†æ”¯</h2><p>æ³¨æ„æ‰§è¡Œååˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;new-branch-name&gt; &lt;remote-name&gt;/&lt;remote-branch-name&gt;</span><br></pre></td></tr></table></figure></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è¿‘æœŸæœ‰å¤šç«¯åŠå…¬çš„éœ€æ±‚ï¼Œå®æ“ä¸€ä¸‹ä»£ç åˆå¹¶ã€‚&lt;/p&gt;
&lt;p&gt;ç»“åˆIDEAçš„Gitå·¥å…·æ›´åŠ æ–¹ä¾¿ã€‚&lt;br&gt;</summary>
    
    
    
    
    <category term="Git" scheme="http://silencezheng.top/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>æœåŠ¡å™¨sshdè‡ªåŠ¨å…³é—­é—®é¢˜æ’æŸ¥è®°å½•</title>
    <link href="http://silencezheng.top/2023/07/01/article106/"/>
    <id>http://silencezheng.top/2023/07/01/article106/</id>
    <published>2023-07-01T08:29:36.000Z</published>
    <updated>2023-07-01T08:34:53.075Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœåŠ¡å™¨çš„sshdæœåŠ¡åœ¨ç»è¿‡å¤šæ¬¡è¿æ¥åå‡ºç°è‡ªåŠ¨å…³é—­çš„æƒ…å†µï¼Œé‚è¿›è¡Œæ’æŸ¥ï¼Œè®°å½•è¿‡ç¨‹ã€‚</p><span id="more"></span><h2 id="1-æ’æŸ¥sshdæ—¥å¿—"><a href="#1-æ’æŸ¥sshdæ—¥å¿—" class="headerlink" title="1. æ’æŸ¥sshdæ—¥å¿—"></a>1. æ’æŸ¥sshdæ—¥å¿—</h2><p><code>/var/log/secure</code> â€” åŒ…å«éªŒè¯å’Œæˆæƒæ–¹é¢ä¿¡æ¯ï¼Œsshdä¼šå°†æ‰€æœ‰ä¿¡æ¯è®°å½•ï¼ˆå…¶ä¸­åŒ…æ‹¬å¤±è´¥ç™»å½•ï¼‰åœ¨è¿™é‡Œã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">25</span>:<span class="number">55</span> centos polkitd[<span class="number">672</span>]: Registered Authentication Agent for unix-process:<span class="number">13867</span>:<span class="number">17282775</span> (system bus name :<span class="number">1</span>.<span class="number">29528</span><span class="meta"> [/usr/bin/pkttyagent --notify-fd 5 --fallback], object path /org/freedesktop/PolicyKit1/AuthenticationAgent, locale en_US.UTF-8)</span></span><br><span class="line"><span class="meta">Jun 29 09:25:55 centos sshd[13873]: Server listening on 0.0.0.0 port 22.</span></span><br><span class="line"><span class="meta">Jun 29 09:25:55 centos sshd[13873]: Server listening on :: port 22.</span></span><br><span class="line"><span class="meta">Jun 29 09:25:55 centos polkitd[672]: Unregistered Authentication Agent for unix-process:13867:17282775 (system bus name :1.29528, object path /org/freedesktop/PolicyKit1/AuthenticationAgent, locale en_US.UTF-8) (disconnected from bus)</span></span><br><span class="line"><span class="meta">Jun 29 09:29:50 centos sshd[14173]: Connection closed by ip port 37721 [preauth]</span></span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos sshd[<span class="number">14225</span>]: Accepted password for root from ip port <span class="number">25638</span> ssh<span class="number">2</span></span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos sshd[<span class="number">14225</span>]: pam_unix(sshd:session): session opened for user root by (uid=<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos sshd[<span class="number">14225</span>]: pam_lastlog(sshd:session): corruption detected in /var/log/btmp</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">21</span> centos sshd[<span class="number">14512</span>]: Accepted password for root from ip port <span class="number">25844</span> ssh<span class="number">2</span></span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">21</span> centos sshd[<span class="number">14512</span>]: pam_unix(sshd:session): session opened for user root by (uid=<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">21</span> centos sshd[<span class="number">14512</span>]: pam_lastlog(sshd:session): corruption detected in /var/log/btmp</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos sudo:    root : TTY=unknown ; PWD=/ ; USER=root ; COMMAND=/sbin/service sshd stop</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos sudo: pam_unix(sudo:session): session opened for user root by (uid=<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos sudo: pam_unix(sudo:session): session closed for user root</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªsudoå‘½ä»¤è¢«æ‰§è¡Œï¼Œé€šè¿‡<code>/sbin/service sshd stop</code>æ¥åœæ­¢sshdæœåŠ¡ã€‚æ—¥å¿—æ˜¾ç¤ºå‘½ä»¤æ˜¯ç”±rootç”¨æˆ·æ‰§è¡Œçš„ï¼Œå¹¶ä¸”sudoä¼šè¯åœ¨æ‰§è¡Œå‘½ä»¤åç«‹å³å…³é—­ã€‚å¯èƒ½æœ‰å…¶ä»–çš„è¿›ç¨‹æˆ–è„šæœ¬åœ¨åå°è¿è¡Œï¼Œè°ƒç”¨äº†è¯¥sudoå‘½ä»¤æ¥åœæ­¢sshdæœåŠ¡ã€‚</p><h2 id="2-æ’æŸ¥ç³»ç»Ÿæ—¥å¿—"><a href="#2-æ’æŸ¥ç³»ç»Ÿæ—¥å¿—" class="headerlink" title="2. æ’æŸ¥ç³»ç»Ÿæ—¥å¿—"></a>2. æ’æŸ¥ç³»ç»Ÿæ—¥å¿—</h2><p>ä¸ºäº†ææ¸…æ¥šæ˜¯ä»€ä¹ˆå‘½ä»¤åœæ­¢äº†sshdæœåŠ¡ï¼Œæ’æŸ¥<code>/var/log/messages</code>ï¼Œä¸€èˆ¬åŒ…æ‹¬æ•´ä½“ç³»ç»Ÿä¿¡æ¯ï¼Œä»¥åŠcronã€daemonç­‰ç­‰ã€‚</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">25</span>:<span class="number">55</span> centos systemd: Starting OpenSSH server daemon...</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">25</span>:<span class="number">55</span> centos systemd: <span class="literal">Started</span> OpenSSH server daemon.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">26</span>:<span class="number">01</span> centos systemd: <span class="literal">Started</span> Session <span class="number">14452</span> of <span class="keyword">user</span> <span class="title">root</span>.</span><br><span class="line">...</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos systemd: <span class="literal">Started</span> Session <span class="number">14477</span> of <span class="keyword">user</span> <span class="title">root</span>.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos systemd-logind: New session <span class="number">14477</span> of <span class="keyword">user</span> <span class="title">root</span>.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos dbus[<span class="number">663</span>]: [system] Activating service <span class="attr">name=</span>&#x27;org.freedesktop.problems&#x27; (using servicehelper)</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos dbus[<span class="number">663</span>]: [system] Successfully activated service &#x27;org.freedesktop.problems&#x27;</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">21</span> centos systemd: <span class="literal">Started</span> Session <span class="number">14478</span> of <span class="keyword">user</span> <span class="title">root</span>.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">21</span> centos systemd-logind: New session <span class="number">14478</span> of <span class="keyword">user</span> <span class="title">root</span>.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos systemd: sshd.service: main process exited, <span class="attr">code=</span>killed, <span class="attr">status=</span><span class="number">9</span>/KILL</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos systemd: Unit sshd.service entered failed state.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos systemd: sshd.service failed.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos systemd: <span class="literal">Stopped</span> OpenSSH server daemon.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos systemd: <span class="literal">Started</span> Session c291 of <span class="keyword">user</span> <span class="title">root</span>.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">27</span> centos systemd-logind: Removed session <span class="number">14478</span>.</span><br><span class="line">Jun <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">28</span> centos systemd-logind: Removed session <span class="number">14477</span>.</span><br></pre></td></tr></table></figure><p>æ—¥å¿—è¡¨æ˜<code>sshd.service</code>æœåŠ¡çš„ä¸»è¿›ç¨‹è¢«ç»ˆæ­¢ï¼Œæœ€ç»ˆå¯¼è‡´äº†OpenSSHå®ˆæŠ¤è¿›ç¨‹çš„åœæ­¢ã€‚ä½†çœ‹ä¸å‡ºå…·ä½“æ˜¯ä»€ä¹ˆè„šæœ¬ã€‚</p><h2 id="3-æ’æŸ¥journalctl"><a href="#3-æ’æŸ¥journalctl" class="headerlink" title="3. æ’æŸ¥journalctl"></a>3. æ’æŸ¥journalctl</h2><p>journalctl æ˜¯ systemd-journald æœåŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºç®¡ç†å’Œæ£€ç´¢ç³»ç»Ÿæ—¥å¿—ã€‚å®ƒä½¿ç”¨äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆBinary Log Formatï¼‰ï¼Œå¯ä»¥åŒ…å«æ¯”ä¼ ç»Ÿæ—¥å¿—æ–‡ä»¶æ›´è¯¦ç»†çš„ä¿¡æ¯</p><p>æŸ¥çœ‹æŒ‡å®šæ—¶é—´åŒºé—´çš„æ—¥å¿—ï¼š<code>journalctl --since &quot;2023-06-29 09:25:55&quot; --until &quot;2023-06-29 09:30:28&quot;</code></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">01</span> centos systemd[<span class="number">1</span>]: Started Session <span class="number">14475</span> of user root.</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos sshd[<span class="number">14225</span>]: Accepted password for root from ip port <span class="number">25638</span> ssh<span class="number">2</span></span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos systemd[<span class="number">1</span>]: Started Session <span class="number">14477</span> of user root.</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos systemd-logind[<span class="number">673</span>]: New session <span class="number">14477</span> of user root.</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos sshd[<span class="number">14225</span>]: pam_unix(sshd:session): session opened for user root by (uid=<span class="number">0</span>)</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos sshd[<span class="number">14225</span>]: pam_lastlog(sshd:session): corruption detected in /var/log/btmp</span><br><span class="line"><span class="attribute">Jun</span> <span class="number">29</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">11</span> centos dbus[<span class="number">663</span>]:<span class="meta"> [system] Activating service name=&#x27;org.freedesktop.problems&#x27; (using servicehelper)</span></span><br><span class="line"><span class="meta">Jun 29 09:30:11 centos dbus[663]: [system] Successfully activated service &#x27;org.freedesktop.problems&#x27;</span></span><br><span class="line"><span class="meta">Jun 29 09:30:21 centos sshd[14512]: Accepted password for root from ip port 25844 ssh2</span></span><br><span class="line"><span class="meta">Jun 29 09:30:21 centos sshd[14512]: pam_unix(sshd:session): session opened for user root by (uid=0)</span></span><br><span class="line"><span class="meta">Jun 29 09:30:21 centos systemd[1]: Started Session 14478 of user root.</span></span><br><span class="line"><span class="meta">Jun 29 09:30:21 centos systemd-logind[673]: New session 14478 of user root.</span></span><br><span class="line"><span class="meta">Jun 29 09:30:21 centos sshd[14512]: pam_lastlog(sshd:session): corruption detected in /var/log/btmp</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos systemd[1]: sshd.service: main process exited, code=killed, status=9/KILL</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos systemd[1]: Unit sshd.service entered failed state.</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos systemd[1]: sshd.service failed.</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos systemd[1]: Stopped OpenSSH server daemon.</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos sudo[14863]:     root : TTY=unknown ; PWD=/ ; USER=root ; COMMAND=/sbin/service sshd stop</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos sudo[14863]: pam_unix(sudo:session): session opened for user root by (uid=0)</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos systemd[1]: Started Session c291 of user root.</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos sudo[14863]: pam_unix(sudo:session): session closed for user root</span></span><br><span class="line"><span class="meta">Jun 29 09:30:27 centos systemd-logind[673]: Removed session 14478.</span></span><br></pre></td></tr></table></figure><p>çœ‹èµ·æ¥å”¯ä¸€åƒé—®é¢˜çš„å°±æ˜¯ï¼š<code>sshd[14512]: pam_lastlog(sshd:session): corruption detected in /var/log/btmp</code></p><h2 id="4-é—®é¢˜æŸ¥æ‰¾"><a href="#4-é—®é¢˜æŸ¥æ‰¾" class="headerlink" title="4. é—®é¢˜æŸ¥æ‰¾"></a>4. é—®é¢˜æŸ¥æ‰¾</h2><p>ä¾æ®å‘ç°é—®é¢˜çš„æ—¥å¿—ï¼Œæ‰¾åˆ°é—®é¢˜åŸå› å¯èƒ½æ˜¯â€œç”¨æˆ·çš„é»˜è®¤ Shell è¢«ä¿®æ”¹â€ã€‚</p><p>é€šè¿‡<code>cat /etc/passwd | grep usr</code>æŸ¥çœ‹ï¼Œä¾‹å¦‚æŸ¥çœ‹<code>root</code>è¾“å‡ºï¼š<code>root:x:0:0:root:/root:/bin/bash</code>åˆ™è¡¨ç¤ºï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rootï¼šç™»å½•åï¼Œå³ç”¨æˆ·åã€‚</span><br><span class="line">xï¼šå¯†ç å ä½ç¬¦ï¼Œå®é™…å¯†ç å­˜å‚¨åœ¨ <span class="regexp">/etc/</span>shadow æ–‡ä»¶ä¸­ã€‚</span><br><span class="line"><span class="number">0</span>ï¼šç”¨æˆ· ID (UID)ï¼Œè¡¨ç¤º root ç”¨æˆ·çš„ç‰¹æ®Šæ ‡è¯†ç¬¦ï¼Œ<span class="number">0</span> æ˜¯è¶…çº§ç”¨æˆ·çš„æ ‡è¯†ç¬¦ã€‚</span><br><span class="line"><span class="number">0</span>ï¼šç»„ ID (GID)ï¼Œè¡¨ç¤º root ç”¨æˆ·æ‰€å±çš„ä¸»è¦ç»„çš„æ ‡è¯†ç¬¦ã€‚</span><br><span class="line">rootï¼šç”¨æˆ·å…¨åæˆ–æ³¨é‡Šå­—æ®µï¼Œé€šå¸¸ä¸ºç”¨æˆ·çš„çœŸå®å§“åã€‚</span><br><span class="line">/rootï¼šä¸»ç›®å½•ï¼Œè¡¨ç¤º root ç”¨æˆ·çš„ä¸»è¦å·¥ä½œç›®å½•ã€‚</span><br><span class="line"><span class="regexp">/bin/</span>bashï¼šç™»å½• shellï¼Œè¡¨ç¤ºç”¨æˆ·ç™»å½•æ—¶æ‰€ä½¿ç”¨çš„é»˜è®¤å‘½ä»¤è§£é‡Šå™¨ã€‚</span><br></pre></td></tr></table></figure><p>ä½†æˆ‘æ’æŸ¥è¿‡åï¼Œä¹Ÿä¸æ˜¯è¿™ä¸ªé—®é¢˜ã€‚ä¸‹ä¸€æ­¥åº”è¯¥ç»§ç»­æ’æŸ¥<code>/var/log/btmp</code>ï¼Œå…ˆæç½®äº†ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://cloud.tencent.com/document/product/213/37925">è…¾è®¯äº‘æ‰‹å†Œ</a><br>[2] <a href="https://www.cnblogs.com/sunsky303/p/8862040.html">https://www.cnblogs.com/sunsky303/p/8862040.html</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æœåŠ¡å™¨çš„sshdæœåŠ¡åœ¨ç»è¿‡å¤šæ¬¡è¿æ¥åå‡ºç°è‡ªåŠ¨å…³é—­çš„æƒ…å†µï¼Œé‚è¿›è¡Œæ’æŸ¥ï¼Œè®°å½•è¿‡ç¨‹ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Linux" scheme="http://silencezheng.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Mavenå¤šæ¨¡å—é¡¹ç›®ç»“æ„å®è·µ</title>
    <link href="http://silencezheng.top/2023/06/30/article105/"/>
    <id>http://silencezheng.top/2023/06/30/article105/</id>
    <published>2023-06-30T14:10:56.000Z</published>
    <updated>2023-06-30T14:12:20.899Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¤šMaven Moduleçš„é¡¹ç›®ç»“æ„ï¼Œå®è·µä¸€ä¸‹ã€‚</p><span id="more"></span><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><p>åŸºæœ¬ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›æ„å»ºçš„é¡¹ç›®ç»“æ„æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">my-project</span><br><span class="line">â”œâ”€â”€ pom<span class="selector-class">.xml</span></span><br><span class="line">â”œâ”€â”€ bom</span><br><span class="line">â”‚   â”œâ”€â”€ pom<span class="selector-class">.xml</span></span><br><span class="line">â”œâ”€â”€ my-app</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="attribute">src</span></span><br><span class="line">â”‚   â”‚   â””â”€â”€ <span class="selector-tag">main</span></span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ java</span><br><span class="line">â”‚   â”‚       â”‚   â””â”€â”€ com<span class="selector-class">.example</span><span class="selector-class">.myapp</span></span><br><span class="line">â”‚   â”‚       â”‚       â””â”€â”€ MyAppApplication<span class="selector-class">.java</span></span><br><span class="line">â”‚   â”‚       â””â”€â”€ resources</span><br><span class="line">â”‚   â”‚           â””â”€â”€ application<span class="selector-class">.properties</span></span><br><span class="line">â”‚   â””â”€â”€ pom<span class="selector-class">.xml</span></span><br><span class="line">â”œâ”€â”€ my-module1</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="attribute">src</span></span><br><span class="line">â”‚   â”‚   â””â”€â”€ <span class="selector-tag">main</span></span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ java</span><br><span class="line">â”‚   â”‚       â”‚   â””â”€â”€ com<span class="selector-class">.example</span><span class="selector-class">.module1</span></span><br><span class="line">â”‚   â”‚       â”‚       â””â”€â”€ Module1Class1<span class="selector-class">.java</span></span><br><span class="line">â”‚   â”‚       â””â”€â”€ resources</span><br><span class="line">â”‚   â”‚           â””â”€â”€ module1<span class="selector-class">.properties</span></span><br><span class="line">â”‚   â””â”€â”€ pom<span class="selector-class">.xml</span></span><br><span class="line">â”œâ”€â”€ my-module2</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="attribute">src</span></span><br><span class="line">â”‚   â”‚   â””â”€â”€ <span class="selector-tag">main</span></span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ java</span><br><span class="line">â”‚   â”‚       â”‚   â””â”€â”€ com<span class="selector-class">.example</span><span class="selector-class">.module2</span></span><br><span class="line">â”‚   â”‚       â”‚       â””â”€â”€ Module2Class1<span class="selector-class">.java</span></span><br><span class="line">â”‚   â”‚       â””â”€â”€ resources</span><br><span class="line">â”‚   â”‚           â””â”€â”€ module2<span class="selector-class">.properties</span></span><br><span class="line">â”‚   â””â”€â”€ pom<span class="selector-class">.xml</span></span><br><span class="line">â””â”€â”€ my-module3</span><br><span class="line">    â”œâ”€â”€ <span class="attribute">src</span></span><br><span class="line">    â”‚   â””â”€â”€ <span class="selector-tag">main</span></span><br><span class="line">    â”‚       â”œâ”€â”€ java</span><br><span class="line">    â”‚       â”‚   â””â”€â”€ com<span class="selector-class">.example</span><span class="selector-class">.module3</span></span><br><span class="line">    â”‚       â”‚       â””â”€â”€ Module3Class1<span class="selector-class">.java</span></span><br><span class="line">    â”‚       â””â”€â”€ resources</span><br><span class="line">    â”‚           â””â”€â”€ module3<span class="selector-class">.properties</span></span><br><span class="line">    â””â”€â”€ pom.xml</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­ï¼Œ<code>MyAppApplication.java</code>æ˜¯ç¨‹åºå…¥å£ï¼Œbomä¸‹å­˜æ”¾çš„æ˜¯BOMï¼ˆBill of Materialsï¼‰ã€‚</p><blockquote><p>BOMï¼ˆBill of Materialsï¼‰æ˜¯ç”±Mavenæä¾›çš„åŠŸèƒ½,å®ƒé€šè¿‡å®šä¹‰ä¸€æ•´å¥—ç›¸äº’å…¼å®¹çš„jaråŒ…ç‰ˆæœ¬é›†åˆï¼Œä½¿ç”¨æ—¶åªéœ€è¦ä¾èµ–è¯¥BOMæ–‡ä»¶ï¼Œå³å¯æ”¾å¿ƒçš„ä½¿ç”¨éœ€è¦çš„ä¾èµ–jaråŒ…ï¼Œä¸”æ— éœ€å†æŒ‡å®šç‰ˆæœ¬å·ã€‚BOMçš„ç»´æŠ¤æ–¹è´Ÿè´£ç‰ˆæœ¬å‡çº§ï¼Œå¹¶ä¿è¯BOMä¸­å®šä¹‰çš„jaråŒ…ç‰ˆæœ¬ä¹‹é—´çš„å…¼å®¹æ€§ã€‚</p><p>BOMæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ™®é€šçš„POMæ–‡ä»¶ï¼ŒåŒºåˆ«æ˜¯å¯¹äºä½¿ç”¨æ–¹è€Œè¨€ï¼Œç”Ÿæ•ˆçš„åªæœ‰<code>&lt;dependencyManagement&gt;</code>è¿™ä¸€ä¸ªéƒ¨åˆ†ã€‚åªéœ€è¦åœ¨<code>&lt;dependencyManagement&gt;</code>å®šä¹‰å¯¹å¤–å‘å¸ƒçš„å®¢æˆ·ç«¯ç‰ˆæœ¬å³å¯ã€‚</p></blockquote><p>åœ¨è¿™ç§é¡¹ç›®ç»“æ„ä¸­ï¼Œä¸»é¡¹ç›®ï¼ˆmy-projectï¼‰ä½œä¸ºçˆ¶æ¨¡å—ï¼ŒåŒ…å«äº†æ‰€æœ‰å­æ¨¡å—ï¼ˆmy-appã€my-module1ã€my-module2ã€my-module3â€¦ï¼‰ã€‚æ¯ä¸ªå­æ¨¡å—éƒ½æœ‰è‡ªå·±çš„æºä»£ç ç›®å½•ï¼ˆsrc/main/javaï¼‰å’Œèµ„æºç›®å½•ï¼ˆsrc/main/resourcesï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªå­æ¨¡å—éƒ½æœ‰è‡ªå·±çš„ pom.xml æ–‡ä»¶æ¥å®šä¹‰å…¶ä¾èµ–å’Œé…ç½®ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å¼€å§‹é€æ­¥æ„å»ºé¡¹ç›®ã€‚</p><h2 id="1-æ„å»ºåˆå§‹é¡¹ç›®ç»“æ„"><a href="#1-æ„å»ºåˆå§‹é¡¹ç›®ç»“æ„" class="headerlink" title="1. æ„å»ºåˆå§‹é¡¹ç›®ç»“æ„"></a>1. æ„å»ºåˆå§‹é¡¹ç›®ç»“æ„</h2><p>æ–°å»ºMavençˆ¶é¡¹ç›®ï¼Œå¹¶åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸‰ä¸ªMaven Moduleï¼Œåˆ†åˆ«ä¸º<code>bomã€myappã€myappmodule1</code>ã€‚</p><h2 id="2-ç¼–å†™BOM"><a href="#2-ç¼–å†™BOM" class="headerlink" title="2. ç¼–å†™BOM"></a>2. ç¼–å†™BOM</h2><p>å®šä¹‰BOMå¦‚ä¸‹ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- author: SilenceZheng66 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.silencezheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Archetype - bom<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>åŸºç¡€ bom æ–‡ä»¶ï¼Œç®¡ç†æ•´ä¸ªé¡¹ç›®çš„ä¾èµ–ç‰ˆæœ¬<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">revision</span>&gt;</span>1.0.0-snapshot<span class="tag">&lt;/<span class="name">revision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.boot.version</span>&gt;</span>2.7.6<span class="tag">&lt;/<span class="name">spring.boot.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql-connector-j.version</span>&gt;</span>8.0.33<span class="tag">&lt;/<span class="name">mysql-connector-j.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.26<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis-plus-boot-starter.version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">mybatis-plus-boot-starter.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql-connector-j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus-boot-starter.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="3-ç¼–å†™çˆ¶é¡¹ç›®POM"><a href="#3-ç¼–å†™çˆ¶é¡¹ç›®POM" class="headerlink" title="3. ç¼–å†™çˆ¶é¡¹ç›®POM"></a>3. ç¼–å†™çˆ¶é¡¹ç›®POM</h2><p>å¼•å…¥BOMã€‚<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- author: SilenceZheng66 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.silencezheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>multi-maven-module<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Archetype - multi-maven-module<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>å¤šæ¨¡å—Mavené¡¹ç›®<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>bom<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Server ä¸»é¡¹ç›® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>myapp<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å„ç§ module æ‹“å±• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>myappmodule1<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">revision</span>&gt;</span>1.0.0-snapshot<span class="tag">&lt;/<span class="name">revision</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Maven ç›¸å…³ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  è¿™é‡Œé€‰8æ˜¯å› ä¸ºMavenå…¼å®¹æ€§é—®é¢˜ï¼Œæœ¬æ¥è¦ä¸Š17ä½†æ˜¯è¿˜éœ€è¦æ¢Maven  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven-compiler-plugin.version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">maven-compiler-plugin.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.silencezheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- å¯¹å¤šæ¨¡å—é¡¹ç›®ç»“æ„ä¼¼ä¹æ˜¯å¿…é¡»çš„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-compiler-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">source</span>&gt;</span>$&#123;java.version&#125;<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">target</span>&gt;</span>$&#123;java.version&#125;<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ³¨æ„ç¼–ç å¾ˆé‡è¦ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´MojoExecutionException --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>$&#123;project.build.sourceEncoding&#125;<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ä½¿ç”¨ aliyun çš„ Maven æºï¼Œæå‡ä¸‹è½½é€Ÿåº¦ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="4-ç¼–å†™ç¨‹åºå…¥å£POM"><a href="#4-ç¼–å†™ç¨‹åºå…¥å£POM" class="headerlink" title="4. ç¼–å†™ç¨‹åºå…¥å£POM"></a>4. ç¼–å†™ç¨‹åºå…¥å£POM</h2><p>è¿™é‡Œä¸éœ€è¦å†æŒ‡å®šjavaç‰ˆæœ¬å’ŒåŒ…ç‰ˆæœ¬äº†ã€‚å¦‚æœéœ€è¦ä½¿ç”¨ä¸åŒäºå½“å‰bomä¸­æ‰€ç»´æŠ¤çš„jaråŒ…ç‰ˆæœ¬ï¼Œåˆ™åŠ ä¸Š<code>&lt;version&gt;</code>è¦†ç›–å³å¯<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- author: SilenceZheng66 --&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.silencezheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>multi-maven-module<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.silencezheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>myapp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>myapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>myapp<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®æ„å»ºçš„ jar åŒ…å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ‰“åŒ… --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- å¦‚æœ spring.boot.version ç‰ˆæœ¬ä¿®æ”¹ï¼Œåˆ™è¿™é‡Œä¹Ÿè¦è·Ÿç€ä¿®æ”¹ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span> <span class="comment">&lt;!-- å°†å¼•å…¥çš„ jar æ‰“å…¥å…¶ä¸­ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="5-ç¼–å†™æ¨¡å—POM"><a href="#5-ç¼–å†™æ¨¡å—POM" class="headerlink" title="5. ç¼–å†™æ¨¡å—POM"></a>5. ç¼–å†™æ¨¡å—POM</h2><p>æä¾›ä¸€ä¸ªç¤ºä¾‹ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- author: SilenceZheng66 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.silencezheng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>multi-maven-module<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>myappmodule1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>myappmodule1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="6-æ‰“åŒ…"><a href="#6-æ‰“åŒ…" class="headerlink" title="6. æ‰“åŒ…"></a>6. æ‰“åŒ…</h2><p>éšä¾¿æ‰¾ä¸ªè¡¨ç”¨MyBatisXç”Ÿæˆä»£ç ï¼Œç„¶åè¿è¡Œé€šè¿‡åå°±å¯ä»¥æ‰“åŒ…äº†ï¼š<code>mvn clean package -Dmaven.test.skip=true</code>ã€‚</p><p><img src="/assets/post_img/article105/directory-structure.png" alt="ds"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å¤šMaven Moduleçš„é¡¹ç›®ç»“æ„ï¼Œå®è·µä¸€ä¸‹ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="http://silencezheng.top/tags/Java/"/>
    
    <category term="Maven" scheme="http://silencezheng.top/tags/Maven/"/>
    
  </entry>
  
  <entry>
    <title>MyBatiså¿«é€Ÿå…¥é—¨</title>
    <link href="http://silencezheng.top/2023/06/18/article104/"/>
    <id>http://silencezheng.top/2023/06/18/article104/</id>
    <published>2023-06-18T05:10:01.000Z</published>
    <updated>2023-06-18T05:13:24.729Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ”’ä¸€ä¸ªMyBatiså¿«é€Ÿå…¥é—¨ï¼ŒMPç”¨çš„å¤šï¼Œä½†å¯¹äºMyBatisè¿˜ä¸å¤Ÿäº†è§£ï¼Œå­¦ä¹ ä¹‹ã€‚</p><p>å†™äº†ä¸¤ä¸ªDemoï¼Œåˆ†åˆ«æ˜¯ä¸ç”¨æ¡†æ¶å’Œç”¨Springã€‚<br><span id="more"></span></p><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>MyBatis æ˜¯ä¸€æ¬¾æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p><p>ä¸‹é¢ä»¥ä¸¤ä¸ªç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•æ„å»ºåŸºäºMyBatisçš„åº”ç”¨ã€‚</p><h2 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h2><p>å‡è®¾æœ‰ä¸€ä¸ªå­¦ç”Ÿè¡¨ï¼ˆstudentsï¼‰ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p><ul><li>id (ä¸»é”®ï¼Œè‡ªå¢)</li><li>name (å­¦ç”Ÿå§“å)</li><li>age (å­¦ç”Ÿå¹´é¾„)</li><li>grade (å­¦ç”Ÿå¹´çº§)</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> author: SilenceZheng66</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> students (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">  name <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">  age <span class="type">INT</span>,</span><br><span class="line">  grade <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students (name, age, grade) <span class="keyword">VALUES</span></span><br><span class="line">  (<span class="string">&#x27;Alice&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;Grade 10&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;Bob&#x27;</span>, <span class="number">17</span>, <span class="string">&#x27;Grade 11&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;Charlie&#x27;</span>, <span class="number">16</span>, <span class="string">&#x27;Grade 9&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="1ã€ä¸ç”¨æ¡†æ¶æ„å»ºåŸºäºMyBatisçš„åº”ç”¨"><a href="#1ã€ä¸ç”¨æ¡†æ¶æ„å»ºåŸºäºMyBatisçš„åº”ç”¨" class="headerlink" title="1ã€ä¸ç”¨æ¡†æ¶æ„å»ºåŸºäºMyBatisçš„åº”ç”¨"></a>1ã€ä¸ç”¨æ¡†æ¶æ„å»ºåŸºäºMyBatisçš„åº”ç”¨</h2><h3 id="1-å®‰è£…MyBatis"><a href="#1-å®‰è£…MyBatis" class="headerlink" title="1. å®‰è£…MyBatis"></a>1. å®‰è£…MyBatis</h3><p><a href="https://github.com/mybatis/mybatis-3/releases">ä¸‹è½½</a>MyBatisçš„jaråŒ…å¹¶æ”¾ç½®äºç±»è·¯å¾„ä¸­ã€‚æ­¤å¤–è¿˜éœ€è¦mysql-connector-javaã€‚</p><h3 id="2-ç¼–å†™MyBatisé…ç½®æ–‡ä»¶-mybatis-config-xml"><a href="#2-ç¼–å†™MyBatisé…ç½®æ–‡ä»¶-mybatis-config-xml" class="headerlink" title="2. ç¼–å†™MyBatisé…ç½®æ–‡ä»¶ mybatis-config.xml"></a>2. ç¼–å†™MyBatisé…ç½®æ–‡ä»¶ mybatis-config.xml</h3><p>å½“ä½¿ç”¨MyBatisæ¡†æ¶æ—¶ï¼Œå¦‚æœå°†é…ç½®æ–‡ä»¶å‘½åä¸º<code>mybatis-config.xml</code>ï¼Œé‚£ä¹ˆMyBatisä¼šé»˜è®¤å»åŠ è½½è¿™ä¸ªæ–‡ä»¶ä½œä¸ºé…ç½®æ–‡ä»¶ã€‚å¦åˆ™éœ€è¦åœ¨ä»£ç ä¸­æ˜¾å¼æŒ‡å®šé…ç½®æ–‡ä»¶çš„åç§°ï¼Œé€šè¿‡<code>SqlSessionFactoryBuilder</code>çš„buildæ–¹æ³•ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- XML æ–‡ä»¶çš„å£°æ˜éƒ¨åˆ†ï¼ŒæŒ‡å®šäº† XML çš„ç‰ˆæœ¬å’Œç¼–ç æ–¹å¼ã€‚ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- DTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰å£°æ˜ï¼ŒæŒ‡å®šäº† MyBatis é…ç½®æ–‡ä»¶çš„æ ¼å¼å’Œè§„èŒƒã€‚ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ ¹å…ƒç´ ï¼Œè¡¨ç¤º MyBatis çš„é…ç½®æ–‡ä»¶çš„èµ·å§‹ç‚¹ã€‚ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å®šä¹‰äº†ç¯å¢ƒé…ç½®ï¼Œå…¶ä¸­ default å±æ€§æŒ‡å®šäº†é»˜è®¤çš„ç¯å¢ƒã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰äº†ä¸€ä¸ªç¯å¢ƒï¼Œå…¶ä¸­ id å±æ€§æŒ‡å®šäº†ç¯å¢ƒçš„å”¯ä¸€æ ‡è¯†ã€‚ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨çš„ç±»å‹ä¸º JDBCï¼Œè¡¨ç¤ºä½¿ç”¨ JDBC è¿›è¡Œäº‹åŠ¡ç®¡ç†ã€‚ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æŒ‡å®šæ•°æ®æºçš„ç±»å‹ä¸º POOLEDï¼Œè¡¨ç¤ºä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“è¿æ¥ã€‚MyBatisæ¡†æ¶å†…éƒ¨åŒ…å«ä¸€ä¸ªç®€å•çš„è¿æ¥æ± å®ç°ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®æ•°æ®åº“é©±åŠ¨çš„ç±»åã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mydatabase&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®æ•°æ®åº“çš„ URLã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;myuser&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mypassword&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªæ˜ å°„å™¨ï¼ˆMapperï¼‰é…ç½®ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;StudentMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šäº†æ˜ å°„å™¨é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œå…¶ä¸­ resource å±æ€§å€¼ä¸ºç›¸å¯¹äºé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-ç¼–å†™æ˜ å°„æ–‡ä»¶-StudentMapper-xml"><a href="#3-ç¼–å†™æ˜ å°„æ–‡ä»¶-StudentMapper-xml" class="headerlink" title="3. ç¼–å†™æ˜ å°„æ–‡ä»¶ StudentMapper.xml"></a>3. ç¼–å†™æ˜ å°„æ–‡ä»¶ StudentMapper.xml</h3><p>ç®€å•çš„æŸ¥æ‰¾ã€‚æ³¨æ„é…ç½®æ–‡ä»¶é€šå¸¸æ”¾åœ¨<code>resources</code>ç›®å½•ä¸‹ï¼Œä¾‹å¦‚<code>src/main/resources</code>ã€‚<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;mybatis.simple.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllStudents&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;mybatis.simple.Student&quot;</span>&gt;</span></span><br><span class="line">        SELECT * FROM students</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h3 id="4-ç¼–å†™å®ä½“ç±»-Student-java"><a href="#4-ç¼–å†™å®ä½“ç±»-Student-java" class="headerlink" title="4. ç¼–å†™å®ä½“ç±» Student.java"></a>4. ç¼–å†™å®ä½“ç±» Student.java</h3><p>ç”¨äº†ä¸€ä¸‹Lombokï¼Œä¹ŸåŠ è¿›ç±»è·¯å¾„å°±å¯ä»¥äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">package</span> mybatis.simple;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String grade;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student [id=&quot;</span> + id + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, grade=&quot;</span> + grade + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-ç¼–å†™æ•°æ®è®¿é—®æ¥å£-StudentMapper"><a href="#5-ç¼–å†™æ•°æ®è®¿é—®æ¥å£-StudentMapper" class="headerlink" title="5. ç¼–å†™æ•°æ®è®¿é—®æ¥å£ StudentMapper"></a>5. ç¼–å†™æ•°æ®è®¿é—®æ¥å£ StudentMapper</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">package</span> mybatis.simple;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Student&gt; <span class="title">getAllStudents</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-ç¼–å†™æ•°æ®è®¿é—®æ¥å£å®ç°ç±»"><a href="#6-ç¼–å†™æ•°æ®è®¿é—®æ¥å£å®ç°ç±»" class="headerlink" title="6. ç¼–å†™æ•°æ®è®¿é—®æ¥å£å®ç°ç±»"></a>6. ç¼–å†™æ•°æ®è®¿é—®æ¥å£å®ç°ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">package</span> mybatis.simple;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentMapperImpl</span> <span class="keyword">implements</span> <span class="title">StudentMapper</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentMapperImpl</span><span class="params">(SqlSessionFactory sqlSessionFactory)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sqlSessionFactory = sqlSessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">getAllStudents</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (SqlSession session = sqlSessionFactory.openSession()) &#123;</span><br><span class="line">            StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">            <span class="keyword">return</span> mapper.getAllStudents();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-ç¼–å†™ä¸»ç¨‹åº"><a href="#7-ç¼–å†™ä¸»ç¨‹åº" class="headerlink" title="7. ç¼–å†™ä¸»ç¨‹åº"></a>7. ç¼–å†™ä¸»ç¨‹åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mybatis.simple;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">// åŠ è½½ MyBatis é…ç½®æ–‡ä»¶</span></span><br><span class="line">    String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">    InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">    SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»º StudentMapper å¯¹è±¡</span></span><br><span class="line">    StudentMapper studentMapper = <span class="keyword">new</span> StudentMapperImpl(sqlSessionFactory);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨æ–¹æ³•è·å–æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line">    List&lt;Student&gt; students = studentMapper.getAllStudents();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">      System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">Student [id=<span class="number">1</span>, name=Alice, age=<span class="number">18</span>, grade=Grade <span class="number">10</span>]</span><br><span class="line">Student [id=<span class="number">2</span>, name=Bob, age=<span class="number">17</span>, grade=Grade <span class="number">11</span>]</span><br><span class="line">Student [id=<span class="number">3</span>, name=Charlie, age=<span class="number">16</span>, grade=Grade <span class="number">9</span>]</span><br></pre></td></tr></table></figure><h2 id="2ã€-ç”¨Spring-Bootæ„å»ºåŸºäºMyBatisçš„åº”ç”¨"><a href="#2ã€-ç”¨Spring-Bootæ„å»ºåŸºäºMyBatisçš„åº”ç”¨" class="headerlink" title="2ã€ ç”¨Spring Bootæ„å»ºåŸºäºMyBatisçš„åº”ç”¨"></a>2ã€ ç”¨Spring Bootæ„å»ºåŸºäºMyBatisçš„åº”ç”¨</h2><p>ä»ä¸€ä¸ªç©ºMavené¡¹ç›®å¼€å§‹ã€‚</p><h3 id="1-å¼•å…¥ä¾èµ–"><a href="#1-å¼•å…¥ä¾èµ–" class="headerlink" title="1. å¼•å…¥ä¾èµ–"></a>1. å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.28<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-åœ¨-application-properties-é…ç½®æ•°æ®åº“"><a href="#2-åœ¨-application-properties-é…ç½®æ•°æ®åº“" class="headerlink" title="2. åœ¨ application.properties é…ç½®æ•°æ®åº“"></a>2. åœ¨ application.properties é…ç½®æ•°æ®åº“</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.url</span>=jdbc:mysql://localhost:<span class="number">3306</span>/mydatabase</span><br><span class="line"><span class="attr">spring.datasource.username</span>=myuser</span><br><span class="line"><span class="attr">spring.datasource.password</span>=mypassword</span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=classpath*:/mapper/*.xml</span><br></pre></td></tr></table></figure><h3 id="3-åˆ›å»ºå®ä½“ç±»"><a href="#3-åˆ›å»ºå®ä½“ç±»" class="headerlink" title="3. åˆ›å»ºå®ä½“ç±»"></a>3. åˆ›å»ºå®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">package</span> slz.mybatis.spring.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String grade;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student [id=&quot;</span> + id + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, grade=&quot;</span> + grade + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-åˆ›å»º-Mapper-æ¥å£å’Œå¯¹åº”çš„-XML-æ˜ å°„æ–‡ä»¶ã€‚"><a href="#4-åˆ›å»º-Mapper-æ¥å£å’Œå¯¹åº”çš„-XML-æ˜ å°„æ–‡ä»¶ã€‚" class="headerlink" title="4. åˆ›å»º Mapper æ¥å£å’Œå¯¹åº”çš„ XML æ˜ å°„æ–‡ä»¶ã€‚"></a>4. åˆ›å»º Mapper æ¥å£å’Œå¯¹åº”çš„ XML æ˜ å°„æ–‡ä»¶ã€‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">package</span> slz.mybatis.spring.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> slz.mybatis.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Student&gt; <span class="title">getAllStudents</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>XMLæ˜ å°„æ–‡ä»¶æ”¾ç½®åœ¨resourcesä¸‹çš„mapperç›®å½•ä¸­ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;slz.mybatis.spring.mapper.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllStudents&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;slz.mybatis.spring.entity.Student&quot;</span>&gt;</span></span><br><span class="line">        SELECT * FROM students</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-ç¼–å†™æœåŠ¡ç±»"><a href="#5-ç¼–å†™æœåŠ¡ç±»" class="headerlink" title="5. ç¼–å†™æœåŠ¡ç±»"></a>5. ç¼–å†™æœåŠ¡ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">package</span> slz.mybatis.spring.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> slz.mybatis.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> slz.mybatis.spring.mapper.StudentMapper;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> StudentMapper studentMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentService</span><span class="params">(StudentMapper studentMapper)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.studentMapper = studentMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">getAllStudents</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentMapper.getAllStudents();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>@Autowired</code>è¡¨ç¤ºéœ€è¦é€šè¿‡è‡ªåŠ¨è£…é…çš„æ–¹å¼å°† StudentMapper å¯¹è±¡æ³¨å…¥åˆ° StudentService ç±»ä¸­ã€‚</p><h3 id="6-ç¼–å†™æ§åˆ¶å™¨"><a href="#6-ç¼–å†™æ§åˆ¶å™¨" class="headerlink" title="6. ç¼–å†™æ§åˆ¶å™¨"></a>6. ç¼–å†™æ§åˆ¶å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">package</span> slz.mybatis.spring.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> slz.mybatis.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> slz.mybatis.spring.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> StudentService studentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentController</span><span class="params">(StudentService studentService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.studentService = studentService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/students&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">getAllStudents</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentService.getAllStudents();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-ç¼–å†™å…¥å£ç±»"><a href="#7-ç¼–å†™å…¥å£ç±»" class="headerlink" title="7. ç¼–å†™å…¥å£ç±»"></a>7. ç¼–å†™å…¥å£ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="keyword">package</span> slz.mybatis.spring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &#123;&quot;slz.mybatis.spring.mapper.**&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        org.springframework.boot.SpringApplication.run(SpringApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯åŠ¨åè®¿é—®ï¼š<code>http://localhost:8080/students</code>å³å¯æŸ¥çœ‹å­¦ç”Ÿä¿¡æ¯ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://mybatis.org/mybatis-3/zh/getting-started.html">https://mybatis.org/mybatis-3/zh/getting-started.html</a><br>[2] <a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1260466914339296">https://www.liaoxuefeng.com/wiki/1252599548343744/1260466914339296</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é€šè¿‡<code>mybatis-spring-boot-starter</code>é…ç½®MyBatisæ¯”åŸç‰ˆæœ‰äº†ä¸€äº›ä¾¿åˆ©ï¼Œä¾‹å¦‚é€šè¿‡æ³¨è§£æŒ‡å®šMapperç±»æ‰«æè·¯å¾„è‡ªåŠ¨æ³¨å†Œã€è‡ªåŠ¨é…ç½®SqlSessionFactoryã€è‡ªåŠ¨æ³¨å…¥Mapperå®ä¾‹ç­‰ã€‚</p><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æ”’ä¸€ä¸ªMyBatiså¿«é€Ÿå…¥é—¨ï¼ŒMPç”¨çš„å¤šï¼Œä½†å¯¹äºMyBatisè¿˜ä¸å¤Ÿäº†è§£ï¼Œå­¦ä¹ ä¹‹ã€‚&lt;/p&gt;
&lt;p&gt;å†™äº†ä¸¤ä¸ªDemoï¼Œåˆ†åˆ«æ˜¯ä¸ç”¨æ¡†æ¶å’Œç”¨Springã€‚&lt;br&gt;</summary>
    
    
    
    
    <category term="Java" scheme="http://silencezheng.top/tags/Java/"/>
    
    <category term="Spring" scheme="http://silencezheng.top/tags/Spring/"/>
    
    <category term="MyBatis" scheme="http://silencezheng.top/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>æ‰“åŒ…Flaskåº”ç”¨ä¸ºDockeré•œåƒ</title>
    <link href="http://silencezheng.top/2023/06/12/article103/"/>
    <id>http://silencezheng.top/2023/06/12/article103/</id>
    <published>2023-06-12T01:23:31.000Z</published>
    <updated>2023-06-12T01:29:37.126Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è®°å½•ä¸€æ¬¡æ‰“åŒ…Flaskåº”ç”¨çš„è¿‡ç¨‹ï¼Œåœ¨Ubuntu(amd64)ä¸‹ã€‚</p><p>è™½ç„¶çœ‹ç€ç®€å•ï¼Œä½†å¤„ç†è½¯ä»¶ä¾èµ–å’Œç³»ç»Ÿç¯å¢ƒå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå°é—®é¢˜ï¼Œéœ€è¦è€å¿ƒé€ä¸ªè§£å†³ã€‚<br><span id="more"></span></p><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>æ‰“åŒ…Flaskåº”ç”¨åŠå…¶æ‰€æœ‰æ‰€éœ€çš„ç¯å¢ƒä¸ºé•œåƒï¼Œç”¨æˆ·æ‹‰å–é•œåƒåç›´æ¥è¿è¡Œå³å¯ä½¿ç”¨æœåŠ¡ã€‚</p><p>ç¯å¢ƒä¾èµ–åŒ…å«æ˜¾å¡é©±åŠ¨ã€ç¼–è¯‘å™¨ã€æ‰€éœ€æ–‡ä»¶å’ŒPythonåŒ…ç­‰ã€‚</p><p>æ³¨æ„æ‰“åŒ…çš„æœºå™¨çš„æ“ä½œç³»ç»Ÿä¸å¾ˆé‡è¦ï¼Œä½†æ¶æ„å¾ˆé‡è¦ï¼Œæœ€å¥½ä¿æŒæ‰“åŒ…æœºçš„æ¶æ„ä¸è¦éƒ¨ç½²çš„æœåŠ¡å™¨æ¶æ„ä¸€è‡´ï¼ˆamd64ã€arm64ï¼‰ã€‚</p><blockquote><p>æœ‰ä¸€äº›å·¥å…·å’ŒæŠ€æœ¯å¯ä»¥å¸®åŠ©å®ç°è·¨æ¶æ„çš„é•œåƒæ„å»ºï¼Œä¾‹å¦‚ buildx å·¥å…·å’Œå¤šæ¶æ„çš„ Docker é•œåƒã€‚buildx æ˜¯ Docker çš„å®˜æ–¹å¤šæ¶æ„æ„å»ºå·¥å…·ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨ä¸€å°æœºå™¨ä¸ŠåŒæ—¶æ„å»ºå¤šä¸ªä¸åŒæ¶æ„çš„é•œåƒã€‚å¤šæ¶æ„çš„ Docker é•œåƒåˆ™å…è®¸ä½ åœ¨åŒä¸€ä¸ªé•œåƒä¸­åŒ…å«å¤šä¸ªæ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½¿å…¶é€‚ç”¨äºä¸åŒçš„æœºå™¨ã€‚</p></blockquote><h2 id="ä¿®æ”¹åœ°å€"><a href="#ä¿®æ”¹åœ°å€" class="headerlink" title="ä¿®æ”¹åœ°å€"></a>ä¿®æ”¹åœ°å€</h2><p>ä¸ºäº†ä½¿æœåŠ¡èƒ½å¤Ÿè¢«æœ¬æœºå¤–çš„è®¾å¤‡è®¿é—®ï¼Œéœ€è¦å°†ä¸»æœºåœ°å€ä¿®æ”¹ä¸º<code>0.0.0.0</code>ï¼ˆæˆ–å…¶ä»–æŒ‡å®šåœ°å€ï¼‰ã€‚</p><p>æ–¹å¼ä¸€ï¼Œåœ¨ä»£ç ä¸­æŒ‡å®šé…ç½®ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>)</span><br></pre></td></tr></table></figure></p><p>æ–¹å¼äºŒï¼Œé€šè¿‡ç»ˆç«¯å‘½ä»¤æŒ‡å®šï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> FLASK_RUN_HOST=0.0.0.0</span><br><span class="line">flask run</span><br></pre></td></tr></table></figure></p><p>æ˜¾ç„¶æ–¹å¼äºŒæ›´çµæ´»äº›ï¼Œè¦ä¿®æ”¹æœåŠ¡çš„é…ç½®ï¼Œç›´æ¥åœ¨Dockerfileä¸­ä¿®æ”¹å°±å¯ä»¥äº†ã€‚</p><h2 id="å¯¼å‡ºPythonçš„ä¾èµ–"><a href="#å¯¼å‡ºPythonçš„ä¾èµ–" class="headerlink" title="å¯¼å‡ºPythonçš„ä¾èµ–"></a>å¯¼å‡ºPythonçš„ä¾èµ–</h2><p>å€ŸåŠ©pipreqså¯¼å‡ºä¾èµ–æ–‡ä»¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># author: SilenceZheng66</span></span><br><span class="line">python -m pip install pipreqs <span class="comment"># å®‰è£…</span></span><br><span class="line"></span><br><span class="line">pipreqs ./ --encoding=utf8 <span class="comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å¯¼å‡º</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™Dockerfile"><a href="#ç¼–å†™Dockerfile" class="headerlink" title="ç¼–å†™Dockerfile"></a>ç¼–å†™Dockerfile</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºDockerfileã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># author: SilenceZheng66</span></span><br><span class="line"><span class="comment"># åŸºç¡€é•œåƒï¼Œè¿™é‡Œç›´æ¥é€‰æ‹©å¸¦æ˜¾å¡é©±åŠ¨çš„</span></span><br><span class="line"><span class="keyword">FROM</span> nvidia/cuda:<span class="number">10.0</span>-cudnn7-runtime-ubuntu18.<span class="number">04</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®ç¨‹åºä¾èµ–çš„ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y --no-install-recommends \</span></span><br><span class="line"><span class="bash">        build-essential \</span></span><br><span class="line"><span class="bash">        cmake \</span></span><br><span class="line"><span class="bash">        curl \</span></span><br><span class="line"><span class="bash">    wget \</span></span><br><span class="line"><span class="bash">        python3-dev \</span></span><br><span class="line"><span class="bash">        python3-pip</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…ç†APTåŒ…ç®¡ç†å™¨ç¼“å­˜åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å½“å‰é¡¹ç›®å¤åˆ¶åˆ°å®¹å™¨å†…ï¼Œè¿™é‡Œé€‰æ‹©åœ¨/workspaceç›®å½•ä¸‹</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /workspace</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶å·¥ä½œç›®å½•</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /workspace</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…setuptoolsï¼Œå¤–éƒ¨åº“éœ€è¦</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> wget --no-check-certificate https://pypi.python.org/packages/<span class="built_in">source</span>/s/setuptools/setuptools-19.6.tar.gz<span class="comment">#md5=c607dd118eae682c44ed146367a17e26 &amp;&amp; tar -zxvf setuptools-19.6.tar.gz &amp;&amp; cd setuptools-19.6 &amp;&amp; python3 setup.py build &amp;&amp; python3 setup.py install &amp;&amp; cd .. &amp;&amp; rm -rf setuptools-19.6</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…PythonåŒ…</span></span><br><span class="line"><span class="comment"># æ¸…åæºï¼š -i https://pypi.tuna.tsinghua.edu.cn/simple</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.txt</span></span><br><span class="line"><span class="comment"># å®‰è£…é¢å¤–ä¾èµ–</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install torch_sparse torch_scatter</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æœ¬åœ°åŒ–ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä¹‹åçš„Flaské…ç½®ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment"># æ³¨æ„ä¸è¦ç”¨RUNï¼ŒRUNä»…åœ¨æœ¬å±‚é…ç½®</span></span><br><span class="line"><span class="keyword">ENV</span> LC_ALL=C.UTF_8</span><br><span class="line"><span class="keyword">ENV</span> LANG=C.UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®Flaskç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="keyword">ENV</span> FLASK_RUN_HOST=<span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æš´éœ²ç«¯å£</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šå®¹å™¨å¯åŠ¨å‘½ä»¤</span></span><br><span class="line"><span class="comment"># .pyå¯åŠ¨</span></span><br><span class="line"><span class="comment"># CMD [&quot;/usr/bin/python3&quot;, &quot;/workspace/app.py&quot;]</span></span><br><span class="line"><span class="comment"># ç›´æ¥å¯åŠ¨</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;flask&quot;</span>, <span class="string">&quot;run&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ—¶å€™ä¹Ÿæ˜¯æ—¢å¯ä»¥åœ¨Dockerfileé‡Œå†™æ­»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®¹å™¨è¿è¡Œå‘½ä»¤<code>docker run</code>çš„<code>-e</code>å‚æ•°æŒ‡å®šã€‚</p><h2 id="æ‰“åŒ…é•œåƒ"><a href="#æ‰“åŒ…é•œåƒ" class="headerlink" title="æ‰“åŒ…é•œåƒ"></a>æ‰“åŒ…é•œåƒ</h2><p>è¿›å…¥é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºDockeré•œåƒï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t flask-api .</span><br></pre></td></tr></table></figure></p><p>æ„å»ºå®Œæˆåå¯ä»¥é€šè¿‡<code>docker images</code>æŸ¥çœ‹ã€‚</p><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>æ ¼å¼ä¸ºï¼š<br><code>docker run -p host-port:container-port image-name</code></p><p>æ”¾åœ¨æˆ‘è¿™é‡Œæ˜ å°„åˆ°5001ç«¯å£å°±æ˜¯ï¼š<br><code>docker run -p 5001:5000 flask-api</code></p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>ä»¥è¯·æ±‚ä½“ä¸ºjsonæ ¼å¼ä¸ºä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -H <span class="string">&quot;Content-Type: application/json&quot;</span> -d @path/to/file.json URL</span><br></pre></td></tr></table></figure><br>æ³¨æ„curlä¸­@ç”¨äºè¡¨ç¤ºä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚</p><h2 id="å¯¼å‡ºé•œåƒ"><a href="#å¯¼å‡ºé•œåƒ" class="headerlink" title="å¯¼å‡ºé•œåƒ"></a>å¯¼å‡ºé•œåƒ</h2><p>ä¿å­˜ä¸ºå‹ç¼©æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save -o &lt;ä¿å­˜è·¯å¾„/æ–‡ä»¶å.tar&gt; &lt;é•œåƒåç§°:æ ‡ç­¾&gt;</span><br></pre></td></tr></table></figure></p><h2 id="å¯¼å…¥é•œåƒ"><a href="#å¯¼å…¥é•œåƒ" class="headerlink" title="å¯¼å…¥é•œåƒ"></a>å¯¼å…¥é•œåƒ</h2><p>é€šè¿‡å‹ç¼©æ–‡ä»¶å¯¼å…¥ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i &lt;é•œåƒæ–‡ä»¶.tar&gt;</span><br></pre></td></tr></table></figure></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è®°å½•ä¸€æ¬¡æ‰“åŒ…Flaskåº”ç”¨çš„è¿‡ç¨‹ï¼Œåœ¨Ubuntu(amd64)ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶çœ‹ç€ç®€å•ï¼Œä½†å¤„ç†è½¯ä»¶ä¾èµ–å’Œç³»ç»Ÿç¯å¢ƒå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå°é—®é¢˜ï¼Œéœ€è¦è€å¿ƒé€ä¸ªè§£å†³ã€‚&lt;br&gt;</summary>
    
    
    
    
    <category term="Docker" scheme="http://silencezheng.top/tags/Docker/"/>
    
    <category term="Python" scheme="http://silencezheng.top/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ç‰¹æ®Šç½‘ç»œåœ°å€</title>
    <link href="http://silencezheng.top/2023/06/12/article102/"/>
    <id>http://silencezheng.top/2023/06/12/article102/</id>
    <published>2023-06-12T00:43:16.000Z</published>
    <updated>2023-06-12T01:04:11.973Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>127.0.0.1ã€localhostå’Œ0.0.0.0æ˜¯ç½‘ç»œåœ°å€ä¸­å¸¸è§çš„ä¸€äº›ç‰¹æ®Šç”¨æ³•ï¼Œå®ƒä»¬åœ¨ç½‘ç»œé€šä¿¡ä¸­æœ‰ä¸åŒçš„å«ä¹‰å’Œç”¨é€”ã€‚<br><span id="more"></span></p><h2 id="127-0-0-1"><a href="#127-0-0-1" class="headerlink" title="127.0.0.1"></a>127.0.0.1</h2><ul><li>127.0.0.1 æ˜¯ IPv4 çš„å›ç¯åœ°å€ï¼ˆloopback addressï¼‰ï¼Œé€šå¸¸ç§°ä¸ºæœ¬åœ°å›ç¯åœ°å€ã€‚æ‰€æœ‰127å¼€å¤´çš„éƒ½æ˜¯å›ç¯åœ°å€ã€‚</li><li>å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨ 127.0.0.1 ä½œä¸ºä¸»æœºåœ°å€æ—¶ï¼Œå®ƒå°†ä¸æœ¬åœ°è®¡ç®—æœºä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºè¿›è¡Œé€šä¿¡ã€‚</li><li>ä¾‹å¦‚ï¼Œå½“ä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://127.0.0.1</code> æˆ– <code>http://localhost</code> æ—¶ï¼Œå®ƒä»¬éƒ½æŒ‡å‘æœ¬åœ°è®¡ç®—æœºä¸Šè¿è¡Œçš„ Web æœåŠ¡å™¨ï¼ˆé€šå¸¸æ˜¯ä½ è‡ªå·±çš„æœºå™¨ï¼‰ã€‚</li><li>è®¡ç®—æœºä»¥å›ç¯åœ°å€å‘é€çš„æ¶ˆæ¯ï¼Œå¹¶ä¸ä¼šç”±é“¾è·¯å±‚é€èµ°ï¼Œè€Œæ˜¯è¢«æœ¬æœºç½‘ç»œå±‚æ•è·ã€‚</li></ul><h2 id="localhost"><a href="#localhost" class="headerlink" title="localhost"></a>localhost</h2><ul><li>localhost æ˜¯ä¸€ä¸ªåŸŸåï¼Œå®ƒé»˜è®¤è§£æä¸º IPv4 çš„å›ç¯åœ°å€ 127.0.0.1ã€‚</li><li>å½“ä½ åœ¨æµè§ˆå™¨æˆ–å…¶ä»–åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ localhost ä½œä¸ºä¸»æœºåœ°å€æ—¶ï¼Œå®ƒå®é™…ä¸Šæ˜¯æŒ‡å‘æœ¬åœ°è®¡ç®—æœºä¸Šè¿è¡Œçš„åŒä¸€åº”ç”¨ç¨‹åºã€‚</li><li>localhost ä¹Ÿå¯ä»¥è§£æä¸º IPv6 çš„å›ç¯åœ°å€ <code>::1</code>ï¼Œå®ƒæ˜¯ IPv6 ç‰ˆæœ¬çš„ 127.0.0.1ã€‚</li></ul><h2 id="0-0-0-0"><a href="#0-0-0-0" class="headerlink" title="0.0.0.0"></a>0.0.0.0</h2><ul><li>0.0.0.0 æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ IP åœ°å€ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£ï¼ˆæ‰€æœ‰å¯ç”¨çš„ç½‘ç»œæ¥å£ï¼‰çš„åœ°å€ã€‚</li><li>å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºå°†ç›‘å¬åœ°å€è®¾ç½®ä¸º 0.0.0.0 æ—¶ï¼Œå®ƒå°†åœ¨æ‰€æœ‰å¯ç”¨çš„ç½‘ç»œæ¥å£ä¸Šç›‘å¬ä¼ å…¥çš„è¿æ¥ã€‚</li><li>è¿™æ ·å¯ä»¥ä½¿åº”ç”¨ç¨‹åºå¯¹äºä»»ä½•é€šè¿‡ç½‘ç»œæ¥å£è®¿é—®çš„è¯·æ±‚éƒ½å¯è§ï¼Œè€Œä¸ä»…ä»…æ˜¯æ¥è‡ªæœ¬åœ°è®¡ç®—æœºçš„è¯·æ±‚ã€‚</li><li>0.0.0.0 å¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å¯å¯»å€åœ°å€ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œè¡¨ç¤ºç›‘å¬æ‰€æœ‰å¯ç”¨çš„åœ°å€ã€‚</li></ul><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;127.0.0.1ã€localhostå’Œ0.0.0.0æ˜¯ç½‘ç»œåœ°å€ä¸­å¸¸è§çš„ä¸€äº›ç‰¹æ®Šç”¨æ³•ï¼Œå®ƒä»¬åœ¨ç½‘ç»œé€šä¿¡ä¸­æœ‰ä¸åŒçš„å«ä¹‰å’Œç”¨é€”ã€‚&lt;br&gt;</summary>
    
    
    
    
    <category term="è®¡ç®—æœºç½‘ç»œ" scheme="http://silencezheng.top/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>Spring Booté›†æˆSwagger</title>
    <link href="http://silencezheng.top/2023/06/05/article101/"/>
    <id>http://silencezheng.top/2023/06/05/article101/</id>
    <published>2023-06-05T14:21:14.000Z</published>
    <updated>2023-06-05T14:25:24.876Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Swaggerå…¥é—¨ä¸Spring Booté›†æˆSwaggerã€‚</p><p>ç®€å•å°è¯•äº†Springfoxå’ŒSpringdocï¼Œæ„Ÿè§‰Springdocé—®é¢˜æ›´å°‘äº›ï¼Œä½†æ–‡æ¡£ä¹Ÿç›¸å¯¹å°‘ã€‚<br><span id="more"></span></p><h2 id="å†å²"><a href="#å†å²" class="headerlink" title="å†å²"></a>å†å²</h2><p>Swaggeræœ€åˆæ˜¯ç”±Tony Tamåœ¨2010å¹´åˆ›å»ºçš„ä¸€å¥—å¼€æºå·¥å…·ï¼Œç”¨äºæè¿°å’Œå®šä¹‰RESTful APIã€‚Swaggeræä¾›äº†ä¸€ç»„æ³¨è§£å’Œå…ƒæ•°æ®ï¼Œç”¨äºæè¿°APIçš„åŸºæœ¬ä¿¡æ¯ã€æ¥å£æ“ä½œã€è¯·æ±‚å‚æ•°ã€å“åº”æ¨¡å‹ç­‰ã€‚å®ƒçš„ç›®æ ‡æ˜¯æä¾›ä¸€ç§æ ‡å‡†çš„æ–¹å¼æ¥å®šä¹‰å’Œæ–‡æ¡£åŒ–APIï¼Œä»¥ä¾¿äºå¼€å‘äººå‘˜å’Œæ¶ˆè´¹è€…èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨APIã€‚Tony Tamåœ¨2015å¹´åŠ ç›ŸSmartBear Softwareä»»VPï¼Œå¹¶å°†Swaggerç›¸å…³çš„ä¼ä¸šçº§æœåŠ¡éƒ½å¸¦åˆ°äº† SmartBearã€‚</p><p>Swaggerå›¢é˜Ÿä¸OpenAPIè§„èŒƒè¿›è¡Œäº†åˆä½œï¼Œå¹¶å°†Swaggerè§„èŒƒä½œä¸ºOpenAPIè§„èŒƒçš„åŸºç¡€ã€‚OpenAPIè§„èŒƒæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œç”¨äºæè¿°å’Œå®šä¹‰RESTful APIçš„è¯¦ç»†ä¿¡æ¯ã€‚å®ƒæä¾›äº†ä¸€ç§æœºå™¨å¯è¯»çš„æ–¹å¼æ¥æè¿°APIçš„ç»“æ„ã€è·¯å¾„ã€è¯·æ±‚å’Œå“åº”çš„å‚æ•°ã€æ¨¡å‹å®šä¹‰ç­‰ã€‚OpenAPIè§„èŒƒå…è®¸å¼€å‘äººå‘˜ã€å·¥å…·å’Œå¹³å°ä¹‹é—´çš„äº’æ“ä½œæ€§ï¼Œä½¿å¾—APIçš„è®¾è®¡ã€å¼€å‘å’Œæµ‹è¯•æ›´åŠ ç»Ÿä¸€å’Œä¾¿æ·ã€‚</p><p>å› æ­¤ï¼Œå¯ä»¥è¯´Swaggeræ˜¯OpenAPIè§„èŒƒçš„å®ç°ä¹‹ä¸€ï¼ŒSwaggeræä¾›äº†ä¸€å¥—å·¥å…·å’Œæ¡†æ¶ï¼Œä½¿å¾—ä½¿ç”¨OpenAPIè§„èŒƒæ¥æè¿°å’Œå®šä¹‰APIæ›´åŠ ç®€å•å’Œæ–¹ä¾¿ã€‚é€šè¿‡Swaggerå·¥å…·ï¼Œæ‚¨å¯ä»¥ç”Ÿæˆç¬¦åˆOpenAPIè§„èŒƒçš„APIæ–‡æ¡£ï¼Œä»¥åŠä½¿ç”¨Swagger UIç•Œé¢æ¥æµè§ˆå’Œæµ‹è¯•APIã€‚</p><p>ç”¨ä¸€å¥è¯æ€»ç»“ï¼šSwaggerå›´ç»•ä¸€ä¸ªæ—¢æœ‰çš„è§„èŒƒï¼Œåˆ›é€ äº†ä¸€ç³»åˆ—çš„è½¯ä»¶å·¥å…·ï¼Œä¸ºå¼€å‘å’Œä½¿ç”¨APIæä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚</p><h2 id="Swagger"><a href="#Swagger" class="headerlink" title="Swagger"></a>Swagger</h2><p>Swaggeræ˜¯ä¸€ä¸ªè§„èŒƒå’Œå®Œæ•´çš„æ¡†æ¶ï¼Œä¸€ä¸ªç”¨äºç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ–RESTfulé£æ ¼çš„WebæœåŠ¡ã€‚</p><p>æœ‰ä¸‰ä¸ªæœ€çŸ¥åçš„å·¥å…·éœ€è¦å…¥é—¨è€…å»äº†è§£ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯swagger-uiã€swagger-editorå’Œswagger-codegenã€‚</p><h3 id="1-Swagger-UIï¼š"><a href="#1-Swagger-UIï¼š" class="headerlink" title="1. Swagger UIï¼š"></a>1. Swagger UIï¼š</h3><p>Swagger UIæ˜¯Swaggerçš„å®˜æ–¹å·¥å…·ï¼Œç”¨äºå±•ç¤ºå’Œæµ‹è¯•APIæ–‡æ¡£ã€‚å®ƒæä¾›äº†ä¸€ä¸ªäº¤äº’å¼çš„ç•Œé¢ï¼Œä½¿å¾—å¼€å‘äººå‘˜å’Œç”¨æˆ·å¯ä»¥ç›´è§‚åœ°æŸ¥çœ‹å’Œç†è§£APIçš„å„ä¸ªç»†èŠ‚ã€‚</p><p><img src="/assets/post_img/article101/ui-api.png" alt="api"></p><p><img src="/assets/post_img/article101/ui-model.png" alt="model"></p><p>Swagger UIçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>è‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼APIæ–‡æ¡£ç•Œé¢ï¼šSwagger UIæ ¹æ®APIçš„Swaggerè§„èŒƒç”Ÿæˆä¸€ä¸ªå¯äº¤äº’çš„ç½‘é¡µç•Œé¢ï¼Œä»¥å±•ç¤ºAPIçš„è·¯å¾„ã€å‚æ•°ã€æ¨¡å‹å®šä¹‰ã€è¯·æ±‚å’Œå“åº”ç­‰ä¿¡æ¯ã€‚</li><li>æ”¯æŒè¯·æ±‚æµ‹è¯•ï¼šSwagger UIå…è®¸ç”¨æˆ·åœ¨ç•Œé¢ä¸­ç›´æ¥æµ‹è¯•APIï¼Œé€šè¿‡æä¾›å‚æ•°ã€å‘é€è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ç»“æœï¼Œå¸®åŠ©å¼€å‘äººå‘˜è¿›è¡ŒAPIçš„è°ƒè¯•å’Œæµ‹è¯•ã€‚</li><li>å¤šç§å±•ç¤ºæ–¹å¼ï¼šSwagger UIæä¾›äº†å¤šç§å±•ç¤ºæ–¹å¼ï¼Œå¦‚å¯æŠ˜å çš„APIè·¯å¾„åˆ—è¡¨ã€å¯åˆ‡æ¢çš„ä¸»é¢˜æ ·å¼ç­‰ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿä»¥è‡ªå·±å–œæ¬¢çš„æ–¹å¼æŸ¥çœ‹å’Œä½¿ç”¨APIæ–‡æ¡£ã€‚</li></ul><h3 id="2-Swagger-Editorï¼š"><a href="#2-Swagger-Editorï¼š" class="headerlink" title="2. Swagger Editorï¼š"></a>2. Swagger Editorï¼š</h3><p>Swagger Editoræ˜¯Swaggeræä¾›çš„ä¸€ä¸ªåœ¨çº¿ç¼–è¾‘å™¨ï¼Œç”¨äºç¼–å†™ã€å®šä¹‰å’ŒéªŒè¯Swaggerè§„èŒƒçš„APIæ–‡æ¡£ã€‚å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„ç•Œé¢æ¥åˆ›å»ºå’Œç¼–è¾‘APIæ–‡æ¡£ï¼Œå¹¶å³æ—¶åé¦ˆéªŒè¯ç»“æœå’Œé”™è¯¯ä¿¡æ¯ã€‚</p><p><img src="/assets/post_img/article101/editor.png" alt="editor"></p><p>Swagger Editorçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>åœ¨çº¿ç¼–è¾‘å™¨ï¼šSwagger Editorå¯ä»¥ç›´æ¥åœ¨ç½‘é¡µä¸­è¿›è¡ŒAPIæ–‡æ¡£çš„ç¼–å†™å’Œç¼–è¾‘ï¼Œè€Œæ— éœ€é¢å¤–çš„ç¼–è¾‘å™¨æˆ–å·¥å…·ã€‚</li><li>å³æ—¶éªŒè¯ï¼šSwagger Editorå¯ä»¥å³æ—¶éªŒè¯APIæ–‡æ¡£çš„æ­£ç¡®æ€§å’Œåˆæ³•æ€§ï¼Œé€šè¿‡æ£€æŸ¥Swaggerè§„èŒƒçš„è¯­æ³•ã€æ ¼å¼å’Œè§„åˆ™ï¼Œæä¾›å®æ—¶çš„åé¦ˆå’Œé”™è¯¯æç¤ºã€‚</li><li>Swaggerè§„èŒƒæ”¯æŒï¼šSwagger Editorå®Œå…¨æ”¯æŒSwaggerè§„èŒƒï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„è‡ªåŠ¨è¡¥å…¨ã€ä»£ç æç¤ºå’Œæ–‡æ¡£è¾…åŠ©åŠŸèƒ½ï¼Œä½¿å¾—ç¼–å†™å’Œç¼–è¾‘Swaggerè§„èŒƒæ›´åŠ é«˜æ•ˆå’Œå‡†ç¡®ã€‚</li></ul><h3 id="3-Swagger-Codegenï¼š"><a href="#3-Swagger-Codegenï¼š" class="headerlink" title="3. Swagger Codegenï¼š"></a>3. Swagger Codegenï¼š</h3><p>Swagger Codegenæ˜¯Swaggeræä¾›çš„ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œç”¨äºæ ¹æ®APIæ–‡æ¡£ç”Ÿæˆå„ç§ç¼–ç¨‹è¯­è¨€çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä»£ç ã€‚å®ƒç®€åŒ–äº†å¼€å‘äººå‘˜æ ¹æ®APIæ–‡æ¡£æ‰‹åŠ¨ç¼–å†™ä»£ç çš„è¿‡ç¨‹ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡å’Œä»£ç çš„ä¸€è‡´æ€§ã€‚</p><p>Swagger Codegençš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>å¤šè¯­è¨€æ”¯æŒï¼šSwagger Codegenæ”¯æŒç”Ÿæˆå¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ï¼ŒåŒ…æ‹¬Javaã€JavaScriptã€Pythonã€Rubyã€C#ç­‰ï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½å’Œéœ€æ±‚é€‰æ‹©é€‚åˆçš„è¯­è¨€ã€‚</li><li>è‡ªå®šä¹‰æ¨¡æ¿ï¼šSwagger Codegenå…è®¸å¼€å‘äººå‘˜æ ¹æ®è‡ªå·±çš„éœ€æ±‚è‡ªå®šä¹‰ä»£ç ç”Ÿæˆçš„æ¨¡æ¿ï¼Œä»¥é€‚åº”ä¸åŒçš„ç¼–ç é£æ ¼å’Œè§„èŒƒè¦æ±‚ã€‚</li><li>ä»£ç ç”Ÿæˆå‘½ä»¤è¡Œå·¥å…·ï¼šSwagger Codegenæä¾›äº†å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä»Swaggerè§„èŒƒæ–‡ä»¶ç”Ÿæˆä»£ç ï¼Œå‡å°‘äº†æ‰‹åŠ¨ç¼–å†™ä»£ç çš„å·¥ä½œé‡ã€‚</li></ul><h2 id="Springfox"><a href="#Springfox" class="headerlink" title="Springfox"></a>Springfox</h2><p>Springfoxæ˜¯ä¸€ä¸ªç”¨äºè‡ªåŠ¨ç”Ÿæˆå’Œå±•ç¤ºRESTful APIæ–‡æ¡£çš„Javaåº“ï¼ˆSpringç¤¾åŒºé¡¹ç›®ï¼Œéå®˜æ–¹ï¼‰ï¼Œä¸Swaggerè§„èŒƒå…¼å®¹ï¼Œå¹¶æä¾›äº†ä¸€å¥—å·¥å…·ä½¿å¾—åœ¨Spring Bootåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Swaggerå˜å¾—æ›´åŠ ç®€å•å’Œä¾¿æ·ã€‚   </p><p>ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•åœ¨Spring Bootåº”ç”¨ä¸­é›†æˆSpringfoxã€‚</p><h3 id="1-å¼•å…¥Springfoxä¾èµ–"><a href="#1-å¼•å…¥Springfoxä¾èµ–" class="headerlink" title="1. å¼•å…¥Springfoxä¾èµ–"></a>1. å¼•å…¥Springfoxä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// author: SilenceZheng66</span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥swagger--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-åˆ›å»ºé…ç½®ç±»"><a href="#2-åˆ›å»ºé…ç½®ç±»" class="headerlink" title="2. åˆ›å»ºé…ç½®ç±»"></a>2. åˆ›å»ºé…ç½®ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">api</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.slz.swagger.controller&quot;</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build()</span><br><span class="line">                .pathMapping(<span class="string">&quot;/&quot;</span>) ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å†™ä¸ªå“åº”ç±»"><a href="#3-å†™ä¸ªå“åº”ç±»" class="headerlink" title="3. å†™ä¸ªå“åº”ç±»"></a>3. å†™ä¸ªå“åº”ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Result</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SUCCESS = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FAILED = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å†™ä¸ªæ§åˆ¶å™¨"><a href="#4-å†™ä¸ªæ§åˆ¶å™¨" class="headerlink" title="4. å†™ä¸ªæ§åˆ¶å™¨"></a>4. å†™ä¸ªæ§åˆ¶å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;DummyHello&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DummyController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiOperation(&quot;Say Hello&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(Result.SUCCESS, <span class="string">&quot;success&quot;</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-å¯åŠ¨"><a href="#5-å¯åŠ¨" class="headerlink" title="5. å¯åŠ¨"></a>5. å¯åŠ¨</h3><p>ç›´æ¥è¿›å…¥åœ°å€ <code>http://localhost:8080/swagger-ui/index.html#/</code></p><p><img src="/assets/post_img/article101/springfox.png" alt="springfox"></p><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>Springfoxåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼š</p><h4 id="åœ¨-Spring-Boot3-x-x-ä¸‹æŠ¥Servletç¼ºå¤±é”™è¯¯"><a href="#åœ¨-Spring-Boot3-x-x-ä¸‹æŠ¥Servletç¼ºå¤±é”™è¯¯" class="headerlink" title="åœ¨ Spring Boot3.x.x ä¸‹æŠ¥Servletç¼ºå¤±é”™è¯¯"></a>åœ¨ Spring Boot3.x.x ä¸‹æŠ¥Servletç¼ºå¤±é”™è¯¯</h4><p>æŠ¥é”™ä¿¡æ¯ï¼š<code>Type javax.servlet.http.HttpServletRequest not present</code></p><p>åŸå› åˆ†æï¼šSpring Boot3è¦æ±‚æœ€ä½Java17ï¼Œå®ƒä½¿ç”¨jakartaå‘½åç©ºé—´è€Œä¸æ˜¯javaxï¼Œä½†æ˜¯Swaggerä»ç„¶ä½¿ç”¨æ—§ç‰ˆæœ¬çš„å‘½åç©ºé—´ã€‚</p><blockquote><p>è‡ªJava EE 8èµ·ï¼ŒJava EEå·²æ”¹åä¸ºJakarta EEã€‚Jakarta EEæ˜¯ä¸€ä¸ªå¼€æ”¾çš„ä¼ä¸šçº§Javaå¹³å°ï¼Œç”±Eclipse Foundationè¿›è¡Œç®¡ç†å’Œå‘å±•ã€‚å®ƒæ˜¯æ„å»ºä¼ä¸šçº§Javaåº”ç”¨ç¨‹åºçš„ä¸€ç»„è§„èŒƒå’ŒæŠ€æœ¯ã€‚</p><p>Jakarta EEä½¿ç”¨Jakartaå‘½åç©ºé—´ï¼Œä»¥é¿å…ä¸Oracleæ‹¥æœ‰çš„Java EEå‘½åç©ºé—´äº§ç”Ÿå†²çªã€‚Jakartaå‘½åç©ºé—´ç”¨äºæ ‡è¯†ä¸Java EEå…¼å®¹çš„APIå’ŒæŠ€æœ¯ã€‚ä¾‹å¦‚ï¼Œä»¥å‰çš„javax.servletåŒ…å·²ç»è¿ç§»åˆ°äº†jakarta.servletåŒ…ã€‚ç±»ä¼¼åœ°ï¼Œå…¶ä»–Java EEè§„èŒƒå’ŒAPIä¹Ÿè¢«è¿ç§»åˆ°äº†å¯¹åº”çš„Jakartaå‘½åç©ºé—´ã€‚</p></blockquote><p>è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ å¦‚ä¸‹ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// author: SilenceZheng66</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="åœ¨-Spring-Boot2-7-8-ä¸‹æŠ¥ç©ºæŒ‡é’ˆé”™è¯¯"><a href="#åœ¨-Spring-Boot2-7-8-ä¸‹æŠ¥ç©ºæŒ‡é’ˆé”™è¯¯" class="headerlink" title="åœ¨ Spring Boot2.7.8 ä¸‹æŠ¥ç©ºæŒ‡é’ˆé”™è¯¯"></a>åœ¨ Spring Boot2.7.8 ä¸‹æŠ¥ç©ºæŒ‡é’ˆé”™è¯¯</h4><p>æŠ¥é”™ä¿¡æ¯ï¼š<code>Failed to start bean &#39;documentationPluginsBootstrapper&#39;; nested exception is java.lang.NullPointerException: Cannot invoke &quot;org.springframework.web.servlet.mvc.condition.PatternsRequestCondition.getPatterns()&quot; because &quot;this.condition&quot; is null</code></p><p>åŸå› åˆ†æï¼šSpring Boot2.6.x ä»¥ä¸Šçš„ç‰ˆæœ¬é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯åŸºäºServletçš„è·¯å¾„åŒ¹é…æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä½¿ç”¨äº†PathPatternParseræ¥è§£æå’ŒåŒ¹é…è·¯å¾„æ¨¡å¼ã€‚Springfoxä¸­å…³äº<code>getPatternsCondition</code>çš„ä»£ç æœ‰é—®é¢˜ï¼Œå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><blockquote><p>PathPatternParserå’ŒAntPathMatcheræ˜¯Spring Frameworkä¸­ç”¨äºè·¯å¾„åŒ¹é…çš„ä¸¤ä¸ªä¸åŒçš„ç±»ã€‚</p><p>AntPathMatcheræ˜¯åœ¨è¾ƒæ—©çš„ç‰ˆæœ¬ä¸­å¼•å…¥çš„ï¼Œå®ƒä½¿ç”¨Anté£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•è¿›è¡Œè·¯å¾„åŒ¹é…ï¼Œä¾‹å¦‚/users/*/profileã€‚å®ƒæä¾›äº†ä¸€äº›åŠŸèƒ½å¼ºå¤§çš„ç‰¹æ€§ï¼Œä¾‹å¦‚é€šé…ç¬¦åŒ¹é…ã€è·¯å¾„å˜é‡ã€è·¯å¾„æ‰©å±•ç­‰ã€‚AntPathMatcheræ˜¯Spring Frameworkä¸­å¸¸ç”¨çš„è·¯å¾„åŒ¹é…å·¥å…·ï¼Œè¢«å¹¿æ³›ç”¨äºå¤„ç†URLè·¯å¾„çš„åŒ¹é…å’Œè¯·æ±‚æ˜ å°„ç­‰åœºæ™¯ã€‚</p><p>PathPatternParseræ˜¯åœ¨è¾ƒæ–°çš„ç‰ˆæœ¬ä¸­å¼•å…¥çš„ï¼Œå®ƒæä¾›äº†æ›´çµæ´»å’Œå¼ºå¤§çš„è·¯å¾„æ¨¡å¼è§£æå’ŒåŒ¹é…åŠŸèƒ½ã€‚å®ƒæ”¯æŒå¤šç§è·¯å¾„æ¨¡å¼è¯­æ³•ï¼ŒåŒ…æ‹¬Anté£æ ¼å’ŒServleté£æ ¼ï¼Œå¹¶æä¾›äº†æ›´ç²¾ç¡®çš„è·¯å¾„åŒ¹é…è§„åˆ™ã€‚PathPatternParseråœ¨è®¾è®¡ä¸Šæ›´åŠ ç»Ÿä¸€å’Œä¸€è‡´ï¼Œå¯ä»¥å¤„ç†æ›´å¤æ‚çš„è·¯å¾„åŒ¹é…éœ€æ±‚ï¼Œå¹¶ä¸”ä¸Servletè§„èŒƒæ›´åŠ å…¼å®¹ã€‚</p></blockquote><p>è§£å†³æ–¹æ¡ˆï¼šæ›´æ”¹Spring MVCçš„è·¯å¾„åŒ¹é…ç­–ç•¥ä¸ºAntPathMatcherï¼Œåœ¨Spring Boot é»˜è®¤é…ç½®æ–‡ä»¶ä¸­å¢åŠ <code>spring.mvc.pathmatch.matching-strategy=ant_path_matcher</code>ï¼ˆKVæ ¼å¼ï¼‰ã€‚</p><h2 id="Springdocï¼ˆæ¨èï¼‰"><a href="#Springdocï¼ˆæ¨èï¼‰" class="headerlink" title="Springdocï¼ˆæ¨èï¼‰"></a>Springdocï¼ˆæ¨èï¼‰</h2><p>Springdoc-openapi javaåº“æœ‰åŠ©äºä½¿ç”¨ spring boot é¡¹ç›®è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚ Springdocé€šè¿‡åœ¨è¿è¡Œæ—¶æ£€æŸ¥åº”ç”¨ç¨‹åºä»¥æ ¹æ® spring é…ç½®ã€ç±»ç»“æ„å’Œå„ç§æ³¨é‡Šæ¨æ–­ API è¯­ä¹‰æ¥å·¥ä½œã€‚å¯ä»¥ä½¿ç”¨ swagger-api é€šè¿‡æ³¨é‡Šæ¥è‡ªåŠ¨ç”Ÿæˆ JSON/YAML å’Œ HTML æ ¼å¼ API çš„æ–‡æ¡£ã€‚</p><p>è¯¥åº“æ”¯æŒï¼š</p><ul><li>OpenAPI 3</li><li>Spring-boot v3 (Java 17 &amp; Jakarta EE 9)</li><li>JSR-303, specifically for @NotNull, @Min, @Max, and @Size.</li><li>Swagger-ui</li><li>OAuth 2</li><li>GraalVM native images</li></ul><p>ä¸‹é¢æ¼”ç¤ºå¦‚ä½•åœ¨Spring Boot3.x.xä¸­é›†æˆSpringdocï¼Œå‚è€ƒæ–‡æ¡£è§<a href="https://springdoc.org/index.html#migrating-from-springfox">è¿™é‡Œ</a>ã€‚</p><h3 id="1-å¼•å…¥Springdocä¾èµ–"><a href="#1-å¼•å…¥Springdocä¾èµ–" class="headerlink" title="1. å¼•å…¥Springdocä¾èµ–"></a>1. å¼•å…¥Springdocä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// author: SilenceZheng66</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-åˆ›å»ºé…ç½®ç±»-1"><a href="#2-åˆ›å»ºé…ç½®ç±»-1" class="headerlink" title="2. åˆ›å»ºé…ç½®ç±»"></a>2. åˆ›å»ºé…ç½®ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringdocConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> GroupedOpenApi <span class="title">api</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> GroupedOpenApi.builder()</span><br><span class="line">                .packagesToScan(<span class="string">&quot;com.slz.swagger.controller&quot;</span>)</span><br><span class="line">                .group(<span class="string">&quot;springdoc-demo&quot;</span>)</span><br><span class="line">                .pathsToMatch(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å†™ä¸ªå“åº”ç±»-1"><a href="#3-å†™ä¸ªå“åº”ç±»-1" class="headerlink" title="3. å†™ä¸ªå“åº”ç±»"></a>3. å†™ä¸ªå“åº”ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Result</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SUCCESS = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FAILED = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å†™ä¸ªæ§åˆ¶å™¨-1"><a href="#4-å†™ä¸ªæ§åˆ¶å™¨-1" class="headerlink" title="4. å†™ä¸ªæ§åˆ¶å™¨"></a>4. å†™ä¸ªæ§åˆ¶å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author: SilenceZheng66</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;hello api&quot;, description = &quot;Dummy Hello&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DummyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;hello api&quot;, description = &quot;hello api for test&quot;)</span></span><br><span class="line">    <span class="meta">@ApiResponses(value = &#123;</span></span><br><span class="line"><span class="meta">            @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Valid input&quot;),</span></span><br><span class="line"><span class="meta">            @ApiResponse(responseCode = &quot;405&quot;, description = &quot;Invalid input&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(Result.SUCCESS, <span class="string">&quot;success&quot;</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-å¯åŠ¨-1"><a href="#5-å¯åŠ¨-1" class="headerlink" title="5. å¯åŠ¨"></a>5. å¯åŠ¨</h3><p>ç›´æ¥è¿›å…¥åœ°å€ <code>http://localhost:8080/swagger-ui/index.html#/</code></p><p><img src="/assets/post_img/article101/springdoc.png" alt="springdoc"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://swagger.io/resources/open-api/">https://swagger.io/resources/open-api/</a><br>[2] <a href="https://github.com/swagger-api">https://github.com/swagger-api</a><br>[3] <a href="https://github.com/springfox/springfox">https://github.com/springfox/springfox</a><br>[4] <a href="https://blog.csdn.net/long199366/article/details/114388171">https://blog.csdn.net/long199366/article/details/114388171</a><br>[5] <a href="http://springfox.github.io/springfox/docs/current/">http://springfox.github.io/springfox/docs/current/</a><br>[6] <a href="https://blog.csdn.net/qq_42495847/article/details/121424122">https://blog.csdn.net/qq_42495847/article/details/121424122</a><br>[7] <a href="https://stackoverflow.com/questions/71549614/springfox-type-javax-servlet-http-httpservletrequest-not-present">https://stackoverflow.com/questions/71549614/springfox-type-javax-servlet-http-httpservletrequest-not-present</a><br>[8] <a href="https://blog.csdn.net/m0_52457066/article/details/129094931">https://blog.csdn.net/m0_52457066/article/details/129094931</a><br>[9] <a href="https://blog.csdn.net/kkorkk/article/details/123774484">https://blog.csdn.net/kkorkk/article/details/123774484</a><br>[10] <a href="https://springdoc.org/v2/">https://springdoc.org/v2/</a><br>[11] <a href="https://springdoc.org/index.html#migrating-from-springfox">https://springdoc.org/index.html#migrating-from-springfox</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Swaggerå…¥é—¨ä¸Spring Booté›†æˆSwaggerã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•å°è¯•äº†Springfoxå’ŒSpringdocï¼Œæ„Ÿè§‰Springdocé—®é¢˜æ›´å°‘äº›ï¼Œä½†æ–‡æ¡£ä¹Ÿç›¸å¯¹å°‘ã€‚&lt;br&gt;</summary>
    
    
    
    
    <category term="Spring" scheme="http://silencezheng.top/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>å…¬é’¥æ£€ç´¢ä¸å¸¸è§é”™è¯¯</title>
    <link href="http://silencezheng.top/2023/04/11/article100/"/>
    <id>http://silencezheng.top/2023/04/11/article100/</id>
    <published>2023-04-11T06:46:45.000Z</published>
    <updated>2023-04-11T06:51:00.958Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å†™Javaçš„æ—¶å€™å‘ç°çš„ä¸€ä¸ªæŠ¥é”™:<br><code>java.sql.SQLNonTransientConnectionException: Public Key Retrieval is not allowed</code></p><p>ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œå‘ç°ä¸»è¦æ˜¯ä¸MySQLç‰ˆæœ¬ç›¸å…³ï¼Œç”±TLSè¿æ¥å¼•èµ·ã€‚<br><span id="more"></span></p><h2 id="å¤„ç†æ–¹å¼"><a href="#å¤„ç†æ–¹å¼" class="headerlink" title="å¤„ç†æ–¹å¼"></a>å¤„ç†æ–¹å¼</h2><p>è€ƒè™‘åˆ°æœ‰äº›åŒå­¦åªæƒ³â€œçŸ¥å…¶ç„¶â€ï¼Œå…ˆæŠŠè§£å†³æ–¹å¼è´´å‡ºæ¥ã€‚</p><p>å¼•èµ·è¯¥æŠ¥é”™é¦–å…ˆç¡®å®šMySQLæœåŠ¡å™¨çš„ç‰ˆæœ¬å¤šåŠå¤§äº<code>MySQL 5.7.28</code>ï¼ˆå½“ç„¶ä¸æ’é™¤æ˜¯è¿™ä¹‹å‰çš„ç‰ˆæœ¬ä½†æ‰‹åŠ¨å¼€å¯äº†TLSåŠ å¯†ï¼‰ã€‚å¹¶ä¸”ï¼Œå¤šåŠæ˜¯ç”±äºåœ¨è¿æ¥æ—¶ç¦ç”¨äº†SSLã€‚</p><p>è€ƒè™‘ä»¥ä¸‹è§£å†³æ–¹å¼ï¼š</p><ol><li>å¼€å¯SSLè¿æ¥ã€‚</li><li>æ·»åŠ è¿æ¥å‚æ•°<code>allowPublicKeyRetrieval=true</code>ã€‚</li><li>æé«˜JDBCç‰ˆæœ¬ï¼Œä¸æœåŠ¡å™¨ç‰ˆæœ¬åŒ¹é…ï¼ˆç„å­¦ï¼‰ã€‚</li></ol><h2 id="JDBCè¿æ¥å‚æ•°ï¼šuseSSL"><a href="#JDBCè¿æ¥å‚æ•°ï¼šuseSSL" class="headerlink" title="JDBCè¿æ¥å‚æ•°ï¼šuseSSL"></a>JDBCè¿æ¥å‚æ•°ï¼šuseSSL</h2><p>JDBCçš„useSSLæ˜¯ä¸€ä¸ªè¿æ¥é€‰é¡¹ï¼Œç”¨äºæ§åˆ¶åœ¨JDBCè¿æ¥è¿‡ç¨‹ä¸­æ˜¯å¦å¯ç”¨åŠ å¯†è¿æ¥ï¼Œè™½ç„¶å«SSLï¼Œä½†å…¶å®æ˜¯TLSäº†ã€‚</p><p>å½“<code>useSSL=true</code>æ—¶ï¼ŒJDBCä¼šä½¿ç”¨SSLè¿æ¥åˆ°MySQLæœåŠ¡å™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJDBCä¼šåœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­éªŒè¯MySQLæœåŠ¡å™¨çš„è¯ä¹¦ï¼Œä»¥ç¡®ä¿ä¸æ­£ç¡®çš„æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚åŒæ—¶ï¼ŒJDBCä¹Ÿä¼šä½¿ç”¨SSLåè®®å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œä»¥ä¿æŠ¤æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚</p><p>å½“<code>useSSL=false</code>æ—¶ï¼ŒJDBCä¸ä¼šä½¿ç”¨SSLè¿æ¥åˆ°MySQLæœåŠ¡å™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJDBCä¼šä»¥æ™®é€šçš„æ–¹å¼è¿æ¥åˆ°MySQLæœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨æ˜æ–‡ä¼ è¾“æ•°æ®ã€‚è¿™ç§æƒ…å†µä¸‹çš„è¿æ¥å¯èƒ½ä¼šå­˜åœ¨å®‰å…¨éšæ‚£ï¼Œå› ä¸ºæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æ‹¦æˆªå’Œçªƒå¬ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æŠ“åŒ…æ¥éªŒè¯ï¼Œé¦–å…ˆæ˜¯åœ¨å¼€å¯SSLçš„æƒ…å†µä¸‹ï¼š</p><p><img src="/assets/post_img/article100/useSSL.png" alt="useSSL"></p><p>æ­¤æ—¶Usernameä¸å¯è§ï¼Œç„¶åå…³é—­SSLå†æŠ“ï¼š</p><p><img src="/assets/post_img/article100/notUseSSL.png" alt="noUseSSL"></p><p>æ­¤æ—¶æ•°æ®ä»¥æ˜æ–‡çš„æ–¹å¼ä¼ è¾“ï¼Œä½†å¯†ç ä»ç„¶ç»è¿‡åŠ å¯†å¤„ç†ï¼ˆRSAï¼‰ï¼Œè¿™æ˜¯ç”±äºMySQLçš„èº«ä»½éªŒè¯æœºåˆ¶ã€‚</p><h2 id="MySQLèº«ä»½éªŒè¯"><a href="#MySQLèº«ä»½éªŒè¯" class="headerlink" title="MySQLèº«ä»½éªŒè¯"></a>MySQLèº«ä»½éªŒè¯</h2><p>åœ¨MySQL 8.0ä¹‹å‰ï¼Œå½“MySQLå®¢æˆ·ç«¯è¿æ¥åˆ°å¯ç”¨äº†SSLåŠ å¯†çš„MySQLæœåŠ¡å™¨æ—¶ï¼Œä¼šè‡ªåŠ¨ä»æœåŠ¡å™¨ç«¯ä¸‹è½½SSLè¯ä¹¦çš„å…¬é’¥ï¼Œä»¥ä¾¿è¿›è¡ŒSSLæ¡æ‰‹åè®®ï¼Œä»è€Œç¡®ä¿å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´é€šä¿¡çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½å­˜åœ¨æ½œåœ¨çš„å®‰å…¨é£é™©ï¼Œå› ä¸ºMySQLå®¢æˆ·ç«¯åœ¨ä¸‹è½½å…¬é’¥çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé­å—ä¸­é—´äººæ”»å‡»ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªå®‰å…¨é—®é¢˜ï¼ŒMySQL 8.0å¼•å…¥äº†Public Key Retrievalç‰¹æ€§ï¼Œå®ƒå…è®¸MySQLæœåŠ¡å™¨åœ¨SSLæ¡æ‰‹åè®®ä¸­ï¼Œå‘é€æœåŠ¡å™¨ç«¯SSLè¯ä¹¦çš„SHA-256æŒ‡çº¹ï¼ˆSHA-256 Fingerprintï¼‰è€Œä¸æ˜¯å…¬é’¥ã€‚MySQLå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªæŒ‡çº¹ï¼Œä»ä¸€ä¸ªå¯ä¿¡ä»»çš„ä½ç½®ï¼ˆå¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€å†…å­˜ç¼“å­˜æˆ–PKCS#11è®¾å¤‡ï¼‰è·å–æœåŠ¡å™¨ç«¯SSLè¯ä¹¦çš„å…¬é’¥ï¼Œä»è€Œé¿å…äº†ä¸­é—´äººæ”»å‡»ã€‚</p><p>åœ¨ MySQL 8.0 ç‰ˆæœ¬ä¸­ï¼Œèº«ä»½éªŒè¯æ’ä»¶æ˜¯ä¸€ä¸ªå¯æ’æ‹”çš„æ¨¡å—ï¼Œç”¨äºæ§åˆ¶ MySQL ç”¨æˆ·èº«ä»½éªŒè¯çš„æ–¹å¼ã€‚åœ¨ä»¥å‰çš„ MySQL ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨çš„èº«ä»½éªŒè¯æ’ä»¶æ˜¯ â€œmysql_native_passwordâ€ï¼Œè€Œåœ¨ MySQL 8.0 ä¸­ï¼Œåˆ™ä½¿ç”¨   â€œcaching_sha2_passwordâ€ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´å¼ºå¤§å’Œæ›´å®‰å…¨çš„æ’ä»¶ï¼Œå®ƒä½¿ç”¨ SHA-256 å“ˆå¸Œå‡½æ•°ï¼ˆå¥½åƒä¹Ÿä¸ä¸€å®šï¼Œåªæ˜¯SHA2ï¼‰æ¥åŠ å¯†å¯†ç ï¼Œå¹¶æä¾›äº†å¯†ç è¿‡æœŸå’Œå¯†ç å†å²è®°å½•åŠŸèƒ½ï¼Œä»¥å¢å¼ºæ•°æ®åº“çš„å®‰å…¨æ€§ã€‚</p><p>åœ¨ MySQL 8.0 ä¸­ï¼Œè¿˜æä¾›äº†å¦å¤–ä¸¤ä¸ªèº«ä»½éªŒè¯æ’ä»¶ï¼Œåˆ†åˆ«æ˜¯ â€œsha256_passwordâ€ å’Œ â€œmysql_old_passwordâ€ã€‚å…¶ä¸­ â€œsha256_passwordâ€ ä¹Ÿä½¿ç”¨ SHA-256 å“ˆå¸Œå‡½æ•°è¿›è¡Œå¯†ç åŠ å¯†ï¼Œä½†å®ƒä¸æ”¯æŒå¯†ç è¿‡æœŸå’Œå¯†ç å†å²è®°å½•åŠŸèƒ½ã€‚è€Œ â€œmysql_old_passwordâ€ æ˜¯ç”¨äºå‘å‰å…¼å®¹ä»¥å‰ç‰ˆæœ¬çš„ MySQLï¼Œå®ƒä½¿ç”¨æ—§çš„åŠ å¯†æ–¹æ³•ã€‚</p><h2 id="æŠ¥é”™åˆ†æ"><a href="#æŠ¥é”™åˆ†æ" class="headerlink" title="æŠ¥é”™åˆ†æ"></a>æŠ¥é”™åˆ†æ</h2><blockquote><p>å¯¹äºä½¿ç”¨ caching_sha2_password æ’ä»¶çš„å®¢æˆ·ç«¯ï¼Œåœ¨è¿æ¥åˆ°æœåŠ¡å™¨æ—¶ï¼Œå¯†ç æ°¸è¿œä¸ä¼šä»¥æ˜æ–‡å½¢å¼å…¬å¼€ã€‚å¯†ç ä¼ è¾“çš„æ–¹å¼å–å†³äºæ˜¯å¦ä½¿ç”¨å®‰å…¨è¿æ¥æˆ– RSA åŠ å¯†ï¼š</p><p>å¦‚æœè¿æ¥æ˜¯å®‰å…¨çš„ï¼Œåˆ™ä¸éœ€è¦ RSA å¯†é’¥å¯¹ï¼Œä¹Ÿä¸ä¼šä½¿ç”¨å®ƒã€‚è¿™é€‚ç”¨äºä½¿ç”¨ TLS åŠ å¯†çš„ TCP è¿æ¥ï¼Œä»¥åŠ Unix å¥—æ¥å­—æ–‡ä»¶å’Œå…±äº«å†…å­˜è¿æ¥ã€‚å¯†ç ä»¥æ˜æ–‡å½¢å¼å‘é€ï¼Œä½†ä¸èƒ½è¢«çª¥æ¢ï¼Œå› ä¸ºè¿æ¥æ˜¯å®‰å…¨çš„ã€‚</p><p>å¦‚æœè¿æ¥ä¸å®‰å…¨ï¼Œåˆ™ä½¿ç”¨ RSA å¯†é’¥å¯¹ã€‚è¿™é€‚ç”¨äºæœªä½¿ç”¨ TLS åŠ å¯†çš„ TCP è¿æ¥å’Œå‘½åç®¡é“è¿æ¥ã€‚RSA ä»…ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„å¯†ç äº¤æ¢ï¼Œä»¥é˜²æ­¢å¯†ç çª¥æ¢ã€‚å½“æœåŠ¡å™¨æ”¶åˆ°åŠ å¯†çš„å¯†ç æ—¶ï¼Œå®ƒä¼šå¯¹å…¶è¿›è¡Œè§£å¯†ã€‚åœ¨åŠ å¯†ä¸­ä½¿ç”¨åŠ æ‰°æ¥é˜²æ­¢é‡å¤æ”»å‡»ã€‚</p></blockquote><p>ç”±äºç¬”è€…ä½¿ç”¨çš„MySQLä¸º8.0ç‰ˆæœ¬ï¼Œé»˜è®¤ä½¿ç”¨â€caching_sha2_passwordâ€æ’ä»¶è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå½“å…³é—­SSLæ—¶ï¼Œè¯¥æ’ä»¶å‘ç°è¿æ¥æœªåŠ å¯†ï¼Œå› æ­¤è¦æ±‚ä½¿ç”¨ RSA åŠ å¯†ä¼ è¾“å¯†ç ã€‚ä½†æ˜¯æœåŠ¡ç«¯å¹¶æ²¡æœ‰å°†å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯ï¼Œè€Œå®¢æˆ·ç«¯åˆæ— æ³•åœ¨å¯ä¿¡ä½ç½®æ£€ç´¢åˆ°å…¬é’¥ï¼Œæ‰€ä»¥æ— æ³•åŠ å¯†å¯†ç ï¼Œå¯¼è‡´æŠ¥é”™ã€‚</p><p>åŸºäºä»¥ä¸Šåˆ†æï¼Œå¯ä»¥æå‡ºä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>æ”¹ç”¨åŠ å¯†è¿æ¥ã€‚</li><li>åœ¨ä¸ç”¨åŠ å¯†è¿æ¥çš„åŒæ—¶ï¼Œè®©å®¢æˆ·ç«¯ä»æœåŠ¡å™¨è·å–å…¬é’¥ã€‚</li></ol><h2 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h2><p>MySQLæœåŠ¡å™¨ç‰ˆæœ¬ï¼š8.0.32ï¼Œåœ¨æ¯æ¬¡æˆåŠŸè¿æ¥åé‡å¯æœåŠ¡å™¨ï¼Œå¦åˆ™è¿æ¥æˆåŠŸåä¼šå‡ºç°ç™»å½•ç¼“å­˜ï¼Œå¯¼è‡´é”™è¯¯æ— æ³•å¤ç°ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">mysql-connector-java</th><th style="text-align:center">useSSL</th><th style="text-align:center">allowPublicKeyRetrieval</th><th style="text-align:center">success</th></tr></thead><tbody><tr><td style="text-align:center">5.1.47</td><td style="text-align:center">false</td><td style="text-align:center"></td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">5.1.47</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">true</td></tr><tr><td style="text-align:center">5.1.47</td><td style="text-align:center">false</td><td style="text-align:center">true</td><td style="text-align:center">true</td></tr><tr><td style="text-align:center">8.0.23</td><td style="text-align:center">false</td><td style="text-align:center"></td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">8.0.23</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">true</td></tr><tr><td style="text-align:center">8.0.23</td><td style="text-align:center">false</td><td style="text-align:center">true</td><td style="text-align:center">true</td></tr><tr><td style="text-align:center">8.0.32</td><td style="text-align:center">false</td><td style="text-align:center"></td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">8.0.32</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">true</td></tr><tr><td style="text-align:center">8.0.32</td><td style="text-align:center">false</td><td style="text-align:center">true</td><td style="text-align:center">true</td></tr></tbody></table></div><p>æ ¹æ®å®éªŒç»“æœï¼ŒåŸºæœ¬ä¸Šå¯ä»¥éªŒè¯ä¹‹å‰çš„æƒ³æ³•ï¼Œä¸”å¯ä»¥åˆ¤æ–­JDBCè¿æ¥é»˜è®¤å¼€å¯SSLå¹¶å…³é—­allowPublicKeyRetrievalã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html">https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html</a><br>[2] <a href="https://silencezheng.top/2022/05/26/article41/">https://silencezheng.top/2022/05/26/article41/</a><br>[3] <a href="https://cloud.tencent.com/developer/news/791903">https://cloud.tencent.com/developer/news/791903</a><br>[4] <a href="https://dev.mysql.com/doc/refman/8.0/en/encrypted-connection-protocols-ciphers.html">https://dev.mysql.com/doc/refman/8.0/en/encrypted-connection-protocols-ciphers.html</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨å†™Javaçš„æ—¶å€™å‘ç°çš„ä¸€ä¸ªæŠ¥é”™:&lt;br&gt;&lt;code&gt;java.sql.SQLNonTransientConnectionException: Public Key Retrieval is not allowed&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œå‘ç°ä¸»è¦æ˜¯ä¸MySQLç‰ˆæœ¬ç›¸å…³ï¼Œç”±TLSè¿æ¥å¼•èµ·ã€‚&lt;br&gt;</summary>
    
    
    
    
    <category term="MySQL" scheme="http://silencezheng.top/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Mybatis-Plusä¹‹selectæŠ¥é”™</title>
    <link href="http://silencezheng.top/2023/03/23/article99/"/>
    <id>http://silencezheng.top/2023/03/23/article99/</id>
    <published>2023-03-23T13:13:54.000Z</published>
    <updated>2023-06-18T05:11:00.463Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Mybatis-Plusä¸­ä½¿ç”¨Mapperè¿›è¡ŒselectæŸ¥è¯¢å®ä½“æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°Invalid value for getInt()çš„æŠ¥é”™ï¼Œç„¶è€Œå¯¹åº”å­—æ®µå¾€å¾€å’ŒIntegeræ— å…³ã€‚</p><span id="more"></span><p>è¿™ä¸ªé”™è¯¯å¾ˆå¥½ç†è§£ï¼Œé€šå¸¸æ˜¯ç”±äºæ•°æ®åº“è¡¨ä¸­çš„å­—æ®µæ•°æ®ç±»å‹å’Œå®ä½“ç±»çš„å¯¹åº”å±æ€§æ•°æ®ç±»å‹ä¸åŒ¹é…ï¼Œä½†è¿™äº›å¾ˆå®¹æ˜“æ£€æŸ¥ï¼ŒåŸºæœ¬ä¸å¯èƒ½å‡ºé”™ã€‚</p><p>ä½†åœ¨ç¡®è®¤æ²¡æœ‰æ­£å¸¸é—®é¢˜æ—¶ï¼Œéœ€è¦æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¯¹å®ä½“å®šä¹‰äº†å«å‚æ„é€ å‡½æ•°ï¼Œè€Œæ²¡æœ‰ç»™å‡ºæ— å‚æ„é€ å‡½æ•°çš„æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé”™è¯¯å°±ä¼šè«åå‡ºç°ã€‚</p><p>å…³äºè¿™ä¸ªBUGçš„ä¸€ç§çŒœæµ‹æ˜¯ï¼šJavaåœ¨æ²¡æœ‰è‡ªå®šä¹‰æ„é€ å‡½æ•°çš„æ—¶å€™ä¼šé»˜è®¤æœ‰ä¸€ä¸ªç©ºæ„é€ å‡½æ•°ï¼Œä½†æ˜¯è‡ªå®šä¹‰åå°±æ²¡æœ‰äº†ã€‚ä¹Ÿè®¸Mybatisæ‰§è¡Œselectçš„æ—¶å€™æ˜¯å…ˆåˆ›å»ºå¯¹è±¡ï¼ˆæ‰¾ä¸åˆ°æ— å‚æ„é€ ï¼‰ï¼Œå†ç»™å¯¹è±¡è®¾ç½®å‚æ•°çš„ã€‚</p><p>å…·ä½“åŸå› éœ€è¦çœ‹æºç æ‰èƒ½çŸ¥é“ã€‚</p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/W1948730080/article/details/105123966">https://blog.csdn.net/W1948730080/article/details/105123966</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Mybatis-Plusä¸­ä½¿ç”¨Mapperè¿›è¡ŒselectæŸ¥è¯¢å®ä½“æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°Invalid value for getInt()çš„æŠ¥é”™ï¼Œç„¶è€Œå¯¹åº”å­—æ®µå¾€å¾€å’ŒIntegeræ— å…³ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="http://silencezheng.top/tags/Java/"/>
    
    <category term="MyBatis" scheme="http://silencezheng.top/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>Mç³»Macé‡è£…MySQL</title>
    <link href="http://silencezheng.top/2023/03/17/article98/"/>
    <id>http://silencezheng.top/2023/03/17/article98/</id>
    <published>2023-03-17T05:39:15.000Z</published>
    <updated>2023-03-17T05:40:07.924Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç”±äºåŸæœ¬çš„MySQL8æŠ½é£ï¼Œç»å¸¸<code>Communications link failure</code>å’Œ<code>ERROR 2013 (HY000): Lost connection to MySQL server during query</code>ï¼Œå„ç§æ–¹æ³•è¯•è¿‡åéƒ½æ— æ³•è§£å†³ï¼Œåªå¥½å¸è½½é‡è£…äº†ã€‚</p><span id="more"></span><h2 id="å¸è½½åŸæœ‰çš„MySQL"><a href="#å¸è½½åŸæœ‰çš„MySQL" class="headerlink" title="å¸è½½åŸæœ‰çš„MySQL"></a>å¸è½½åŸæœ‰çš„MySQL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudoä¸‹è¿›å…¥/usr/<span class="built_in">local</span>ï¼Œå…³é—­mysqlåæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</span><br><span class="line"></span><br><span class="line">sudo rm /usr/<span class="built_in">local</span>/mysql</span><br><span class="line">sudo rm -rf /usr/<span class="built_in">local</span>/mysql*</span><br><span class="line">sudo rm -rf /Library/StartupItems/MySQLCOM</span><br><span class="line">sudo rm -rf /Library/PreferencePanes/My*</span><br><span class="line">rm -rf ~/Library/PreferencePanes/My*</span><br><span class="line">sudo rm -rf /Library/Receipts/mysql*</span><br><span class="line">sudo rm -rf /Library/Receipts/MySQL*</span><br><span class="line">sudo rm -rf /var/db/receipts/com.mysql.*</span><br><span class="line">sudo rm /tmp/mysqlx.sock /tmp/mysqlx.sock.lock</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ ä¸æ˜¯é»˜è®¤è·¯å¾„å®‰è£…çš„æˆ–è€…å¿˜è®°äº†æ˜¯ä¸æ˜¯é»˜è®¤è·¯å¾„å®‰è£…çš„ï¼Œé‚£ä¹ˆé™¤äº†æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹å¤–ï¼Œè¿˜è¦æ£€æŸ¥ä»¥ä¸‹æ–‡ä»¶ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„æ–‡ä»¶ï¼Œæœ‰çš„è¯åˆ é™¤å³å¯ã€‚<br>æ£€æŸ¥ /usr/local/Cellar ç›®å½•æ˜¯å¦æœ‰mysqlæ–‡ä»¶ï¼Œæœ‰çš„è¯åˆ é™¤ã€‚<br>æ£€æŸ¥ /usr/local/var é‡Œçš„mysqlæ–‡ä»¶ï¼Œæœ‰çš„è¯åˆ é™¤ã€‚<br>æ£€æŸ¥ /tmp é‡Œçš„ mysql.sockã€mysql.sock.lockã€my.cnf æ–‡ä»¶ï¼Œæœ‰çš„è¯åˆ é™¤ã€‚<br>erræ–‡ä»¶ä»¥åŠpidæ–‡ä»¶éƒ½æ˜¯åœ¨ /usr/local/var/mysql ä¸­ï¼Œæœ‰çš„è¯åˆ é™¤ã€‚<br>brewå®‰è£…çš„å®‰è£…åŒ…å­˜å‚¨åœ¨ /usr/local/Library/Cache/Homebrew ï¼Œæœ‰çš„è¯åˆ é™¤ã€‚<br>ä¸€å®šè¦è®°å¾—æ‰§è¡Œbrew cleanupã€‚</p></blockquote><h2 id="ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„MySQL"><a href="#ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„MySQL" class="headerlink" title="ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„MySQL"></a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„MySQL</h2><p><a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></p><p>ä¸€è·¯é»˜è®¤å®‰è£…ï¼Œè®°å¾—è¾“å…¥ç®¡ç†å‘˜å¯†ç ï½</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ç”±äºåŸæœ¬çš„MySQL8æŠ½é£ï¼Œç»å¸¸&lt;code&gt;Communications link failure&lt;/code&gt;å’Œ&lt;code&gt;ERROR 2013 (HY000): Lost connection to MySQL server during query&lt;/code&gt;ï¼Œå„ç§æ–¹æ³•è¯•è¿‡åéƒ½æ— æ³•è§£å†³ï¼Œåªå¥½å¸è½½é‡è£…äº†ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="MySQL" scheme="http://silencezheng.top/tags/MySQL/"/>
    
    <category term="MacOS" scheme="http://silencezheng.top/tags/MacOS/"/>
    
  </entry>
  
  <entry>
    <title>Javaå¸¸è§å¯¹è±¡è¾¨æ</title>
    <link href="http://silencezheng.top/2023/03/12/article97/"/>
    <id>http://silencezheng.top/2023/03/12/article97/</id>
    <published>2023-03-12T09:34:02.000Z</published>
    <updated>2023-03-12T09:35:45.918Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€äº›Javaå¸¸è§Objectç®€ç§°è§£è¯»ã€‚</p><p>VOã€POã€BOã€TOã€DAOã€DTO<br><span id="more"></span></p><h2 id="Data-Access-Object-DAO"><a href="#Data-Access-Object-DAO" class="headerlink" title="Data Access Object(DAO)"></a>Data Access Object(DAO)</h2><p>æ•°æ®è®¿é—®å¯¹è±¡ï¼Œæ˜¯sunçš„ä¸€ä¸ªæ ‡å‡†j2eeè®¾è®¡æ¨¡å¼ï¼Œæ­¤å¯¹è±¡ç”¨äºè®¿é—®æ•°æ®åº“ã€‚é€šå¸¸å’ŒPOç»“åˆä½¿ç”¨ï¼ŒDAOä¸­åŒ…å«äº†å„ç§æ•°æ®åº“çš„æ“ä½œæ–¹æ³•ï¼Œå¤¹åœ¨ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®åº“æ“ä½œä¸­é—´çš„æ“ä½œå±‚ã€‚</p><h2 id="Persistant-Object-PO"><a href="#Persistant-Object-PO" class="headerlink" title="Persistant Object(PO)"></a>Persistant Object(PO)</h2><p>POå¯ä»¥çœ‹æˆæ˜¯ä¸æ•°æ®åº“ä¸­çš„è¡¨ç›¸æ˜ å°„çš„javaå¯¹è±¡ã€‚æœ€ç®€å•çš„POå°±æ˜¯å¯¹åº”æ•°æ®åº“ä¸­æŸä¸ªè¡¨ä¸­çš„ä¸€æ¡è®°å½•ï¼Œå¤šä¸ªè®°å½•å¯ä»¥ç”¨POçš„é›†åˆã€‚POä¸­åº”è¯¥ä¸åŒ…å«ä»»ä½•å¯¹æ•°æ®åº“çš„æ“ä½œã€‚ å¥½å¤„å°±æ˜¯å¯ä»¥æŠŠä¸€æ¡è®°å½•ä½œä¸ºä¸€ä¸ªå¯¹è±¡å¤„ç†ï¼Œå¯ä»¥æ–¹ä¾¿çš„è½¬ä¸ºå…¶ä»–å¯¹è±¡ã€‚</p><p>POç”±ä¸€ç»„å±æ€§å’Œå±æ€§çš„getå’Œsetæ–¹æ³•ç»„æˆï¼Œè¿™äº›å±æ€§æ˜¯è·Ÿæ•°æ®åº“è¡¨çš„å­—æ®µä¸€ä¸€å¯¹åº”çš„ã€‚POå¯¹è±¡éœ€è¦å®ç°åºåˆ—åŒ–æ¥å£ï¼Œå®ƒä»¬åœ¨å‘æ•°æ®åº“ä¸­æ·»åŠ æ–°æ•°æ®æ—¶è¢«åˆ›å»ºï¼Œåˆ é™¤æ•°æ®åº“ä¸­æ•°æ®æ—¶å‰Šé™¤ã€‚å¹¶ä¸”POåªèƒ½å­˜æ´»åœ¨ä¸€ä¸ªæ•°æ®åº“è¿æ¥ä¸­ï¼Œæ–­å¼€è¿æ¥å°±è¢«é”€æ¯ã€‚</p><p>POæ˜¯æœ‰çŠ¶æ€çš„ï¼Œæ¯ä¸ªå±æ€§ä»£è¡¨å…¶å½“å‰çš„çŠ¶æ€ï¼Œä»–æ˜¯ç‰©ç†æ•°æ®çš„å¯¹è±¡è¡¨ç¤ºã€‚ä½¿ç”¨å®ƒï¼Œå¯ä»¥ä½¿æˆ‘ä»¬çš„ç¨‹åºä¸ç‰©ç†æ•°æ®è§£è€¦ï¼Œå¹¶ä¸”å¯ä»¥ç®€åŒ–å¯¹è±¡æ•°æ®ä¸ç‰©ç†æ•°æ®ä¹‹é—´çš„è½¬æ¢ã€‚</p><h2 id="Business-Object-BO"><a href="#Business-Object-BO" class="headerlink" title="Business Object(BO)"></a>Business Object(BO)</h2><p>ä¸šåŠ¡å¯¹è±¡ï¼Œå°è£…ä¸šåŠ¡ç›¸å…³å†…å®¹çš„javaå¯¹è±¡ï¼Œå…¶å†…å®¹æ—¢å¯ä»¥åªåŒ…å«ä¸šåŠ¡å¯¹è±¡å±æ€§ï¼Œä¹Ÿå¯ä»¥åªåŒ…å«ä¸šåŠ¡æ–¹æ³•ï¼Œæˆ–æ˜¯å…¨åŒ…å«ã€‚</p><p>ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯æŠŠBOçš„ä¿¡æ¯åœ¨POä¿¡æ¯çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å……ï¼Œå¯ä»¥ç†è§£ä¸ºå¤šä¸ªPOå¯¹è±¡çš„ä¿¡æ¯æŒ‰ç…§ä¸šåŠ¡æµç¨‹å¿…è¦çš„æ‹¼å‡‘åœ¨ä¸€èµ·å½¢æˆçš„å¯¹è±¡ã€‚</p><h2 id="Data-Transfer-Object-DTO"><a href="#Data-Transfer-Object-DTO" class="headerlink" title="Data Transfer Object(DTO)"></a>Data Transfer Object(DTO)</h2><p>æ•°æ®ä¼ è¾“å¯¹è±¡ä¸»è¦ç”¨äºéœ€è¦å¤§é‡ä¼ è¾“å¯¹è±¡çš„åœ°æ–¹ï¼Œåœ¨å·²æœ‰æ•°æ®åŸºç¡€ä¸Šè¿›è¡Œè¿‡æ»¤ç­›é€‰ã€‚ æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ä¸€å¼ è¡¨æœ‰100ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå¯¹åº”çš„POå°±æœ‰100ä¸ªå±æ€§ã€‚ä½†æ˜¯æˆ‘ä»¬ç•Œé¢ä¸Šåªè¦æ˜¾ç¤º10ä¸ªå­—æ®µï¼Œå®¢æˆ·ç«¯ç”¨WEB serviceæ¥è·å–æ•°æ®ï¼Œæ²¡æœ‰å¿…è¦æŠŠæ•´ä¸ªPOå¯¹è±¡ä¼ é€’åˆ°å®¢æˆ·ç«¯ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨åªæœ‰è¿™10ä¸ªå±æ€§çš„DTOæ¥ä¼ é€’ç»“æœåˆ°å®¢æˆ·ç«¯ï¼Œè¿™æ ·ä¹Ÿä¸ä¼šæš´éœ²æœåŠ¡ç«¯è¡¨ç»“æ„ã€‚åˆ°è¾¾å®¢æˆ·ç«¯ä»¥åï¼Œå¦‚æœç”¨è¿™ä¸ªå¯¹è±¡æ¥å¯¹åº”ç•Œé¢æ˜¾ç¤ºï¼Œé‚£æ­¤æ—¶å®ƒçš„èº«ä»½å°±è½¬ä¸ºVOã€‚ </p><p>DTOæ˜¯ä¸€ç»„éœ€è¦è·¨è¿›ç¨‹æˆ–ç½‘ç»œè¾¹ç•Œä¼ è¾“çš„èšåˆæ•°æ®çš„ç®€å•å®¹å™¨ã€‚å®ƒä¸åº”è¯¥åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿä¸åº”è¯¥å°†å…¶è¡Œä¸ºé™åˆ¶ä¸ºè¯¸å¦‚å†…éƒ¨ä¸€è‡´æ€§æ£€æŸ¥å’ŒåŸºæœ¬éªŒè¯ä¹‹ç±»çš„æ´»åŠ¨ã€‚</p><h2 id="Value-Object-VO"><a href="#Value-Object-VO" class="headerlink" title="Value Object(VO)"></a>Value Object(VO)</h2><p>å€¼å¯¹è±¡ï¼Œé€šå¸¸ç”¨äºä¸šåŠ¡å±‚ä¹‹é—´ï¼ˆå‰åç«¯ä¹‹é—´ï¼‰çš„æ•°æ®ä¼ é€’ï¼Œä»…åŒ…å«æ•°æ®ã€‚å¯ä»¥ç†è§£ä¸ºå±•ç¤ºè¦ç”¨çš„æ•°æ®ï¼Œä¼ é€’åˆ°å‰ç«¯é¡µé¢ä¸Šï¼Œç›´æ¥è¿›è¡Œå±•ç¤ºã€‚</p><h2 id="å±‚çº§å…³ç³»"><a href="#å±‚çº§å…³ç³»" class="headerlink" title="å±‚çº§å…³ç³»"></a>å±‚çº§å…³ç³»</h2><p>ä¸€ç§å¸¸è§çš„å„å¯¹è±¡é—´çš„å±‚çº§å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½†æœ€ç»ˆè¿˜æ˜¯è¦å›å½’äºä¸šåŠ¡ï¼Œæ ¹æ®ä¸šåŠ¡å¯¹æ•°æ®å¤„ç†æµç¨‹è¿›è¡Œç¼©å‡æˆ–æ‰©å……ã€‚</p><p><img src="/assets/post_img/article97/objs.png" alt="obj layers"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://blog.csdn.net/weixin_42501850/article/details/114309927">https://blog.csdn.net/weixin_42501850/article/details/114309927</a></p><p>[2] <a href="https://blog.csdn.net/weixin_33038783/article/details/114603926">https://blog.csdn.net/weixin_33038783/article/details/114603926</a></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ä¸€äº›Javaå¸¸è§Objectç®€ç§°è§£è¯»ã€‚&lt;/p&gt;
&lt;p&gt;VOã€POã€BOã€TOã€DAOã€DTO&lt;br&gt;</summary>
    
    
    
    
    <category term="Java" scheme="http://silencezheng.top/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Windows10æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®</title>
    <link href="http://silencezheng.top/2023/02/25/article96/"/>
    <id>http://silencezheng.top/2023/02/25/article96/</id>
    <published>2023-02-25T03:54:00.000Z</published>
    <updated>2023-02-25T03:55:39.182Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Windows10æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®ï¼Œcuda11.6ã€‚</p><ul><li>anaconda</li><li>cudatoolkit</li><li>cudnn</li><li>pytorch</li><li>tensorflow<span id="more"></span></li></ul><h2 id="Anaconda"><a href="#Anaconda" class="headerlink" title="Anaconda"></a>Anaconda</h2><p><a href="https://www.anaconda.com/products/individual">anaconda</a></p><h2 id="Cudatoolkit"><a href="#Cudatoolkit" class="headerlink" title="Cudatoolkit"></a>Cudatoolkit</h2><p><a href="https://developer.nvidia.com/cuda-11-6-0-download-archive">11.6</a></p><p>å…¨ç¨‹é»˜è®¤å®‰è£…ï¼Œcmdè¾“å…¥<code>nvcc -V</code>æ£€éªŒæ˜¯å¦æŒ‰ç…§æˆåŠŸã€‚</p><h3 id="å¯èƒ½éœ€è¦çš„ç¯å¢ƒå˜é‡"><a href="#å¯èƒ½éœ€è¦çš„ç¯å¢ƒå˜é‡" class="headerlink" title="å¯èƒ½éœ€è¦çš„ç¯å¢ƒå˜é‡"></a>å¯èƒ½éœ€è¦çš„ç¯å¢ƒå˜é‡</h3><p><img src="/assets/post_img/article96/path.png" alt="path"></p><h3 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><p>å¦‚æ­£å¸¸åº”ç”¨ç¨‹åºå¸è½½å³å¯ï¼Œåªç•™ä¸‹ï¼š<code>NVIDIAçš„å›¾å½¢é©±åŠ¨ç¨‹åºã€NVIDIA Physxç³»ç»Ÿè½¯ä»¶ã€NVIDIA GeForce Experience</code>ã€‚</p><h2 id="cuDNN"><a href="#cuDNN" class="headerlink" title="cuDNN"></a>cuDNN</h2><p><a href="https://developer.nvidia.cn/rdp/cudnn-archive">https://developer.nvidia.cn/rdp/cudnn-archive</a></p><p>éœ€è¦æ³¨å†Œè´¦æˆ·ï¼Œé€‰æ‹©ä¸cudatoolkitå¯¹åº”çš„cuDNNç‰ˆæœ¬è¿›è¡Œä¸‹è½½ã€‚</p><p>ä¸‹è½½ä¸‹æ¥åï¼ŒæŠŠå„æ–‡ä»¶å¤¹çš„å†…å®¹æ”¾åˆ°CUDAå¯¹åº”ç›®å½•ä¸‹ã€‚</p><h2 id="Pytorch"><a href="#Pytorch" class="headerlink" title="Pytorch"></a>Pytorch</h2><p>å¯¹äº<code>cudatoolkit==11.6</code>ï¼ŒæŒ‰ç…§å®˜ç½‘æ•™ç¨‹å®‰è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install pytorch torchvision torchaudio pytorch-cuda=11.6 -c pytorch -c nvidia</span><br></pre></td></tr></table></figure><p>æ£€éªŒï¼š<code>torch.cuda.isavailable()</code></p><h2 id="Tensorflow"><a href="#Tensorflow" class="headerlink" title="Tensorflow"></a>Tensorflow</h2><p><code>python -m pip install tensorflow==2.10.0</code>ï¼Œ2.10.0ä¸ºæœ€åä¸€ä¸ªæ”¯æŒWindowsè°ƒç”¨GPUçš„ç‰ˆæœ¬ã€‚</p><p>æ£€éªŒï¼š<code>tf.config.list_physical_devices(&#39;GPU&#39;)</code></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¦–å‘äº <a href="https://silencezheng.top">silencezheng.top</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Windows10æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®ï¼Œcuda11.6ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;anaconda&lt;/li&gt;
&lt;li&gt;cudatoolkit&lt;/li&gt;
&lt;li&gt;cudnn&lt;/li&gt;
&lt;li&gt;pytorch&lt;/li&gt;
&lt;li&gt;tensorflow</summary>
    
    
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="http://silencezheng.top/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="Windows" scheme="http://silencezheng.top/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>MacOSä¸‹MySQLæ— æ³•å¯åŠ¨</title>
    <link href="http://silencezheng.top/2023/02/09/article95/"/>
    <id>http://silencezheng.top/2023/02/09/article95/</id>
    <published>2023-02-09T05:37:30.000Z</published>
    <updated>2023-02-17T11:43:56.060Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Macä¸‹é•¿æ—¶é—´æ²¡æœ‰ä½¿ç”¨MySQLï¼Œä¼šå‘ç°æ— æ³•å¯åŠ¨ã€‚</p><span id="more"></span><p>åŸå› å¯èƒ½æ˜¯ç›®å½•<code>/usr/local/mysql/data/</code>çš„mysqlæ‹¥æœ‰è€…æƒé™å‘ç”Ÿäº†å˜æ›´ï¼Œæ²¡æœ‰å†™çš„æƒé™ï¼Œæ‰€ä»¥éœ€è¦å¯¹è¯¥ç›®å½•èµ‹äºˆå†™çš„æƒé™ï¼Œæ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R mysql /usr/<span class="built_in">local</span>/mysql/data</span><br></pre></td></tr></table></figure><p>ç„¶åå†å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/<span class="built_in">local</span>/mysql/support-files/mysql.server start</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p><a href="https://zhuanlan.zhihu.com/p/358820231">https://zhuanlan.zhihu.com/p/358820231</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Macä¸‹é•¿æ—¶é—´æ²¡æœ‰ä½¿ç”¨MySQLï¼Œä¼šå‘ç°æ— æ³•å¯åŠ¨ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="MySQL" scheme="http://silencezheng.top/tags/MySQL/"/>
    
    <category term="MacOS" scheme="http://silencezheng.top/tags/MacOS/"/>
    
  </entry>
  
</feed>
